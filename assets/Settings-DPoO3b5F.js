import{j as e,B as V,u as K,P as L}from"./mui-B-xP7mtj.js";import{P as Z}from"./ProfileSettings-5d_dILau.js";import{r as y}from"./filepond-C4Y8_Bzv.js";import{h as ee,i as se,j as X,F as te,k as ae,l as le,m as re,B as ne,n as oe,I as ie,o as ce,p as de,q as me}from"./icons-r1d5ly4y.js";import{u as T}from"./index.esm-B1e87uze.js";import{B as R}from"./Button-CbZ7oUI_.js";import{u as S,f as ue,g as ge,h as xe,i as pe,j as he,k as be,l as fe,m as J,e as ve,d as ye,n as je,b as Y,a as H,o as U,R as we,c as q,p as Ne}from"./index-CRsfiaS_.js";import{I as G}from"./Input-DJlOEIMy.js";import{S as F}from"./Select-DM_fTtaf.js";import{E as Se}from"./ErrorMessage-B2u091H8.js";import{g as Q}from"./gsap-Brfk6Bdo.js";import{C as _e}from"./ConfirmDialog-DxIiB_6a.js";import"./ProfileAvatar-c1RuMNn7.js";import"./avatarUtils-DV1apmFs.js";import"./ImageUploader-Cu2Tp4EI.js";import"./Textarea-CvGz1H1U.js";import"./reactPlayer-xbeEqQf7.js";import"./lottie-Qij33HW6.js";const W=new Set(["instrument","composition_style","production_type","preferred_genres","music_genre"]),$=({role:s,profileId:l,details:t,refetch:c,addDetails:d,updateDetails:x,deleteDetails:m,fields:n,title:i})=>{const{t:o}=S("common"),[a,u]=y.useState(null),[p,w]=y.useState(""),{upsertHashtag:N}=ue(),{upsertProfileHashtag:_}=ge(),{register:k,handleSubmit:O,setError:P,clearErrors:v,reset:j,formState:{errors:C}}=T({defaultValues:n.reduce((r,g)=>({...r,[g.name]:g.default||""}),{})});y.useEffect(()=>{j(n.reduce((r,g)=>({...r,[g.name]:g.default||""}),{}))},[t,n,j]);const M=async r=>{try{if(v("root"),!n.every(b=>{var f;return!b.required||((f=r[b.name])==null?void 0:f.trim())})){P("root",{message:o("form.validation.allRequired")});return}await d({...r,role_id:s.id,profile_id:l});const I=[];for(const b of n)if(W.has(b.name)&&r[b.name]){const f=r[b.name].split(",").map(h=>h.trim()).filter(Boolean);I.push(...f.map(h=>`#${h.replace(/\s+/g,"")}`))}try{const b=await Promise.all(I.map(async f=>await N({name:f})));await Promise.all(b.map(async f=>{await _({profile_id:l,hashtag_id:f.id})}))}catch(b){console.error("Error while upserting profile hashtags:",b.message)}j(),w(o("messages.success.add",{item:i})),setTimeout(()=>w(""),3e3),c()}catch(g){console.error(o("messages.error.add",{item:i.toLowerCase()}),g),P("root",{message:o("messages.error.add",{item:i.toLowerCase()})})}},A=async r=>{const g={...r,...(a==null?void 0:a[r.id])||{}};if(!n.every(b=>{var f;return!b.required||((f=g[b.name])==null?void 0:f.toString().trim())})){P("root",{message:o("form.validation.allRequired")});return}try{await x(r.id,{...r,...g});const b=[];for(const h of n)if(W.has(h.name)&&g[h.name]){const z=g[h.name].split(",").map(B=>B.trim()).filter(Boolean);b.push(...z.map(B=>`#${B.replace(/\s+/g,"")}`))}const f=await Promise.all(b.map(async h=>await N({name:h})));await Promise.all(f.map(async h=>{await _({profile_id:l,hashtag_id:h.id})})),w(o("messages.success.update",{item:i})),setTimeout(()=>w(""),3e3),u(h=>{const{[r.id]:z,...B}=h||{};return B}),c()}catch(b){console.error(`Error updating ${i.toLowerCase()}:`,b),P("root",{message:o("messages.error.update",{title:i.toLowerCase()})})}},E=async r=>{console.log(`Deleting ${i.toLowerCase()} with ID:`,r);try{await m(r),w(o("messages.success.delete",{item:i})),setTimeout(()=>w(""),3e3),c()}catch(g){console.error(`Error deleting ${i.toLowerCase()}:`,g),P("root",{message:o("messages.error.delete",{item:i.toLowerCase()})})}};return e.jsxs("div",{className:"text-gray-900",children:[e.jsx("h4",{className:"text-xl text-gray-200 font-semibold mb-4",children:i}),p&&e.jsx("p",{className:"text-green-500 mb-2",children:p}),C.root&&e.jsx("p",{className:"text-red-500 mb-2",children:C.root.message}),e.jsx("ul",{className:"space-y-4",children:t.map(r=>e.jsxs("li",{className:"bg-gray-100 p-4 rounded-2xl shadow-md border border-white flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsx("div",{className:"flex flex-col gap-2 w-full sm:w-auto",children:n.map(g=>{var I,b;return e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"font-medium text-gray-700",children:[g.label,":"]}),g.type==="select"?e.jsxs("select",{value:((I=a==null?void 0:a[r.id])==null?void 0:I[g.name])??r[g.name],onChange:f=>u(h=>({...h,[r.id]:{...h==null?void 0:h[r.id],[g.name]:f.target.value}})),className:"ml-2 p-2 border border-gray-300 rounded-md bg-white",children:[e.jsx("option",{value:"",children:o("generic.chooseOne")}),g.options.map(f=>e.jsx("option",{value:f.value,children:f.label},f.value))]}):e.jsx("input",{type:g.type||"text",value:((b=a==null?void 0:a[r.id])==null?void 0:b[g.name])??r[g.name],onChange:f=>u(h=>({...h,[r.id]:{...h==null?void 0:h[r.id],[g.name]:f.target.value}})),className:"ml-2 p-2 border border-gray-300 rounded-md"})]},g.name)})}),e.jsxs("div",{className:"flex gap-2 mx-auto",children:[e.jsxs(V,{onClick:()=>A(r),variant:"contained",className:"!text-white !bg-emerald-600 hover:!bg-emerald-700 !px-3 !rounded-xl flex gap-1 !text-sm",children:[e.jsx(ee,{size:15}),o("generic.save")]}),e.jsxs(V,{onClick:()=>E(r.id),color:"error",variant:"contained",className:"!text-white !px-3 !rounded-xl !text-sm flex gap-1",children:[e.jsx(se,{size:17}),o("generic.delete")]})]})]},r.id))}),e.jsxs("form",{onSubmit:O(M),className:"mt-8 bg-gray-100 p-6 rounded-2xl shadow-inner border border-white",children:[e.jsx("h5",{className:"text-md font-medium mb-4 text-gray-700",children:o("addNew",{item:i.toLowerCase()})}),e.jsx("div",{className:"grid sm:grid-cols-2 gap-4",children:n.map(r=>{var g;return e.jsx("div",{children:r.type==="select"?e.jsx(F,{id:r.name,label:r.label,options:r.options,register:k,validation:{required:r.required?`${r.label} is required`:!1},error:C[r.name],className:"bg-white focus:bg-white",defaultOption:o("generic.chooseOne")}):e.jsx(G,{id:r.name,label:r.label,placeholder:r.placeholder,type:r.type||"text",register:k,validation:{required:r.required?`${r.label} is required`:!1},error:(g=C[r.name])==null?void 0:g.message,className:"bg-white"})},r.name)})}),e.jsx("div",{className:"mt-4 w-full flex justify-center",children:e.jsx(V,{type:"submit",variant:"contained",className:"!text-white !bg-emerald-600 hover:!bg-emerald-700 !w-1/2 !px-3 !rounded-xl flex gap-1 !text-sm",children:o("generic.add")})})]})]})},Pe=({role:s,profileId:l})=>{const{t}=S("music"),{fetchInstruments:c,addInstrument:d,updateInstrument:x,deleteInstrument:m}=xe(),{data:n,refetch:i}=c(s.id),o=a=>({...a,years_of_experience:a.years_of_experience?parseInt(a.years_of_experience,10):null});return e.jsx($,{role:s,profileId:l,details:n||[],refetch:i,addDetails:a=>d({details:o(a)}),updateDetails:(a,u)=>x({id:a,details:o(u)}),deleteDetails:a=>m({id:a}),title:t("roles.detailsTitle",{role:t("fields.instrument").toLowerCase()}),fields:[{name:"instrument",label:t("fields.instrument"),placeholder:t("placeholders.instrument"),required:!0},{name:"years_of_experience",label:t("fields.yearsOfExperience"),type:"number",placeholder:t("placeholders.yearsOfExperience")},{name:"level",label:t("fields.level"),type:"select",options:[{value:"Beginner",label:t("levels.beginner")},{value:"Intermediate",label:t("levels.intermediate")},{value:"Advanced",label:t("levels.advanced")},{value:"Expert",label:t("levels.expert")}]}]})},Ee=({role:s,profileId:l})=>{const{t}=S("music"),{fetchSinger:c,addSinger:d,updateSinger:x,deleteSinger:m}=pe(),{data:n,refetch:i}=c(s.id),o=a=>{var u,p;return{...a,voice_type:((u=a.voice_type)==null?void 0:u.trim())||null,music_genre:((p=a.music_genre)==null?void 0:p.trim())||null}};return e.jsx($,{role:s,profileId:l,details:n||[],refetch:i,addDetails:a=>d({details:o(a)}),updateDetails:(a,u)=>x({id:a,details:o(u)}),deleteDetails:a=>m({id:a}),title:t("roles.detailsTitle",{role:t("roles.singer").toLowerCase()}),fields:[{name:"voice_type",label:t("fields.voiceType"),placeholder:t("placeholders.voiceType"),required:!0},{name:"music_genre",label:t("fields.musicGenre"),placeholder:t("placeholders.musicGenre")},{name:"level",label:t("fields.level"),type:"select",options:[{value:"Beginner",label:t("levels.beginner")},{value:"Intermediate",label:t("levels.intermediate")},{value:"Advanced",label:t("levels.advanced")},{value:"Expert",label:t("levels.expert")}]}]})},Ce=({role:s,profileId:l})=>{const{t}=S("music"),{fetchDj:c,addDj:d,updateDj:x,deleteDj:m}=he(),{data:n,refetch:i}=c(s.id),o=a=>{var u;return{...a,events_played:((u=a.events_played)==null?void 0:u.trim())||null}};return e.jsx($,{role:s,profileId:l,details:n||[],refetch:i,addDetails:a=>d({details:o(a)}),updateDetails:(a,u)=>x({id:a,details:o(u)}),deleteDetails:a=>m({id:a}),title:t("roles.detailsTitle",{role:t("roles.dj").toLowerCase()}),fields:[{name:"events_played",label:t("fields.eventsPlayed"),placeholder:t("placeholders.eventsPlayed"),required:!0},{name:"preferred_genres",label:t("fields.preferredGenres"),placeholder:t("placeholders.preferredGenres")},{name:"level",label:t("fields.level"),type:"select",options:[{value:"Beginner",label:t("levels.beginner")},{value:"Intermediate",label:t("levels.intermediate")},{value:"Advanced",label:t("levels.advanced")},{value:"Expert",label:t("levels.expert")}]}]})},De=({role:s,profileId:l})=>{const{t}=S("music"),{fetchProducer:c,addProducer:d,updateProducer:x,deleteProducer:m}=be(),{data:n,refetch:i}=c(s.id),o=a=>({...a,years_of_experience:a.years_of_experience?parseInt(a.years_of_experience,10):null});return e.jsx($,{role:s,profileId:l,details:n||[],refetch:i,addDetails:a=>d({details:o(a)}),updateDetails:(a,u)=>x({id:a,details:o(u)}),deleteDetails:a=>m({id:a}),title:t("roles.detailsTitle",{role:t("roles.producer").toLowerCase()}),fields:[{name:"production_type",label:t("fields.productionType"),placeholder:t("placeholders.productionType"),required:!0},{name:"years_of_experience",label:t("fields.yearsOfExperience"),type:"number",placeholder:t("placeholders.yearsOfExperience")},{name:"level",label:t("fields.level"),type:"select",options:[{value:"Beginner",label:t("levels.beginner")},{value:"Intermediate",label:t("levels.intermediate")},{value:"Advanced",label:t("levels.advanced")},{value:"Expert",label:t("levels.expert")}]}]})},Re=({role:s,profileId:l})=>{const{t}=S("music"),{fetchComposer:c,addComposer:d,updateComposer:x,deleteComposer:m}=fe(),{data:n,refetch:i}=c(s.id),o=a=>{var u;return{...a,years_of_experience:a.years_of_experience?parseInt(a.years_of_experience,10):null,composition_style:((u=a.composition_style)==null?void 0:u.trim())||null}};return e.jsx($,{role:s,profileId:l,details:n||[],refetch:i,addDetails:a=>d({details:o(a)}),updateDetails:(a,u)=>x({id:a,details:o(u)}),deleteDetails:a=>m({id:a}),title:t("roles.detailsTitle",{role:t("roles.composer").toLowerCase()}),fields:[{name:"composition_style",label:t("fields.compositionStyle"),placeholder:t("placeholders.compositionStyle"),required:!0},{name:"years_of_experience",label:t("fields.yearsOfExperience"),type:"number",placeholder:t("placeholders.yearsOfExperience")},{name:"level",label:t("fields.level"),type:"select",options:[{value:"Beginner",label:t("levels.beginner")},{value:"Intermediate",label:t("levels.intermediate")},{value:"Advanced",label:t("levels.advanced")},{value:"Expert",label:t("levels.expert")}]}]})},ke=({role:s,profileId:l})=>e.jsxs("div",{className:"mt-4",children:[s.role==="Instrumentalist"&&e.jsx(Pe,{role:s,profileId:l}),s.role==="Singer"&&e.jsx(Ee,{role:s,profileId:l}),s.role==="DJ"&&e.jsx(Ce,{role:s,profileId:l}),s.role==="Producer"&&e.jsx(De,{role:s,profileId:l}),s.role==="Composer"&&e.jsx(Re,{role:s,profileId:l})]}),Le=({profileId:s})=>{const{t:l}=S("music"),{fetchRoles:t}=J(),{data:c=[],isLoading:d,isError:x}=t(s),{addRole:m,deleteRole:n}=J(),[i,o]=y.useState(null),{register:a,handleSubmit:u,watch:p,reset:w,setError:N,formState:{errors:_}}=T({defaultValues:{selectedRole:""}}),k=p("selectedRole"),O=v=>{const j=v.selectedRole;if(c.length>=6){N("selectedRole",{message:l("edit.errors.maxRoles")});return}if(!j){N("selectedRole",{message:l("edit.errors.empty")});return}if(c.some(M=>M.role.toLowerCase()===j.toLowerCase())){N("selectedRole",{message:l("edit.errors.duplicate")});return}m({profileId:s,roleName:j}).then(()=>{w()}).catch(()=>{N("selectedRole",{message:l("edit.errors.addError")})})},P=y.useCallback(v=>{o(j=>j===v?null:v)},[]);return d?e.jsx(ve,{}):x?e.jsx(Se,{error:x.message}):e.jsxs("div",{className:"p-6 bg-gradient-to-r from-gray-900 text-white rounded-b-2xl shadow-lg max-w-4xl mx-auto",children:[e.jsxs("form",{onSubmit:u(O),className:"mb-6 space-y-4",children:[e.jsx("h2",{className:"text-2xl text-yellow-600 font-semibold text-center mb-4",children:l("edit.addRoleTitle")}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 items-center",children:[e.jsx(F,{id:"selectedRole",label:l("edit.selectLabel"),register:a,validation:{required:l("edit.errors.requiredSelect")},error:_.selectedRole,defaultOption:l("edit.defaultOption"),options:[{value:"Composer",label:l("roles.composer")},{value:"DJ",label:l("roles.dj")},{value:"Instrumentalist",label:l("roles.instrumentalist")},{value:"Producer",label:l("roles.producer")},{value:"Singer",label:l("roles.singer")}]}),e.jsx("div",{className:`${k==="Other"?"md:col-span-2":""}`,children:e.jsx(R,{type:"submit",className:"w-full md:w-auto md:mt-3 !bg-emerald-600 hover:!bg-emerald-700",children:l("edit.addButton")})})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:l("edit.yourRoles")}),c.length===0?e.jsx("p",{className:"text-gray-300",children:l("edit.noRoles")}):e.jsx("div",{className:"space-y-4",children:c.map(v=>e.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 shadow-sm transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 cursor-pointer hover:bg-gray-700 rounded-t-lg",onClick:()=>P(v.id),children:[e.jsx("span",{className:"text-lg font-semibold text-white",children:l(`roles.${v.role.toLowerCase()}`)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:`w-5 h-5 text-gray-400 transition-transform ${i===v.id?"rotate-90":""}`}),e.jsx("button",{onClick:j=>{j.stopPropagation(),n({id:v.id,profileId:s})},className:"text-xs bg-red-500 text-white px-2 py-1 rounded-full hover:bg-red-600","aria-label":l("music.edit.deleteRoleAria",{role:v.role}),children:"✕"})]})]}),i===v.id&&e.jsx("div",{className:"bg-gray-900 border-t border-gray-700 px-4 py-4 rounded-b-lg",children:e.jsx(ke,{role:v,profileId:s})})]},v.id))})]})]})},qe=({avatarUrl:s})=>{const{t:l}=S("ui",{keyPrefix:"sidebar"}),[t,c]=y.useState(!1),d=y.useRef(null),x=ye(),m=je(),n=K("(min-width:760px)"),i=y.useRef(!1),o=()=>n&&c(!0),a=()=>n&&c(!1);y.useEffect(()=>{if(d.current){if(!i.current){Q.set(d.current,{width:"4rem"}),i.current=!0;return}Q.to(d.current,{width:t&&n?"16rem":"4rem",duration:.3,ease:"circ.inOut"})}},[t]),y.useEffect(()=>{const p=()=>!n&&c(!1);return window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]);const u=[{to:"/settings/profile",label:l("profileSettings"),icon:p=>p?e.jsx("img",{src:s,alt:"Avatar",className:"w-5 h-5 rounded-full object-cover ring-2 ring-yellow-600"}):e.jsx("img",{src:s,alt:"Avatar",className:"w-5 h-5 rounded-full object-cover"})},{to:"/settings/account",label:l("accountSettings"),icon:p=>p?e.jsx(te,{}):e.jsx(ae,{})},{to:"/settings/privacy",label:l("privacySettings"),icon:p=>p?e.jsx(le,{}):e.jsx(re,{})},{to:"/settings/notifications",label:l("notificationsSettings"),icon:p=>p?e.jsx(ne,{}):e.jsx(oe,{})},{to:"/settings/music",label:l("musicSettings"),icon:p=>p?e.jsx(ie,{}):e.jsx(ce,{})}];return e.jsxs("div",{ref:d,className:"fixed top-20 left-0 h-[calc(100%-80px)] bg-gradient-to-b from-gray-950 to-gray-900 text-white z-10",onMouseEnter:o,onMouseLeave:a,style:{width:"4rem"},children:[n&&e.jsx("div",{className:"flex items-center justify-center h-16",children:e.jsx(X,{className:`text-gray-300 transform transition-transform duration-300 ${t?"rotate-180":"rotate-0"}`})}),e.jsx("ul",{className:"mt-4",children:u.map(({to:p,label:w,icon:N})=>{const _=m.pathname===p;return e.jsxs("li",{className:`flex items-center justify-between gap-4 p-4 cursor-pointer transition-all duration-300 ease-in-out ${_?"bg-sky-700 font-semibold":"hover:bg-gray-800"}`,onClick:()=>x(p),children:[e.jsx("span",{className:"text-xl flex-shrink-0 ml-1 text-yellow-600",children:N(_)}),e.jsx("span",{className:`whitespace-nowrap transition-opacity duration-300 ease-in-out ${t?"opacity-100 translate-x-0":"opacity-0 -translate-x-4"}`,children:w})]},p)})})]})},Ie=[{value:"en",label:"English"},{value:"es",label:"Español"}],Te=[{value:"dark",label:"Dark"},{value:"light",label:"Light"}],Oe=()=>{const{t:s}=S("settings",{keyPrefix:"account"}),{deleteProfile:l}=Y(),{user:t,updatePassword:c,deleteMyAccount:d,signOut:x}=H(),{prefs:m,saveUiPreferences:n}=U(),{control:i,handleSubmit:o,formState:{isSubmitting:a}}=T({defaultValues:{language:(m==null?void 0:m.lang)??"en",theme:(m==null?void 0:m.theme)??"dark"}}),[u,p]=y.useState(!1),[w,N]=y.useState(!1),_=async({language:E,theme:r})=>{await n({lang:E,theme:r}),N(!0),setTimeout(()=>N(!1),2500)},{register:k,handleSubmit:O,watch:P,reset:v,formState:{errors:j,isSubmitting:C}}=T(),M=async({newPassword:E})=>{await c(E),v()},A=async()=>{try{await l(t.id),await d(),await x()}catch(E){console.error(E)}finally{p(!1)}};return e.jsxs("div",{className:"flex flex-col gap-10 bg-gradient-to-l to-gray-900 light:bg-gradient-to-l light:to-gray-200 p-6 rounded-b-lg shadow-lg max-w-4xl mx-auto",children:[e.jsxs("section",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl text-yellow-600 font-semibold mb-4",children:s("title")}),e.jsxs("p",{className:"text-gray-200 light:text-gray-900 font-bold",children:["Email: ",e.jsx("span",{className:"text-gray-400 light:text-gray-600",children:t.email})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-semibold text-center mb-4",children:s("preferences.title")}),e.jsxs("form",{onSubmit:o(_),className:"max-w-lg mx-auto space-y-6",children:[e.jsx(F,{id:"language",label:s("labels.language"),control:i,options:Ie,className:"bg-gray-800 text-white light:bg-gray-200 light:text-gray-900"}),e.jsx(F,{id:"theme",label:s("labels.theme"),control:i,options:Te,className:"bg-gray-800 text-white light:bg-gray-200 light:text-gray-900"}),e.jsx("div",{className:"sm:col-span-2 flex justify-center gap-4",children:e.jsx(R,{type:"submit",disabled:a,className:"!bg-emerald-600 hover:!bg-emerald-700",children:s(a?"buttons.saving":w?"buttons.saved":"buttons.save")})})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg text-center font-semibold mb-4",children:s("password.title")}),e.jsxs("form",{onSubmit:O(M),className:"max-w-lg mx-auto space-y-6",children:[e.jsx(G,{id:"newPassword",type:"password",label:s("labels.new"),placeholder:s("placeholders.new"),register:k,validation:{required:s("validations.required"),minLength:{value:6,message:s("validations.min")}},error:j.newPassword}),e.jsx(G,{id:"confirmPassword",type:"password",label:s("labels.confirm"),placeholder:s("placeholders.confirm"),register:k,validation:{validate:E=>E===P("newPassword")||s("validations.mismatch")},error:j.confirmPassword}),e.jsx("div",{className:"sm:col-span-2 flex justify-center gap-4",children:e.jsx(R,{type:"submit",disabled:C,className:"!bg-emerald-600 hover:!bg-emerald-700",children:s(C?"buttons.saving":"buttons.change")})})]})]}),e.jsxs("section",{className:"border-t sm:w-lg mx-auto text-center border-gray-700 pt-10",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-400 mb-4",children:s("danger.title")}),e.jsx(R,{className:"!bg-red-700 hover:!bg-red-800",onClick:()=>p(!0),children:s("buttons.delete")})]}),e.jsx(_e,{isOpen:u,title:s("danger.title"),message:s("danger.confirm"),onConfirm:A,onCancel:()=>p(!1),confirmLabel:s("danger.yesDelete"),cancelLabel:s("danger.cancel"),color:"error"})]})},D=({id:s,label:l,register:t,validation:c={},error:d,className:x="",classForLabel:m="",...n})=>{const i=t?t(s,c):n;return e.jsxs("div",{className:`mb-4 flex bg-gray-900 p-4 rounded-lg items-center justify-between ${x}`,children:[l&&e.jsx("label",{htmlFor:s,className:`text-sm font-bold text-gray-200 select-none ${m}`,children:l}),e.jsxs("label",{htmlFor:s,className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{id:s,type:"checkbox",className:"sr-only peer",...i}),e.jsx("span",{className:`w-10 h-6 rounded-full bg-gray-500
                     transition-colors duration-200
                     peer-checked:bg-emerald-600
                     peer-focus:ring-2 peer-focus:ring-emerald-400/50`}),e.jsx("span",{className:`absolute left-0.5 top-0.5 w-5 h-5 rounded-full bg-white
                     transition-transform duration-200
                     peer-checked:translate-x-4`})]}),d&&e.jsx("p",{className:"text-red-500 text-sm mt-1 w-full",children:d.message||d})]})};D.propTypes={id:L.string.isRequired,label:L.string,register:L.func,validation:L.object,error:L.any,className:L.string,classForLabel:L.string};const Me=()=>{const{t:s}=S("settings",{keyPrefix:"privacy"}),{privacyPrefs:l,savePrivacySettings:t}=U(),{register:c,handleSubmit:d,reset:x,formState:{isDirty:m,isSubmitting:n}}=T({defaultValues:{show_email:!1,show_last_seen:!1,allow_messages:"all"}}),[i,o]=y.useState(!1);y.useEffect(()=>{l&&x(l)},[l,x]);const a=async u=>{await t(u),o(!0),setTimeout(()=>o(!1),2500)};return e.jsxs("section",{className:"flex flex-col gap-10 bg-gradient-to-l to-gray-900 p-6 rounded-b-lg shadow-lg max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-2xl text-yellow-600 font-semibold mb-6 text-center",children:s("title")}),e.jsx(D,{id:"show_email",label:s("toggles.showEmail"),register:c}),e.jsx(D,{id:"show_last_seen",label:s("toggles.showLastSeen"),register:c}),e.jsx(F,{id:"allow_messages",label:s("allowMessages.label"),options:[{value:"all",label:s("allowMessages.options.all")},{value:"connections_only",label:s("allowMessages.options.connections")},{value:"none",label:s("allowMessages.options.none")}],register:c}),e.jsx("div",{className:"pt-4 flex justify-center",children:e.jsx(R,{onClick:d(a),disabled:!m||n,className:"!bg-emerald-600 hover:!bg-emerald-700",children:s(n?"buttons.saving":i?"buttons.saved":"buttons.save")})})]})},Be=()=>{const{t:s}=S("settings",{keyPrefix:"notifications"}),{notifPrefs:l,saveNotificationPrefs:t}=U(),{register:c,handleSubmit:d,reset:x,formState:{isDirty:m,isSubmitting:n}}=T({defaultValues:{likes:!0,comments:!0,connections:!0,groups:!0,matches:!0}});return y.useEffect(()=>{l&&x(l)},[l,x]),e.jsxs("form",{onSubmit:d(t),className:"flex flex-col gap-10 bg-gradient-to-l to-gray-900 p-6 rounded-b-lg shadow-lg max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-2xl text-yellow-600 font-semibold mb-6 text-center",children:s("title")}),e.jsx(D,{id:"likes",label:s("toggles.likes"),register:c}),e.jsx(D,{id:"comments",label:s("toggles.comments"),register:c}),e.jsx(D,{id:"connections",label:s("toggles.connections"),register:c}),e.jsx(D,{id:"groups",label:s("toggles.groups"),register:c}),e.jsx(D,{id:"matches",label:s("toggles.matches"),register:c}),e.jsx("div",{className:"pt-4 flex justify-center",children:e.jsx(R,{type:"submit",disabled:!m||n,className:"!bg-emerald-600 hover:!bg-emerald-700",children:s(n?"buttons.saving":"buttons.save")})})]})},Fe={google:{icon:e.jsx(me,{className:"text-red-500"}),color:"!bg-red-600 hover:!bg-red-700"},github:{icon:e.jsx(de,{className:"text-white"}),color:"!bg-gray-800 hover:!bg-gray-900"}},$e=()=>{const{t:s}=S("settings",{keyPrefix:"providers"}),{user:l,linkProvider:t,unlinkProvider:c,loading:d}=H(),x=(l==null?void 0:l.identities)??[],m=n=>x.some(i=>i.provider===n);return e.jsxs("section",{className:"flex flex-col gap-10 bg-gradient-to-l to-gray-900 p-6 rounded-b-lg shadow-lg max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-2xl text-yellow-600 font-semibold mb-4 text-center",children:s("title")}),Object.entries(Fe).map(([n,i])=>{const o=x.find(a=>a.provider===n);return e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-700 pb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[i.icon,e.jsx("span",{className:"font-medium capitalize",children:n})]}),m(n)?e.jsx(R,{className:"!bg-red-700 hover:!bg-red-800",disabled:d,onClick:()=>c(o.id),children:s("buttons.disconnect")}):e.jsx(R,{className:i.color,disabled:d,onClick:()=>t(n),children:s("buttons.connect")})]},n)})]})},rs=()=>{const{user:s}=H(),{fetchProfile:l}=Y(),{data:t}=l(s.id);return K("(min-width:760px)"),e.jsxs("div",{className:"settings-layout flex min-h-screen bg-gray-950 text-white",children:[e.jsx(qe,{avatarUrl:t==null?void 0:t.avatar_url}),e.jsx("div",{className:"settings-content flex-grow p-6 overflow-auto max-w-4xl ml-auto md:!mx-auto",children:e.jsxs(we,{children:[e.jsx(q,{path:"profile",element:e.jsx(Z,{profile:t})}),e.jsx(q,{path:"music",element:e.jsx(Le,{profileId:s.id})}),e.jsx(q,{path:"account",element:e.jsx(Oe,{})}),e.jsx(q,{path:"privacy",element:e.jsx(Me,{})}),e.jsx(q,{path:"notifications",element:e.jsx(Be,{})}),e.jsx(q,{path:"apps",element:e.jsx($e,{})}),e.jsx(q,{index:!0,element:e.jsx(Ne,{to:"profile",replace:!0})})]})})]})};export{rs as default};
