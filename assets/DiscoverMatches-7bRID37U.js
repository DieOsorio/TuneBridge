import{j as e}from"./mui-DM0ppf3M.js";import{r as d}from"./calendar-BpW-aEGs.js";import{u as E,a as b,A as $,D as B,F,j as H,L as q,P as z,b as G,k as J}from"./index-DR1Vxlj-.js";import{c as K,C as O,D as p,E as j,G as U,J as V,K as Q}from"./icons-A8qOaPVA.js";import{u as W,h as X}from"./useCanSendDM-Cx0JPOJR.js";import{S as c}from"./index-CpFbDMuT.js";/* empty css                 */import"./reactPlayer-CjHFj7G4.js";import"./lottie-DTlWc_fK.js";import"./gsap-Brfk6Bdo.js";import"./filepond-DcLflJls.js";const Y=()=>{const t="#a1a1aa",n="#e4e4e7";return e.jsxs("div",{className:`
        max-w-100 w-full mx-auto border border-gray-400 rounded-xl p-4 
        shadow-sm bg-gray-950 
        hover:shadow-md 
        transition-all duration-150 ease-in-out 
        will-change-transform
        relative
      `,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(c,{circle:!0,height:52,width:52,baseColor:t,highlightColor:n}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(c,{height:18,width:120,baseColor:t,highlightColor:n}),e.jsx(c,{height:14,width:80,baseColor:t,highlightColor:n})]})]}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx(c,{circle:!0,height:35,width:35,baseColor:t,highlightColor:n})}),e.jsxs("div",{className:"flex justify-between items-center ",children:[e.jsx("div",{children:e.jsx(c,{height:30,width:100,baseColor:t,highlightColor:n,borderRadius:15})}),e.jsx("div",{children:e.jsx(c,{height:25,width:120,baseColor:t,highlightColor:n,borderRadius:6})})]})]})},Z=d.memo(({profile:t,loading:n})=>{const{t:i}=E("profile"),{user:a}=b(),{addConnection:u,deleteConnection:m,updateConnection:h,userConnections:v}=$(),{findConversation:w,createConversation:_}=B(),{addParticipant:C}=F(),[o,ee]=d.useState(null),[y,N]=d.useState(!1),{canSend:S,loading:k}=W(t.profile_id),P=H(),{data:g}=v(t.profile_id),r=g==null?void 0:g.find(l=>a&&l.follower_profile_id===a.id&&l.following_profile_id===t.profile_id||a&&l.follower_profile_id===t.profile_id&&l.following_profile_id===a.id),I=["connect","pending","accepted","blocked"];function M(l){return I.includes(l)}const f=r==null?void 0:r.status,s=M(f)?f:"connect",A=async()=>{a&&(s==="connect"?await u({follower_profile_id:a.id,following_profile_id:t.profile_id,status:"pending"}):(s==="pending"||s==="accepted")&&r?await m(r):s==="blocked"&&r&&await h({connection:r,updatedConnection:{status:"accepted"}}))},L=()=>{y||!a||X({myProfileId:a.id,otherProfile:{id:t.profile_id,username:t.username,avatar_url:t.avatar_url,last_seen:t.last_seen},findConversation:w,createConversation:_,addParticipant:C,navigate:P,setLoading:()=>N(!0)})},x=Math.round(t.match_score*100);if(n||!t||k)return e.jsx(Y,{});const R=x>=70?"bg-amber-800 text-white":x>=40?"bg-sky-700 text-white":x>=10?"bg-gray-300 text-gray-900":"bg-gray-800 text-gray-100",T=()=>s==="pending"?i("connection.cancelRequest"):s==="accepted"?i("connection.disconnect"):s==="blocked"?i("connection.unblock"):null,D={connect:e.jsx(Q,{}),pending:e.jsx(V,{}),accepted:e.jsx(j,{}),blocked:e.jsx(U,{})}[s];return e.jsxs("div",{className:`
      max-w-100 w-full mx-auto border border-gray-400 rounded-xl p-4 
      shadow-sm bg-gray-950 
      hover:shadow-md 
      transition-all duration-150 ease-in-out 
      will-change-transform
    `,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(q,{to:`/profile/${t.profile_id}`,children:e.jsx(z,{avatar_url:t.avatar_url,alt:t.username,className:"!w-13 !h-13",loading:!1,list:!1,gender:t.gender??"",group:!1})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-100",children:t.name||t.display_name||t.username}),e.jsxs("div",{className:"text-sm text-gray-400",children:["@",t.username]})]})]}),e.jsxs("div",{className:`absolute inline-flex items-center gap-2 cursor-help select-none px-3 py-1 rounded-full text-sm font-semibold ${R}`,title:i("matchScore.cardTitle"),children:[e.jsx(K,{className:"text-amber-500 text-lg"}),e.jsxs("span",{children:["Match: ",x,"%"]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2 text-sm",children:[S&&e.jsx("button",{onClick:L,className:"absolute top-4 right-4 text-amber-700 cursor-pointer hover:text-amber-800 transition",children:e.jsx(O,{size:30})}),e.jsx("button",{onClick:A,title:T()||"",className:"flex cursor-pointer items-center min-w-35 justify-center gap-1 px-3 py-1 rounded bg-gray-700 text-white hover:bg-gray-800 transition text-sm",children:e.jsxs("span",{className:"truncate flex items-center gap-1",children:[o&&s==="accepted"&&e.jsx(p,{}),o&&s==="pending"&&e.jsx(p,{}),o&&s==="blocked"&&e.jsx(j,{}),!o&&D,e.jsx("span",{children:o||i(`connection.${s}`)})]})})]})]})});function he(){const{user:t}=b(),{matchAll:n}=G(),[i,a]=d.useState([]),[u,m]=d.useState(!0);return d.useEffect(()=>{t&&(m(!0),n({profileId:t.id,limit:9}).then(a).catch(console.error).finally(()=>m(!1)))},[t==null?void 0:t.id]),!i.length||u?e.jsx(J,{}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(h=>e.jsx(Z,{profile:h,loading:u},h.profile_id))})}export{he as default};
