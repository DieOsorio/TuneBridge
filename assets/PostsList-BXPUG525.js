import{j as e,B as ce}from"./mui-O-_7DbpJ.js";import{u as E,a8 as de,L as O,P as Y,a as ee,b as me,a9 as we,c as xe,i as Ne,y as ke,z as ye,h as ue,O as Ce,Q as Pe,a7 as _e,aa as Se,E as se,a6 as he}from"./index-Cf-eeQSk.js";import{r as d,R as ze}from"./calendar-BpW-aEGs.js";import{a6 as Le,a7 as Me,a8 as Ee,a9 as $e,aa as Ae,ab as Ie,ac as Oe,ad as Fe,ae as Re,af as Be,A as De}from"./icons-D__VgVoR.js";import{u as Ge,h as He}from"./useCanSendDM-B09CymKG.js";import{S as b}from"./index-CpFbDMuT.js";/* empty css                 */import{m as te}from"./proxy-CMgJRXYy.js";import{S as ne,N as Te,P as ie,b as re,Z as le,a as oe}from"./swiper-7Zixx0_p.js";import{P as K}from"./PlusButton-BGz8RCtX.js";function Qe({onChange:s,onSubmit:t,onCancel:a,value:i}){const{t:n}=E("comments");return e.jsxs("div",{className:"flex-1 mt-2 w-full place-items-end",children:[e.jsx("textarea",{value:i,onChange:c=>s(c.target.value),className:"bg-gray-100 dark:bg-zinc-700 p-3 rounded-lg shadow-sm w-150",rows:2,placeholder:n("card.placeholder")}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("button",{onClick:t,className:"px-3 py-1 bg-sky-700 hover:bg-sky-800 text-white rounded text-sm",children:n("card.buttons.reply")}),e.jsx("button",{onClick:()=>a(),className:"px-3 py-1 bg-gray-600 hover:bg-gray-700 text-white rounded text-sm",children:n("card.buttons.cancel")})]})]})}function Ue({value:s,onChange:t,onSave:a,onCancel:i}){const{t:n}=E("common");return e.jsxs("div",{className:"flex-1 mt-2 place-items-end",children:[e.jsx("textarea",{value:s,onChange:c=>t(c.target.value),className:"w-100 p-2 rounded-md border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-900 text-zinc-800 dark:text-zinc-100 resize-none",rows:2}),e.jsxs("div",{className:"flex gap-2 mt-2 justify-center",children:[e.jsx("button",{onClick:()=>a(),className:"px-3 py-1 w-18 bg-emerald-600 hover:bg-emerald-700 text-white rounded text-sm",children:n("generic.save")}),e.jsx("button",{onClick:()=>i(),className:"px-3 py-1 w-18 bg-gray-600 hover:bg-gray-700 text-white rounded text-sm",children:n("generic.cancel")})]})]})}const Ve=d.memo(Ue);function We({onMenu:s,onEdit:t,onDelete:a,menuRef:i,isMenuOpen:n}){const{t:c}=E("common");return e.jsxs("div",{className:"relative",ref:i,children:[e.jsx("button",{onClick:s,className:"cursor-pointer text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300 text-xl px-2",children:e.jsx(Le,{size:20})}),n&&e.jsxs("div",{className:"absolute right-0 mt-2 w-32 bg-white dark:bg-zinc-900 border border-zinc-800 dark:border-zinc-700 rounded shadow-lg z-10",children:[e.jsx("button",{onClick:t,className:"block w-full text-center px-4 py-2 text-sm hover:bg-zinc-100 dark:hover:bg-zinc-800",children:c("generic.edit")}),e.jsx("div",{className:"border-t border-zinc-300 dark:border-zinc-700"}),e.jsx("button",{onClick:a,className:"block w-full text-center px-4 py-2 text-sm hover:bg-red-100 dark:hover:bg-red-950 text-red-600 dark:text-red-400",children:c("generic.delete")})]})]})}const Ze=d.memo(We);function ge({comment:s,profile:t,onDelete:a,onSaveEdit:i,replies:n=[],profilesMap:c,onReplySubmit:f,currentUserId:h}){const{t:p}=E("comments"),[v,y]=d.useState(!1),[m,l]=d.useState(!1),[o,k]=d.useState(""),[w,x]=d.useState(null),[C,r]=d.useState(!1),[P,_]=d.useState(s.content),{commentLikesQuery:$,insertLike:z,deleteLike:F}=de(),{data:A=[],isLoading:R}=$(s.id),L=w===s.id,M=h===s.profile_id,u=d.useRef(null);d.useEffect(()=>{function g(q){L&&u.current&&!u.current.contains(q.target)&&x(null)}return document.addEventListener("mousedown",g),()=>{document.removeEventListener("mousedown",g)}},[L]);const N=()=>(A==null?void 0:A.filter(g=>g.comment_id===s.id))||[],S=()=>N().some(g=>g.profile_id===h),B=()=>N().find(g=>g.profile_id===h),Q=async()=>{if(!h)return;const g=B();g?await F(g):await z({comment_id:s.id,profile_id:h})},D=d.useCallback(()=>{o.trim()!==""&&(f({content:o,parent_id:s.id}),k(""),l(!1))},[o,s.id,f]),U=d.useCallback(()=>{k(""),l(!1)},[]),G=d.useCallback(()=>{i(s.id,s.post_id,P),r(!1)},[s.id,s.post_id,P,i]),V=d.useCallback(()=>{r(!1),_(s.content)},[s.content]),W=d.useCallback(()=>{x(L?null:s.id)},[s.id]),Z=v?n.slice(-10):[];return e.jsxs("div",{className:"flex mb-4",children:[e.jsx(O,{to:`/profile/${t==null?void 0:t.id}`,children:e.jsx(Y,{avatar_url:t==null?void 0:t.avatar_url,className:"!w-8 !h-8 mr-3 flex-shrink-0",alt:`${t==null?void 0:t.username}'s avatar`,gender:t==null?void 0:t.gender})}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsxs("div",{className:"bg-zinc-900 p-3 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"font-semibold text-zinc-700 dark:text-zinc-300",children:(t==null?void 0:t.username)||p("card.anonymous")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-xs text-zinc-500",children:new Date(s.updated_at||s.created_at).toLocaleString()}),M&&e.jsx(Ze,{menuRef:u,onDelete:()=>a(s),onEdit:()=>r(!0),onMenu:()=>W(),isMenuOpen:L})]})]}),e.jsx("div",{className:"text-zinc-600 dark:text-zinc-300 mt-1",children:s.content}),e.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-sky-700 dark:text-sky-500",children:[e.jsxs("button",{className:"flex items-center gap-1 hover:underline disabled:opacity-50",onClick:Q,disabled:R,children:[e.jsx("span",{children:S()?p("card.liked"):p("card.like")}),e.jsx("span",{children:N().length})]}),e.jsx("button",{className:"hover:underline",onClick:()=>l(!m),children:p("card.reply")})]})]}),C&&e.jsx(Ve,{value:P,onChange:_,onSave:G,onCancel:V}),m&&e.jsx(Qe,{value:o,onChange:k,onSubmit:D,onCancel:U}),n.length>0&&e.jsxs("div",{className:"mt-4 border-zinc-300 dark:border-zinc-700",children:[e.jsx("button",{onClick:()=>y(!v),className:"flex items-center gap-1 text-sm font-bold text-sky-600 mb-1 hover:underline",children:e.jsxs(e.Fragment,{children:[v?e.jsx(Me,{}):e.jsx(Ee,{}),n.length===1?p("card.replies",{count:n.length}):p("card.repliesPlural",{count:n.length})]})}),v&&Z.map(g=>e.jsx(ge,{comment:g,profile:c[g.profile_id],onDelete:a,onSaveEdit:i,replies:g.replies||[],profilesMap:c,onReplySubmit:f,currentUserId:h},g.id))]})]})]})}const qe=d.memo(ge);function Je({postId:s}){var M;const{t}=E("comments"),{user:a}=ee(),{fetchProfile:i,profilesMap:n}=me(),{data:c,isLoading:f}=i(a==null?void 0:a.id),{fetchComments:h,insertComment:p,updateComment:v,deleteComment:y,isLoading:m}=we(),{data:l}=h(s),[o,k]=d.useState(!1),w=Ke(l??[]),{data:x,isLoading:C}=n(w),{register:r,handleSubmit:P,reset:_,formState:{errors:$}}=xe();if(C||m||f)return e.jsx(Ne,{});const F=async u=>{const N={post_id:s,profile_id:a.id,content:u.comment};try{await p(N),_()}catch(S){console.error("Could't insert comment",S)}},A=async u=>{try{await y(u)}catch(N){console.error("error trying to delete comment",N)}},R=async(u,N,S)=>{try{await v({id:u,post_id:N,updatedComment:{content:S,updated_at:new Date().toISOString()}})}catch(B){console.error("Error updating comment",B)}},L=async u=>{const N={post_id:s,profile_id:a.id,content:u.content,parent_id:u.parent_id??null};try{await p(N)}catch(S){console.error("Could not insert reply",S)}};return e.jsxs("div",{className:"w-full mt-4 border-t pt-4 text-sm text-zinc-800 dark:text-zinc-100",children:[e.jsxs("div",{className:"mb-4",children:[(l==null?void 0:l.length)>2&&!o&&e.jsx("button",{onClick:()=>k(!0),className:"mb-4 text-sky-700 dark:text-sky-400 text-sm hover:underline",children:t("box.loadMore")}),(M=o?l:l==null?void 0:l.slice(-2))==null?void 0:M.map(u=>e.jsx(qe,{comment:u,profile:x==null?void 0:x[u.profile_id],onDelete:A,onSaveEdit:R,replies:u.replies,profilesMap:x,onReplySubmit:L,currentUserId:a.id},u.id)),(l==null?void 0:l.length)===0&&e.jsx("p",{className:"italic text-zinc-600",children:t("box.noComments")})]}),e.jsxs("form",{onSubmit:P(F),className:"flex items-start gap-3 mt-4",children:[e.jsx(O,{to:`/profile/${c.id}`,children:e.jsx(Y,{avatar_url:c.avatar_url,className:"!w-10 !h-10",gender:c.gender,alt:`${c.username}'s avatar`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{...r("comment",{required:!0}),placeholder:t("box.placeholder"),className:"w-full p-2 rounded-md border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-950 text-zinc-800 dark:text-zinc-100 resize-none",rows:2}),e.jsx("button",{type:"submit",className:"mt-2 px-4 py-1 bg-sky-700 hover:bg-sky-800 text-white rounded-md text-sm",children:t("box.send")}),$.comment&&e.jsx("span",{className:"text-red-500 text-xs",children:t("box.error")})]})]})]})}function Ke(s=[]){const t=new Set;function a(i){for(const n of i)n.profile_id&&t.add(n.profile_id),Array.isArray(n.replies)&&n.replies.length>0&&a(n.replies)}return a(s),Array.from(t)}const Xe=()=>{const s="#a1a1aa",t="#e4e4e7";return e.jsxs(te.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"absolute z-50 p-4 rounded-lg shadow-md bg-neutral-100 dark:bg-neutral-900 w-64 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(b,{circle:!0,width:40,height:40,baseColor:s,highlightColor:t}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx(b,{width:80,height:10,baseColor:s,highlightColor:t}),e.jsx(b,{width:100,height:8,baseColor:s,highlightColor:t})]})]}),e.jsxs("div",{className:"space-y-1 mb-3",children:[e.jsx(b,{height:8,width:"100%",baseColor:s,highlightColor:t}),e.jsx(b,{height:8,width:"90%",baseColor:s,highlightColor:t}),e.jsx(b,{height:8,width:"80%",baseColor:s,highlightColor:t}),e.jsx(b,{height:8,width:"70%",baseColor:s,highlightColor:t})]}),e.jsxs("div",{className:"flex justify-end items-center gap-5 pt-2",children:[e.jsx(b,{width:30,height:30,baseColor:s,highlightColor:t}),e.jsx(b,{width:30,height:30,baseColor:s,highlightColor:t}),e.jsx(b,{width:30,height:30,baseColor:s,highlightColor:t})]})]})},Ye=({profile:s,isLoading:t,isGroup:a})=>{const{user:i}=ee(),n=!!i,{findConversation:c,createConversation:f}=ke(),{addParticipant:h}=ye(),{canSend:p,loading:v}=Ge(s.id),[y,m]=d.useState(!1),l=t||v,o=ue(),k=n&&i.id===s.id,w=()=>{if(!y){if(!n){o("/login");return}He({myProfileId:i.id,otherProfile:s,findConversation:c,createConversation:f,addParticipant:h,navigate:o,setLoading:m})}};if(l)return e.jsx(Xe,{});if(!s)return null;const{username:x,name:C,state:r,country:P,bio:_,avatar_url:$,id:z}=s;return e.jsxs(te.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"absolute z-50 p-4 rounded-lg shadow-md bg-neutral-100 dark:bg-neutral-900 w-64 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(O,{to:a?`/group/${z}`:`/profile/${z}`,children:e.jsx("img",{src:$,alt:`Avatar of ${x||C}`,className:"w-10 h-10 rounded-full object-cover"})}),e.jsxs("div",{className:"ml-6",children:[e.jsxs("p",{className:"font-semibold text-center text-neutral-900 dark:text-neutral-100 mb-2",children:["@",x||C]}),(r||P)&&e.jsxs("p",{className:"text-neutral-400 text-xs",children:[r,r&&P?", ":"",P]})]})]}),_&&e.jsx("p",{className:"text-neutral-600 dark:text-neutral-300 line-clamp-4",children:_.length>50?`${_.slice(0,100)}...`:_}),e.jsxs("div",{className:"flex justify-end items-center gap-5 pt-2",children:[k&&e.jsx(O,{title:"Edit Profile",to:"/settings/profile",className:"text-neutral-400 cursor-pointer hover:text-neutral-900 dark:hover:text-neutral-100 transition",children:e.jsx($e,{size:30})}),e.jsx(O,{title:"View Posts",to:a?`/group/${z}/posts`:`/profile/${z}/posts`,className:"text-neutral-400 cursor-pointer hover:text-neutral-900 dark:hover:text-neutral-100 transition",children:e.jsx(Ae,{size:30})}),p&&!a&&e.jsx("button",{title:"Send Message",className:"text-neutral-400 cursor-pointer hover:text-neutral-900 dark:hover:text-neutral-100 transition",onClick:w,children:e.jsx(Ie,{size:30})})]})]})},es=({children:s})=>e.jsxs("div",{className:`pointer-events-none absolute left-1/2 top-full mt-2 -translate-x-1/2
                  whitespace-nowrap rounded-md bg-gray-900/90 py-1 px-2 text-xs
                  font-semibold text-sky-200 shadow-lg backdrop-blur`,children:[s,e.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 h-2 w-2 rotate-45 bg-gray-900/90"})]});function T({post:s}){const{t}=E("posts"),{user:a}=ee(),i=!!a,n=ue(),[c,f]=d.useState(!1),{fetchProfile:h}=me(),{data:p,error:v,isLoading:y}=h(s.profile_id),m=!!s.group_id,{fetchProfileGroup:l}=Ce(),{data:o,isLoading:k}=l(s.group_id),{userGroupRole:w}=Pe(),{role:x,isLoading:C}=w({profileId:a.id,groupId:s.group_id}),r=m?o:p,{insertLike:P,deleteLike:_,userLikedPostQuery:$,postLikesQuery:z}=de(),{data:F}=$(s.id,i?a.id:void 0),{data:A=[]}=z(s.id),R=A.length,{getHashtagsByPostId:L}=_e(),{data:M}=L(s.id),[u,N]=d.useState(!1),[S,B]=d.useState(!1),[Q,D]=d.useState(!1),[U,G]=d.useState(null),V=t("likes.count",{count:R}),W=k||C||y,Z=Se(),g=()=>{Z(s.profile_id),N(!0)},q=i?{profile_id:a.id,post_id:s.id}:null,H=!!F,fe=()=>{if(!i){n("/login");return}H?_({...F,post_id:s.id,profile_id:a.id}):P(q)},pe=()=>{n(`/edit-post/${s.id}`)},J=j=>{G(j),D(!0)},ae=()=>{D(!1),G(null)},je=()=>{if(!i){n("/login");return}B(j=>!j)};if(v)return e.jsx(se,{error:v.message});const be=s.profile_id===(a==null?void 0:a.id),ve=i&&(!m&&be||m&&(x==="admin"||x==="manager"));return e.jsxs("div",{className:"bg-gradient-to-l to-gray-800 p-4 rounded-lg shadow-md mb-4 mx-auto max-w-3xl w-full",children:[e.jsx("h3",{className:`text-xl mb-4 font-semibold rounded-lg bg-gradient-to-l ${m?"to-amber-700":"to-sky-600"} p-4 text-gray-100`,children:s.title}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex sm:flex-col flex-row items-center",children:[e.jsxs("div",{onMouseEnter:g,onMouseLeave:()=>N(!1),className:"relative mb-auto",children:[e.jsxs(O,{to:m?`/group/${r==null?void 0:r.id}`:`/profile/${r==null?void 0:r.id}`,children:[e.jsx("h2",{className:"font-bold text-lg text-gray-200",children:r==null?void 0:r.username}),e.jsx(Y,{avatar_url:r==null?void 0:r.avatar_url,className:"!w-15 !h-15 mx-auto",gender:r==null?void 0:r.gender,alt:`${r==null?void 0:r.username}'s avatar`})]}),u&&e.jsx(Ye,{profile:r,isLoading:W,isGroup:m})]}),e.jsxs("div",{className:"flex sm:h-full sm:justify-end sm:flex-col items-end ml-auto sm:ml-0 gap-3 sm:gap-8 mt-6",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center",children:ve&&e.jsx(Oe,{title:"Edit Post",className:"text-yellow-600 hover:text-yellow-700 cursor-pointer",onClick:pe,size:32})}),e.jsx("div",{onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),onClick:fe,className:"relative cursor-pointer transition-transform duration-200 hover:scale-110",children:e.jsxs(te.div,{initial:{scale:1},animate:{scale:H?[1,1.4,1]:1},transition:{duration:.4},children:[H||c?e.jsx(Fe,{className:"w-8 h-8 sm:w-10 sm:h-10"}):e.jsx(Re,{className:"w-8 h-8 sm:w-10 sm:h-10"}),c&&e.jsx(es,{children:V})]},H?"liked":"not-liked")}),e.jsx(Be,{size:32,title:"Post Comments",onClick:je,className:`text-gray-400 cursor-pointer ${m?"hover:text-amber-700":"hover:text-sky-600"} ${S&&!m?"text-sky-600":"text-amber-700"} sm:!w-10 sm:!h-10`})]})]}),e.jsx("div",{className:"w-full max-w-[600px] flex-1 mx-auto bg-gradient-to-l from-gray-900 rounded-md hidden sm:flex",children:s.images_urls&&s.images_urls.length>0?e.jsx(ne,{modules:[Te,ie,re,le],slidesPerView:1,navigation:!0,pagination:{clickable:!0},scrollbar:{draggable:!0},style:{width:"100%",height:"100%"},children:s.images_urls.map((j,I)=>e.jsx(oe,{children:e.jsx("img",{src:j,alt:`Post image ${I}`,className:"w-full max-h-[500px] object-contain rounded cursor-pointer",style:{maxWidth:"100%",height:"auto",display:"block",margin:"0 auto"},onClick:()=>J(j)})},I))}):e.jsx("p",{className:"font-semibold m-auto text-center text-gray-400",children:t("messages.noImages")})}),e.jsx("div",{className:"w-full mx-auto p-0 bg-gradient-to-l from-gray-900 rounded-md block sm:hidden",children:s.images_urls&&s.images_urls.length>0?s.images_urls.length===1?e.jsx("img",{src:s.images_urls[0],alt:"Post image",className:"w-full h-[60vw] min-h-[180px] max-h-[70vh] object-contain rounded cursor-pointer",onClick:()=>J(s.images_urls[0])}):e.jsx(ne,{modules:[ie,re,le],slidesPerView:1,pagination:{clickable:!0},scrollbar:{draggable:!0},style:{minHeight:"60vw",maxHeight:"70vh"},children:s.images_urls.map((j,I)=>e.jsx(oe,{children:e.jsx("img",{src:j,alt:`Post image ${I}`,className:"w-full h-full min-h-[180px] max-h-[70vh] object-contain rounded cursor-pointer",onClick:()=>J(j)})},I))}):e.jsx("p",{className:"font-semibold text-center text-white",children:t("messages.noImages")})})]}),Q&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:ae,children:e.jsxs("div",{className:"relative max-w-full max-h-full p-4",onClick:j=>j.stopPropagation(),children:[e.jsx("button",{className:"absolute top-1 right-1 text-white hover:text-red-100 cursor-pointer z-10",onClick:ae,children:e.jsx(De,{size:28})}),e.jsx("img",{src:U,alt:"Full-size post image",className:"max-w-[90vw] max-h-[80vh] object-contain rounded-md shadow-lg"})]})}),e.jsx("div",{className:"flex gap-2 mt-4 sm:mt-0 justify-center",children:M&&M.length>0&&M.map(j=>{const I=j.hashtags.name.startsWith("#")?j.hashtags.name.slice(1):j.hashtags.name;return e.jsx(O,{to:`/hashtag/${I}`,className:"text-sm text-sky-500 hover:underline",children:j.hashtags.name},j.hashtag_id)})}),e.jsx("p",{className:`text-gray-300 mx-auto rounded-md bg-gray-900 font-semibold border-1 sm:ml-auto sm:w-140 p-4 my-4 ${m?"border-amber-700":"border-sky-700"}`,children:s.content}),S&&e.jsx(Je,{postId:s.id})]})}function X(){const s="#a1a1aa",t="#e4e4e7";return e.jsxs("div",{className:"bg-gradient-to-l to-gray-800 p-4 rounded-lg shadow-md mb-4 mx-auto max-w-3xl w-full",children:[e.jsx(b,{height:60,baseColor:s,highlightColor:t,className:"mb-4 rounded-lg"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex sm:flex-col flex-row items-center sm:items-start gap-4 sm:gap-6 w-full sm:w-auto",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 sm:mb-auto",children:[e.jsx(b,{width:80,height:14,baseColor:s,highlightColor:t}),e.jsx(b,{circle:!0,width:60,height:60,baseColor:s,highlightColor:t})]}),e.jsx("div",{className:"flex sm:flex-col items-center justify-center gap-4 sm:gap-6 ml-auto sm:ml-5 sm:mt-6",children:[...Array(3)].map((a,i)=>e.jsx(b,{circle:!0,width:40,height:40,baseColor:s,highlightColor:t},i))})]}),e.jsx("div",{className:"w-full max-w-[600px] mx-auto p-4 bg-gradient-to-l from-gray-900 rounded-md",children:e.jsx(b,{height:300,className:"w-full rounded-md",baseColor:s,highlightColor:t})})]}),e.jsx("div",{className:"flex justify-center gap-3 mt-4 flex-wrap",children:[...Array(3)].map((a,i)=>e.jsx(b,{width:80,height:20,baseColor:s,highlightColor:t,className:"rounded"},i))}),e.jsx("div",{className:"max-w-[600px] mx-auto",children:e.jsx(b,{height:80,className:"rounded-md mt-6",baseColor:s,highlightColor:t})})]})}const ss=()=>{const{t:s}=E(["posts","common"]),{searchPosts:t,infinitePosts:a}=he(),{register:i,handleSubmit:n,watch:c}=xe(),f=c("searchTerm"),{data:h,fetchNextPage:p,hasNextPage:v,isFetchingNextPage:y,isLoading:m,error:l}=a(),{data:o,isLoading:k}=t(f);return m?e.jsx("div",{className:"flex flex-col gap-4 items-center",children:[...Array(7)].map((w,x)=>e.jsx(X,{},x))}):l?e.jsx(se,{error:l.message}):e.jsxs("div",{className:"flex flex-col mx-auto text-center",children:[e.jsxs("form",{onSubmit:n(()=>{}),className:"mb-5 relative flex items-center justify-center",children:[e.jsx("input",{type:"text",...i("searchTerm"),placeholder:s("posts:placeholders.searchPosts"),className:"border rounded-lg p-2 focus:outline-none focus:ring w-full max-w-md"}),e.jsx("div",{className:"absolute right-0 top-9 -translate-y-1/2 hidden lg:flex items-center group",children:e.jsx(K,{label:s("posts:buttons.createPost"),to:"/create-post",iconSize:28,showLabelOnMobile:!1})})]}),e.jsx("div",{className:"flex justify-center items-center lg:hidden mb-4 mr-6",children:e.jsx(K,{label:s("posts:buttons.createPost"),to:"/create-post",iconSize:32,showLabelOnMobile:!0})}),k?e.jsx("div",{className:"flex flex-col gap-4 items-center",children:[...Array(2)].map((w,x)=>e.jsx(X,{},x))}):f&&(o==null?void 0:o.length)>0?o.map(w=>e.jsx(T,{post:w},w.id)):f?e.jsx("p",{className:"col-span-full text-center text-gray-500",children:s("posts:messages.noMatch")}):h&&h.pages.length>0?h.pages.map((w,x)=>e.jsx(ze.Fragment,{children:w.map(C=>e.jsx(T,{post:C},C.id))},x)):e.jsx("p",{className:"col-span-full text-center text-gray-500",children:s("posts:messages.empty")}),v&&e.jsx(ce,{className:"!w-1/2 md:!w-1/3 !font-bold mt-4 !mx-auto hover:!text-sky-600",onClick:()=>p(),disabled:y,children:s(y?"common:loading":"common:loadMore")})]})},us=({profileId:s,posts:t,disableSearch:a,isOwnProfile:i})=>{const{t:n}=E(["posts","common"]),{infiniteUserPosts:c}=he(),{data:f,fetchNextPage:h,hasNextPage:p,isFetchingNextPage:v,isLoading:y,error:m}=c(s);if(!s&&!a)return e.jsx(ss,{});if(y)return e.jsx("div",{className:"flex flex-col gap-4 items-center",children:[...Array(3)].map((o,k)=>e.jsx(X,{},k))});if(m)return e.jsx(se,{error:m.message});const l=f?f.pages.flat():[];return t?e.jsx("div",{className:"mx-auto text-center w-full",children:e.jsx("div",{className:"grid grid-cols-1 gap-4",children:t.length>0?t.map(o=>e.jsx(T,{post:o},o.id)):e.jsx("p",{className:"col-span-full text-center text-gray-400",children:n("posts:messages.empty")})})}):e.jsxs("div",{className:"mx-auto text-center w-full",children:[i&&e.jsx("div",{className:"w-full flex justify-end mb-4 relative",children:e.jsx("div",{className:"group flex items-center",children:e.jsx(K,{label:n("posts:buttons.createPost"),to:"/create-post",iconSize:28,showLabelOnMobile:!0})})}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:l.length>0?l.map(o=>e.jsx(T,{post:o},o.id)):e.jsx("p",{className:"col-span-full text-center text-gray-500",children:n("posts:messages.empty")})}),p&&e.jsx(ce,{className:"!w-1/2 md:!w-1/3 !font-bold mt-4 !mx-auto hover:!text-sky-600",onClick:()=>h(),disabled:v,children:n(v?"common:loading":"common:loadMore")})]})};export{us as P};
