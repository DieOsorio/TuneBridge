import{j as t}from"./mui-B-xP7mtj.js";import{u as L}from"./index.esm-B1e87uze.js";import{a as S,v as N,d as E,u as k,w,e as M}from"./index-cVJRNoKt.js";import{I as c}from"./Input-DJlOEIMy.js";import{S as _}from"./Select-DM_fTtaf.js";import{r as P}from"./filepond-C4Y8_Bzv.js";import{B as p}from"./Button-CbZ7oUI_.js";import{E as q}from"./ErrorMessage-B2u091H8.js";import"./reactPlayer-xbeEqQf7.js";import"./icons-r1d5ly4y.js";import"./lottie-Qij33HW6.js";const A=[{value:"youtube",label:"YouTube"},{value:"spotify",label:"Spotify"},{value:"soundcloud",label:"SoundCloud"},{value:"vimeo",label:"Vimeo"},{value:"file",label:"Direct Audio/Video URL"}],$=()=>{const{user:r}=S(),{id:o}=N(),m=E(),{t:e}=k("music"),{getMediaLink:f,insertMediaLink:x,updateMediaLink:b}=w(),a=!!o,{register:s,handleSubmit:g,reset:h,formState:{errors:l},setValue:d}=L(),{data:i,isLoading:y,error:n}=f(o,{enabled:a});P.useEffect(()=>{a&&i?(d("url",i.url),d("title",i.title),d("media_type",i.media_type)):h()},[o,i]);const v=async u=>{try{a?await b({id:o,updatedLink:{...u,profile_id:r.id}}):await x({...u,profile_id:r.id}),m(`/profile/${r.id}/media`)}catch(j){console.error(j.message)}};return!r.id||a&&y?t.jsx(M,{}):n?t.jsx(q,{error:n.message}):t.jsxs("section",{className:"bg-gradient-to-l to-gray-900 p-6 rounded-b-lg shadow-lg max-w-4xl mx-auto",children:[t.jsx("div",{className:"text-center font-semibold",children:t.jsx("h2",{className:"text-2xl text-yellow-600 font-semibold text-center mb-4",children:e(a?"media.titleEdit":"media.titleAdd")})}),t.jsxs("form",{onSubmit:g(v),className:"space-y-4",children:[t.jsx(c,{id:"url",label:e("media.form.url"),placeholder:e("media.form.urlPlaceholder"),required:!0,register:s,error:l.url}),t.jsx(c,{id:"title",label:e("media.form.title"),placeholder:e("media.form.titlePlaceholder"),maxLength:30,validation:{maxLength:{value:30}},register:s,error:l.title}),t.jsx(_,{id:"media_type",label:e("media.form.type"),options:A,defaultOption:e("media.form.typePlaceholder"),register:s,validation:{required:e("media.form.typeRequired")},error:l.media_type}),t.jsxs("div",{className:"flex justify-center mt-16 gap-4",children:[t.jsx(p,{type:"submit",className:"!bg-emerald-600 hover:!bg-emerald-700",children:e(a?"media.form.update":"media.form.add")}),a&&t.jsx(p,{type:"button",onClick:()=>m(-1),className:"!bg-gray-600 hover:!bg-gray-700",children:e("media.form.cancel")})]})]})]})};export{$ as default};
