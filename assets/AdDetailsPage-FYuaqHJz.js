import{j as e}from"./mui-DntPDMdt.js";import{r as i}from"./calendar-DXWKnWXk.js";import{u as E,a as _,M as F,Q as M,D as R,G as B,b as O,j as I,k as U,E as G,L as l,P as Q,B as T,x as W}from"./index-DUDycYqK.js";import{u as q,h as z}from"./useCanSendDM-CAJH9hSQ.js";import{F as H}from"./PencilIcon-D1yNP24j.js";import{F as J}from"./TrashIcon-CUrawVMm.js";import"./reactPlayer-CBmCIXQE.js";import"./icons-Cf_ygVw3.js";import"./lottie-FCmafNqs.js";import"./gsap-CH_iu5NA.js";import"./filepond-DvarZm2e.js";function K({title:s,titleId:n,...d},c){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":n},d),s?i.createElement("title",{id:n},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"}))}const p=i.forwardRef(K),le=()=>{var g,f;const{t:s}=E("ads"),{user:n}=_(),{id:d}=F(),{fetchAd:c,deleteAd:h}=M(),{findConversation:u,createConversation:b}=R(),{addParticipant:j}=B(),{data:t,isLoading:y,error:o}=c(d),{fetchProfile:N}=O(),{data:a,isLoading:w}=N(t==null?void 0:t.profile_id),x=I(),[v,k]=i.useState(!1),{canSend:D,loading:P}=q((a==null?void 0:a.id)||""),[C,m]=i.useState(!1);if(y||w||P)return e.jsx(U,{});if(o||!t||!a||!n)return e.jsx(G,{error:(o==null?void 0:o.message)||"Unknown error"});const L=()=>{v||z({myProfileId:n.id,otherProfile:a,findConversation:u,createConversation:b,addParticipant:j,navigate:x,setLoading:k})},$=()=>{h(t),m(!1),x("/ads")},A=()=>{m(!1)},S=n.id===a.id,r=t.ad_type==="looking";return e.jsxs("div",{className:`max-w-3xl rounded-md bg-gradient-to-r mx-auto px-4 py-4 space-y-8 ${r?"from-cyan-950":"from-emerald-950"}`,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between bg-gradient-to-r bg-black/20 border-b p-2 border-gray-400",children:[e.jsxs("div",{className:"flex justify-between items-center gap-13",children:[e.jsx(l,{to:`/profile/${a.id}`,children:e.jsx(Q,{avatar_url:a.avatar_url,className:"!w-12 !h-12",gender:a.gender})}),e.jsx("h2",{className:"hidden min-w-100 sm:inline text-2xl tracking-wide mt-3 text-center rounded-lg px-4 py-1 text-gray-100",children:t.title}),e.jsxs("div",{className:"flex flex-col items-end gap-6 sm:flex-row sm:items-center",children:[S&&e.jsxs("div",{className:"flex gap-3",children:[e.jsx(l,{to:`/ads/edit/${t.id}`,children:e.jsx(H,{title:s("adCard.buttons.edit"),className:"text-yellow-500 w-5 h-5"})}),e.jsx("button",{onClick:()=>m(!0),children:e.jsx(J,{title:s("adCard.buttons.delete"),className:"text-red-500 cursor-pointer w-5 h-5"})})]}),e.jsx("span",{className:`text-sm px-2 min-w-20 py-1 text-center rounded-lg font-medium ${r?"bg-blue-100 text-cyan-700":"bg-green-100 text-emerald-700"}`,children:s(r?"adsDetailsPage.badges.looking":"adsDetailsPage.badges.offering")})]})]}),e.jsx("h2",{className:"text-md max-w-50 tracking-wide text-left sm:hidden sm:text-left p-1 text-gray-100",children:t.title})]}),e.jsxs("div",{className:"md:grid md:grid-cols-2 md:gap-8 space-y-6 md:space-y-0",children:[e.jsxs("div",{className:"space-y-6 mx-auto",children:[e.jsxs("div",{className:"flex gap-4 justify-between sm:justify-start items-center",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-400",children:[s("adsDetailsPage.info.postedBy")," :"]}),e.jsx(l,{to:`/profile/${a.id}`,className:"flex items-center gap-4",children:e.jsx("p",{className:"text-gray-100 rounded-lg bg-black/20 px-6 py-1",children:a.username})})]}),e.jsxs("div",{className:"flex gap-4 justify-between sm:justify-start items-center",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-400",children:[s("adsDetailsPage.info.from")," :"]}),e.jsx("p",{className:"text-gray-100 rounded-lg bg-black/20 px-6 py-1",children:a.country})]}),e.jsxs("div",{className:"flex gap-4 justify-between sm:justify-start items-center",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-400",children:[s("adsDetailsPage.info.createdAt")," :"]}),e.jsx("p",{className:"text-gray-100 rounded-lg bg-black/20 px-6 py-1",children:new Date(t.created_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"space-y-6 mx-auto",children:[e.jsxs("div",{className:"flex flex-wrap justify-between sm:flex-nowrap sm:justify-start gap-2 sm:gap-4 items-start",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-400",children:[s("adsDetailsPage.info.genres")," :"]}),e.jsx("p",{className:"text-gray-100 bg-black/20 rounded-lg px-4 py-1 break-words w-fit max-w-full",children:((g=t.genres)==null?void 0:g.join(", "))||"—"})]}),e.jsxs("div",{className:"flex gap-4 justify-between sm:justify-start items-center",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-400",children:[s(r?"adsDetailsPage.badges.looking":"adsDetailsPage.badges.offering")," :"]}),e.jsx("p",{className:"text-gray-100 rounded-lg bg-black/20 px-6 py-1",children:((f=t.looking_for)==null?void 0:f.join(", "))||"—"})]}),e.jsxs("div",{className:"flex gap-4 justify-between sm:justify-start items-center",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-400",children:[s("adsDetailsPage.info.location")," :"]}),e.jsx("p",{className:"text-gray-100 rounded-lg bg-black/20 px-6 py-1",children:t.location||"—"})]})]})]}),e.jsxs("div",{className:"space-y-2 pt-6 text-center",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-400",children:[s("adsDetailsPage.info.description")," :"]}),e.jsx("p",{className:"text-gray-100 rounded-lg bg-black/20 px-6 py-4",children:t.description})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(l,{to:"/ads",className:`group relative items-center justify-end hidden md:flex ${r?"text-cyan-400 hover:text-cyan-300":"text-emerald-400 hover:text-emerald-300"} transition-colors text-sm font-medium`,children:[e.jsx(p,{className:"w-5 h-5 font-extrabold"}),e.jsx("span",{className:`ml-2 whitespace-nowrap ${r?"text-cyan-500":"text-emerald-500"} font-semibold text-base px-3 py-1 transition-all duration-300 opacity-0 translate-x-4 group-hover:opacity-100 group-hover:translate-x-0 pointer-events-none`,children:s("adsDetailsPage.buttons.back")})]}),e.jsx(l,{to:"/ads",className:`md:hidden ${r?"text-cyan-500 hover:text-cyan-400":"text-emerald-500 hover:text-emerald-400"} transition-colors p-2 rounded-full focus:outline-none focus:ring-2 focus:ring-gray-300`,"aria-label":s("adsDetailsPage.buttons.back"),children:e.jsx(p,{title:s("adsDetailsPage.buttons.back"),className:"w-5 h-5 font-extrabold"})}),D&&e.jsx(T,{className:`${r?"!bg-cyan-700 hover:!bg-cyan-800":"!bg-emerald-600 hover:!bg-emerald-700"}`,onClick:L,children:s("adsDetailsPage.buttons.contact")})]}),e.jsx(W,{isOpen:C,title:s("confirmDialog.title"),message:s("confirmDialog.message"),onConfirm:$,onCancel:A,confirmLabel:s("confirmDialog.labels.confirm"),cancelLabel:s("confirmDialog.labels.cancel"),color:"error"})]})};export{le as default};
