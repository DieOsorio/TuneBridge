import{j as e}from"./mui-B-xP7mtj.js";import{a as y,v as g,u as j,w as b,e as w,L as N}from"./index-cVJRNoKt.js";import{R as v}from"./reactPlayer-xbeEqQf7.js";import{S as k}from"./ShinyText-DgKPoZ1S.js";import{E as n}from"./ErrorMessage-B2u091H8.js";import{P as L}from"./PlusButton-C-lc4xI5.js";import"./filepond-C4Y8_Bzv.js";import"./icons-r1d5ly4y.js";import"./lottie-Qij33HW6.js";const B=()=>{const{user:a}=y(),{id:t}=g(),{t:i}=j("music"),{userMediaLinks:c,deleteMediaLink:m}=b(),{data:r=[],isLoading:p,error:o}=c(t),d=a.id==t;if(p||!t)return e.jsx(w,{});if(o)return e.jsx(n,{error:o.message});if(!Array.isArray(r))return e.jsx(n,{error:"Invalid media data received"});const u=s=>{const l=s.match(/spotify\.com\/(track|playlist|album)\/([a-zA-Z0-9]+)/);if(!l)return null;const[M,f,h]=l;return`https://open.spotify.com/embed/${f}/${h}`},x=[...r.filter(s=>s.media_type==="spotify"),...r.filter(s=>s.media_type!=="spotify")];return e.jsxs("section",{className:"max-w-260 mx-auto",children:[e.jsx("div",{className:"text-center font-semibold",children:e.jsx(k,{text:i("media.title"),className:"text-3xl font-semibold tracking-wide mb-12"})}),d&&e.jsx(L,{label:i("media.actions.add"),to:"/media/create"}),e.jsx("ul",{className:"space-y-4 text-center",children:x.map(s=>e.jsxs("li",{className:"shadow-sm p-4 rounded-lg bg-gradient-to-l to-gray-800",children:[e.jsx("div",{className:"mb-2 mt-8",children:e.jsx("p",{className:"font-medium",children:s.title})}),e.jsx("div",{className:"mb-6",children:s.media_type==="spotify"?e.jsx("div",{className:"rounded-lg bg-[#1db954] p-1",children:e.jsx("iframe",{src:u(s.url),width:"100%",height:"80",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy"})}):e.jsx("div",{className:"aspect-video max-w-full bg-gray-900 p-1 rounded-lg",children:e.jsx(v,{url:s.url,controls:!0,width:"100%",height:"100%"})})}),d&&e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx(N,{to:`/media/edit/${s.id}`,className:"px-2 py-1 min-w-20 rounded-lg bg-yellow-600 hover:bg-yellow-700",children:i("media.actions.edit")}),e.jsx("button",{onClick:()=>m({profile_id:a.id,id:s.id}),className:"px-2 py-1 min-w-20 rounded-lg cursor-pointer !bg-red-600 hover:!bg-red-700",children:i("media.actions.delete")})]})]},s.id))})]})};export{B as default};
