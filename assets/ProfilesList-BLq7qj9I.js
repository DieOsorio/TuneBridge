import{j as e}from"./mui-DM0ppf3M.js";import{r as w}from"./calendar-BpW-aEGs.js";import{u as N,a as v,A as b,j as _,L as C,P as k,E as P}from"./index-BXNurRLk.js";import{K as I,E as h,J as S,D as E,G as A}from"./icons-A8qOaPVA.js";import{S as d}from"./index-CpFbDMuT.js";/* empty css                 */const $=({profile:t})=>{const{t:a}=N("profile"),{user:n}=v(),c=!!n,{addConnection:x,deleteConnection:r,userConnections:u,updateConnection:p}=b(),{data:m}=u(t.id),[i,g]=w.useState(""),f=_(),o=c&&n?m==null?void 0:m.find(l=>l.follower_profile_id===n.id&&l.following_profile_id===t.id||l.follower_profile_id===t.id&&l.following_profile_id===n.id):void 0,s=(o==null?void 0:o.status)??"connect",j=async()=>{if(!c||!n){f("/login");return}s==="connect"?await x({follower_profile_id:n.id,following_profile_id:t.id,status:"pending"}):(s==="pending"||s==="accepted")&&o?await r(o):s==="blocked"&&o&&await p({connection:o,updatedConnection:{status:"accepted"}})},y=()=>s==="pending"?a("connection.cancelRequest"):s==="accepted"?a("connection.disconnect"):s==="blocked"?a("connection.unblock"):null;return e.jsxs("div",{className:"flex flex-col w-60 h-90 text-gray-800 items-center gap-2 border rounded-lg shadow-sm bg-gray-200",style:{contentVisibility:"auto",containIntrinsicSize:"370px"},children:[e.jsx(C,{to:`/profile/${t.id}`,children:e.jsx(k,{avatar_url:t.avatar_url,alt:`${t.username}'s avatar`,className:"object-cover h-50 w-60",list:!0,gender:t.gender})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-semibold text-lg",children:t.username}),t.state&&t.country?e.jsxs("p",{className:"text-gray-500",children:[t.state,", ",t.country]}):t.country?e.jsx("p",{className:"text-gray-500",children:t.country}):t.state?e.jsx("p",{className:"text-gray-500",children:t.state}):null]}),e.jsx("div",{className:"mt-auto py-4",children:e.jsxs("button",{className:"relative font-bold cursor-pointer w-50 bg-gray-500 text-white px-4 py-2 rounded h-10 overflow-hidden flex items-center gap-2",onClick:j,onMouseEnter:()=>g(y()),onMouseLeave:()=>g(""),children:[e.jsxs("span",{className:"pl-1",children:[s==="connect"&&e.jsx(I,{className:"text-green-50"}),s==="accepted"&&!i&&e.jsx(h,{className:"text-green-50"}),s==="pending"&&!i&&e.jsx(S,{className:"text-yellow-50"}),(s==="pending"||s==="accepted")&&i&&e.jsx(E,{className:"text-red-50"}),s==="blocked"&&!i&&e.jsx(A,{className:"text-red-100"}),s==="blocked"&&i&&e.jsx(h,{className:""})]}),e.jsx("span",{className:`absolute inset-0 text-[13px] flex items-center justify-center transition-opacity duration-400 ${i?"opacity-0":"opacity-100"}`,children:a(`connection.${s}`)}),e.jsx("span",{className:`absolute inset-0 text-[13px] flex items-center justify-center transition-opacity duration-400 ${i?"opacity-100":"opacity-0"}`,children:i||""})]})})]})},L=()=>{const t="#a1a1aa",a="#e4e4e7";return e.jsxs("div",{className:"flex flex-col w-60 h-90 items-center gap-2 rounded-lg shadow-sm bg-gray-200",children:[e.jsx(d,{height:200,width:240,baseColor:t,highlightColor:a}),e.jsxs("div",{className:"text-center w-full px-4",children:[e.jsx(d,{height:20,width:"70%",baseColor:t,highlightColor:a}),e.jsx(d,{height:16,width:"50%",baseColor:t,highlightColor:a})]}),e.jsx("div",{className:"mt-auto py-4 w-full flex justify-center",children:e.jsx(d,{height:40,width:200,borderRadius:8,baseColor:t,highlightColor:a})})]})},z=({profiles:t,isSearching:a=!1,isLoading:n=!1,error:c})=>{const x=a||n;return c?e.jsx(P,{error:c.message}):x?e.jsx("div",{className:"w-full flex flex-wrap justify-center gap-4",children:[...Array(4)].map((r,u)=>e.jsx(L,{},u))}):!t||t.length===0?e.jsx("p",{className:"text-gray-500",children:"No profiles available."}):e.jsx("div",{className:"w-full flex flex-wrap justify-center gap-4",children:t.map(r=>e.jsx($,{profile:{...r,id:String(r.id)}},String(r.id)))})};export{z as P};
