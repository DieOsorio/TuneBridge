import{j as e,y as g,S as l}from"./mui-r_OKU3k3.js";import{r as w}from"./filepond-C4Y8_Bzv.js";import{u as N,a as b,x as _,h as k,L as C,P}from"./index-Lh6-Uiv0.js";import{C as I,x as m,z as L,w as R,y as S}from"./icons-C9PPhvnE.js";const $=({profile:t})=>{const{t:o}=N("profile"),{user:a}=b(),i=!!a,{addConnection:h,deleteConnection:x,userConnections:p,updateConnection:j}=_(),{data:d}=p(t.id),[n,u]=w.useState(""),f=k(),r=i&&(d==null?void 0:d.find(c=>c.follower_profile_id===a.id&&c.following_profile_id===t.id||c.follower_profile_id===t.id&&c.following_profile_id===a.id)),s=(r==null?void 0:r.status)??"connect",v=async()=>{if(!i){f("/login");return}s==="connect"?await h({follower_profile_id:a.id,following_profile_id:t.id,status:"pending"}):s==="pending"?await x(r):s==="accepted"?await x(r):s==="blocked"&&await j({connection:r,updatedConnection:{status:"accepted"}})},y=()=>s==="pending"?o("connection.cancelRequest"):s==="accepted"?o("connection.disconnect"):s==="blocked"?o("connection.unblock"):null;return e.jsxs("div",{className:"flex flex-col w-60 h-90 text-gray-800 items-center gap-2 border rounded-lg shadow-sm bg-gray-200",children:[e.jsx(C,{to:`/profile/${t.id}`,children:e.jsx(P,{avatar_url:t.avatar_url,alt:`${t.username}'s avatar`,className:"object-cover h-50 w-60",list:!0,gender:t.gender})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-semibold text-lg",children:t.username}),t.state&&t.country?e.jsxs("p",{className:"text-gray-500",children:[t.state,", ",t.country]}):t.country?e.jsx("p",{className:"text-gray-500",children:t.country}):t.state?e.jsx("p",{className:"text-gray-500",children:t.state}):null]}),e.jsx("div",{className:"mt-auto py-4",children:e.jsxs("button",{className:"relative font-bold cursor-pointer w-50 bg-gray-500 text-white px-4 py-2 rounded h-10 overflow-hidden flex items-center gap-2",onClick:v,onMouseEnter:()=>u(y()),onMouseLeave:()=>u(null),children:[e.jsxs("span",{className:"pl-1",children:[s==="connect"&&e.jsx(I,{className:"text-green-50"}),s==="accepted"&&!n&&e.jsx(m,{className:"text-green-50"}),s==="pending"&&!n&&e.jsx(L,{className:"text-yellow-50"}),(s==="pending"||s==="accepted")&&n&&e.jsx(R,{className:"text-red-50"}),s==="blocked"&&!n&&e.jsx(S,{className:"text-red-100"}),s==="blocked"&&n&&e.jsx(m,{className:""})]}),e.jsx("span",{className:`absolute inset-0 text-[13px] flex items-center justify-center transition-opacity duration-400 ${n?"opacity-0":"opacity-100"}`,children:o(`connection.${s}`)}),e.jsx("span",{className:`absolute inset-0 text-[13px] flex items-center justify-center transition-opacity duration-400 ${n?"opacity-100":"opacity-0"}`,children:n||""})]})})]})},A=()=>e.jsxs(g,{sx:{width:240,height:360,borderRadius:2,boxShadow:1,backgroundColor:"background.paper",display:"flex",flexDirection:"column",alignItems:"center",gap:1,p:1},children:[e.jsx(l,{variant:"rectangular",width:240,height:200,sx:{borderRadius:1}}),e.jsx(l,{variant:"text",width:"60%",height:32}),e.jsx(l,{variant:"text",width:"40%",height:24}),e.jsx(g,{sx:{flexGrow:1}}),e.jsx(l,{variant:"rectangular",width:160,height:40,sx:{borderRadius:1}})]}),M=({profiles:t,isSearching:o})=>o?e.jsx("div",{className:"flex flex-col gap-4 items-center",children:[...Array(3)].map((a,i)=>e.jsx(A,{},i))}):!t||t.length===0?e.jsx("p",{className:"text-gray-500",children:"No profiles available."}):e.jsx("div",{className:"w-full flex flex-wrap justify-center gap-4",children:t.map(a=>e.jsx($,{profile:a},a.id))});export{A as P,M as a};
