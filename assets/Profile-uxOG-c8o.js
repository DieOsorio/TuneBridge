import{j as e,t as B,g as fe,n as Se,h as oe,i as De,k as he,m as le,l as ce,o as de,p as Y,q as ge,s as Z,v as F,w as I,x as Le}from"./mui-r_OKU3k3.js";import{u as v,a as P,b as H,Y as Te,h as pe,Z as Fe,O as Ie,y as $e,z as Oe,_ as je,x as Q,L as K,P as We,B as W,r as Re,D as ze,q as Ae,l as Ue,m as Ee,p as Be,o as Ye,n as He,i as V,E as R,G as Ve,N as me,R as be,g as k,A as Xe}from"./index-Lh6-Uiv0.js";import{b as Ze,W as Ge,w as G,y as ue,z as qe,C as Je,X as Qe,K as Ke,L as et,Y as tt,Z as st,_ as xe,$ as at,a0 as nt,a1 as rt,a2 as it,V as ot,a3 as lt,a4 as ct}from"./icons-C9PPhvnE.js";import{r as _}from"./filepond-C4Y8_Bzv.js";import{u as dt,h as mt}from"./useCanSendDM-D6i4U4uf.js";import{L as ut}from"./LoadingBadge-Bcual9mi.js";import{S as ye}from"./ShinyText-pBf_BUOn.js";import{R as xt}from"./reactPlayer-P4y7tfwb.js";import{P as ee}from"./PlusButton-Cxgoa6SF.js";import{S as $}from"./index-cpdcplt_.js";/* empty css                 */import{P as ft}from"./PostsList-gc_My0sZ.js";import ht from"./PostForm-DlineEhc.js";import{A as gt}from"./AdCard-DHIUjY3F.js";import"./lottie-Qij33HW6.js";import"./gsap-Brfk6Bdo.js";import"./proxy-BT4QSSG6.js";import"./swiper-Ciezsct5.js";function pt({otherProfile:a,className:t=""}){const{t:s}=v("profile"),{user:n}=P(),{matchScore:r}=H(),[o,c]=_.useState(null);if(_.useEffect(()=>{n!=null&&n.id&&(a!=null&&a.id)&&r({profileAId:n.id,profileBId:a.id}).then(m=>{c(m)}).catch(m=>{console.error("matchScore error",m)})},[n==null?void 0:n.id,a==null?void 0:a.id]),o===null)return e.jsx(ut,{color:"amber"});const d=Math.round(o*100);return e.jsxs("div",{className:`w-full sm:w-auto flex sm:inline-flex items-center justify-center gap-1 cursor-help select-none ${t}`,title:s("matchScore.title"),children:[e.jsx(Ze,{className:"text-amber-700 text-xl"}),e.jsxs("span",{className:`inline-block w-full text-center px-3 py-1.5 rounded-full text-sm font-semibold whitespace-nowrap ${d>=70?"bg-amber-800 text-white":d>=40?"bg-sky-700 text-white":d>=10?"bg-gray-300 text-gray-900":"bg-gray-800 text-gray-100"}`,children:["Match: ",d,"%"]})]})}function jt(a,t){const s=+B(a)-+B(t);return s<0?-1:s>0?1:s}function bt(a){return fe(a,Date.now())}function yt(a){return t=>{const n=(a?Math[a]:Math.trunc)(t);return n===0?0:n}}function wt(a,t,s){const n=De(),r=(s==null?void 0:s.locale)??n.locale??he,o=jt(a,t);if(isNaN(o))throw new RangeError("Invalid time value");const c=Object.assign({},s,{addSuffix:s==null?void 0:s.addSuffix,comparison:o}),[d,m]=Se(s==null?void 0:s.in,...o>0?[t,a]:[a,t]),l=yt((s==null?void 0:s.roundingMethod)??"round"),h=m.getTime()-d.getTime(),g=h/Y,y=oe(m)-oe(d),u=(h-y)/Y,f=s==null?void 0:s.unit;let p;if(f?p=f:g<1?p="second":g<60?p="minute":g<le?p="hour":u<ce?p="day":u<de?p="month":p="year",p==="second"){const j=l(h/1e3);return r.formatDistance("xSeconds",j,c)}else if(p==="minute"){const j=l(g);return r.formatDistance("xMinutes",j,c)}else if(p==="hour"){const j=l(g/60);return r.formatDistance("xHours",j,c)}else if(p==="day"){const j=l(u/le);return r.formatDistance("xDays",j,c)}else if(p==="month"){const j=l(u/ce);return j===12&&f!=="month"?r.formatDistance("xYears",1,c):r.formatDistance("xMonths",j,c)}else{const j=l(u/de);return r.formatDistance("xYears",j,c)}}function vt(a,t){return wt(a,bt(a),t)}function Nt(a,t){const s=()=>fe(t==null?void 0:t.in,NaN),r=Pt(a);let o;if(r.date){const l=Mt(r.date,2);o=St(l.restDateString,l.year)}if(!o||isNaN(+o))return s();const c=+o;let d=0,m;if(r.time&&(d=Dt(r.time),isNaN(d)))return s();if(r.timezone){if(m=Lt(r.timezone),isNaN(m))return s()}else{const l=new Date(c+d),h=B(0,t==null?void 0:t.in);return h.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),h.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),h}return B(c+d+m,t==null?void 0:t.in)}const E={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Ct=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,kt=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,_t=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Pt(a){const t={},s=a.split(E.dateTimeDelimiter);let n;if(s.length>2)return t;if(/:/.test(s[0])?n=s[0]:(t.date=s[0],n=s[1],E.timeZoneDelimiter.test(t.date)&&(t.date=a.split(E.timeZoneDelimiter)[0],n=a.substr(t.date.length,a.length))),n){const r=E.timezone.exec(n);r?(t.time=n.replace(r[1],""),t.timezone=r[1]):t.time=n}return t}function Mt(a,t){const s=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=a.match(s);if(!n)return{year:NaN,restDateString:""};const r=n[1]?parseInt(n[1]):null,o=n[2]?parseInt(n[2]):null;return{year:o===null?r:o*100,restDateString:a.slice((n[1]||n[2]).length)}}function St(a,t){if(t===null)return new Date(NaN);const s=a.match(Ct);if(!s)return new Date(NaN);const n=!!s[4],r=O(s[1]),o=O(s[2])-1,c=O(s[3]),d=O(s[4]),m=O(s[5])-1;if(n)return Ot(t,d,m)?Tt(t,d,m):new Date(NaN);{const l=new Date(0);return!It(t,o,c)||!$t(t,r)?new Date(NaN):(l.setUTCFullYear(t,o,Math.max(r,c)),l)}}function O(a){return a?parseInt(a):1}function Dt(a){const t=a.match(kt);if(!t)return NaN;const s=q(t[1]),n=q(t[2]),r=q(t[3]);return Wt(s,n,r)?s*ge+n*Y+r*1e3:NaN}function q(a){return a&&parseFloat(a.replace(",","."))||0}function Lt(a){if(a==="Z")return 0;const t=a.match(_t);if(!t)return 0;const s=t[1]==="+"?-1:1,n=parseInt(t[2]),r=t[3]&&parseInt(t[3])||0;return Rt(n,r)?s*(n*ge+r*Y):NaN}function Tt(a,t,s){const n=new Date(0);n.setUTCFullYear(a,0,4);const r=n.getUTCDay()||7,o=(t-1)*7+s+1-r;return n.setUTCDate(n.getUTCDate()+o),n}const Ft=[31,null,31,30,31,30,31,31,30,31,30,31];function we(a){return a%400===0||a%4===0&&a%100!==0}function It(a,t,s){return t>=0&&t<=11&&s>=1&&s<=(Ft[t]||(we(a)?29:28))}function $t(a,t){return t>=1&&t<=(we(a)?366:365)}function Ot(a,t,s){return t>=1&&t<=53&&s>=0&&s<=6}function Wt(a,t,s){return a===24?t===0&&s===0:s>=0&&s<60&&t>=0&&t<60&&a>=0&&a<25}function Rt(a,t){return t>=0&&t<=59}const zt={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},At=(a,t,s)=>{let n;const r=zt[a];return typeof r=="string"?n=r:t===1?n=r.one:n=r.other.replace("{{count}}",t.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"en "+n:"hace "+n:n},Ut={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},Et={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Bt={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Yt={date:Z({formats:Ut,defaultWidth:"full"}),time:Z({formats:Et,defaultWidth:"full"}),dateTime:Z({formats:Bt,defaultWidth:"full"})},Ht={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},Vt={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},Xt=(a,t,s,n)=>t.getHours()!==1?Vt[a]:Ht[a],Zt={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},Gt={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},qt={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},Jt={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},Qt={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},Kt={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},es=(a,t)=>Number(a)+"º",ts={ordinalNumber:es,era:F({values:Zt,defaultWidth:"wide"}),quarter:F({values:Gt,defaultWidth:"wide",argumentCallback:a=>Number(a)-1}),month:F({values:qt,defaultWidth:"wide"}),day:F({values:Jt,defaultWidth:"wide"}),dayPeriod:F({values:Qt,defaultWidth:"wide",formattingValues:Kt,defaultFormattingWidth:"wide"})},ss=/^(\d+)(º)?/i,as=/\d+/i,ns={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},rs={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},is={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},os={any:[/1/i,/2/i,/3/i,/4/i]},ls={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},cs={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},ds={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},ms={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},us={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},xs={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},fs={ordinalNumber:Le({matchPattern:ss,parsePattern:as,valueCallback:function(a){return parseInt(a,10)}}),era:I({matchPatterns:ns,defaultMatchWidth:"wide",parsePatterns:rs,defaultParseWidth:"any"}),quarter:I({matchPatterns:is,defaultMatchWidth:"wide",parsePatterns:os,defaultParseWidth:"any",valueCallback:a=>a+1}),month:I({matchPatterns:ls,defaultMatchWidth:"wide",parsePatterns:cs,defaultParseWidth:"any"}),day:I({matchPatterns:ds,defaultMatchWidth:"wide",parsePatterns:ms,defaultParseWidth:"any"}),dayPeriod:I({matchPatterns:us,defaultMatchWidth:"any",parsePatterns:xs,defaultParseWidth:"any"})},hs={code:"es",formatDistance:At,formatLong:Yt,formatRelative:Xt,localize:ts,match:fs,options:{weekStartsOn:1,firstWeekContainsDate:1}};function gs(a){if(!a)return null;const t=Nt(a),s=Te.language.startsWith("es")?hs:he;return vt(t,{locale:s,addSuffix:!0})}function ps({isOwnProfile:a,profileData:t}){const{t:s}=v("profile"),{user:n}=P(),r=pe(),{data:o}=Fe(t.id),{totalUnreadMessages:c}=Ie(),{data:d,isLoading:m}=c(n==null?void 0:n.id),{findConversation:l,createConversation:h}=$e(),{addParticipant:g}=Oe(),{userNotifications:y,notificationsRealtime:u}=je();u(n.id);const{data:f,isLoading:p}=y(n.id),{connectionBetweenProfiles:j,addConnection:M,updateConnection:S,deleteConnection:N}=Q(),{data:i,isLoading:z}=j(n==null?void 0:n.id,t.id),{canSend:X}=dt(t.id),[T,A]=_.useState(!1),[D,C]=_.useState(!1),[x,te]=_.useState(null),se=(f==null?void 0:f.filter(b=>!b.is_read).length)||0,ve=!!(o!=null&&o.show_last_seen&&t.last_seen),Ne=()=>{T||mt({myProfileId:n.id,otherProfile:t,findConversation:l,createConversation:h,addParticipant:g,navigate:r,setLoading:A})},ae=async()=>{await M({follower_profile_id:n.id,following_profile_id:t.id,status:"pending"})},U=async()=>{i&&await N(i)},Ce=async()=>{i?await S({connection:i,updatedConnection:{status:"blocked"}}):await M({follower_profile_id:n.id,following_profile_id:t.id,status:"blocked"})},ne=async()=>{i&&await S({connection:i,updatedConnection:{status:"accepted"}})};_.useEffect(()=>{if(!D)return;const b=L=>{L.target.closest(".profile-connection-menu")||C(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[D]);const ke=b=>{const L="text-white text-lg mr-1 drop-shadow-[0_0_2px_rgba(255,255,255,0.5)]",Me="text-gray-300 text-lg mr-1 drop-shadow-[0_0_2px_rgba(255,255,255,0.2)]";return b==="accepted"?e.jsx(tt,{className:L}):b==="pending"?e.jsx(st,{className:L}):b==="blocked"&&i.follower_profile_id===n.id?e.jsx(xe,{className:L}):b==="blocked"&&i.follower_profile_id===t.id?e.jsx(xe,{className:Me}):e.jsx(at,{className:L})},_e=(i==null?void 0:i.status)==="accepted",Pe=(i==null?void 0:i.status)==="pending",re=(i==null?void 0:i.status)==="blocked"&&i.follower_profile_id===n.id,ie=(i==null?void 0:i.status)==="blocked"&&i.follower_profile_id===t.id;return e.jsxs("div",{className:"bg-gradient-to-l md:min-w-2xl lg:min-w-4xl from-gray-900 to-gray-950 mb-4 p-4 rounded-b-lg",children:[e.jsxs("div",{className:"flex flex-col gap-6 sm:flex-row sm:items-center",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-grow",children:[e.jsx(K,{to:`/profile/${t.id}`,children:e.jsx(We,{avatar_url:t.avatar_url,className:"flex-shrink-0 !w-24 !h-24",gender:t.gender})}),e.jsxs("div",{className:"flex flex-col gap-2 flex-grow",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-100 break-words",children:t.username}),e.jsx("p",{className:"text-gray-400 break-words",children:t.bio})]})]}),e.jsxs("div",{className:"flex gap-4 ml-auto sm:mb-auto items-center relative",children:[!a&&e.jsxs(e.Fragment,{children:[X&&e.jsx(nt,{className:"w-8 h-8 text-white cursor-pointer",onClick:Ne,disabled:T,title:s("profile.titles.startChat")}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{className:"text-white hover:text-sky-400 p-2 rounded-full focus:outline-none",onClick:()=>C(b=>!b),"aria-label":"Connection options",children:e.jsx(Ge,{size:24})}),D&&e.jsxs("div",{className:"absolute right-0 top-10 z-20 bg-gray-900 border border-sky-700 rounded shadow-lg py-1 w-44 flex flex-col min-w-[150px] profile-connection-menu",children:[z?e.jsx("span",{className:"px-4 py-2 text-gray-400 text-xs flex items-center gap-2",children:s("connection.loading")}):re?e.jsxs("button",{onClick:()=>{ne(),C(b=>!b)},className:"px-4 py-2 text-left hover:bg-gray-800 text-sm text-yellow-600 flex items-center gap-2",children:[e.jsx(G,{}),s("connection.unblock")]}):ie?e.jsxs("span",{className:"px-4 py-2 text-red-400 text-xs flex items-center gap-2",children:[e.jsx(ue,{}),s("connection.blockedByOther")]}):_e?e.jsxs("button",{onClick:()=>{U(),C(b=>!b)},className:"px-4 py-2 text-left hover:bg-gray-800 text-sm text-gray-300 flex items-center gap-2",children:[e.jsx(G,{}),s("connection.disconnect")]}):Pe?e.jsxs("button",{onClick:()=>{U(),C(b=>!b)},className:"px-4 py-2 text-left hover:bg-gray-800 text-sm text-yellow-400 flex items-center gap-2 group",onMouseEnter:()=>te("disconnect"),onMouseLeave:()=>te(null),children:[x==="disconnect"?e.jsx(G,{}):e.jsx(qe,{}),s(x==="disconnect"?"connection.disconnect":"connection.pending")]}):e.jsxs("button",{onClick:()=>{ae(),C(b=>!b)},className:"px-4 py-2 text-left hover:bg-gray-800 text-sm text-green-600 flex items-center gap-2",children:[e.jsx(Je,{}),s("connection.connect")]}),!ie&&!re&&e.jsxs("button",{onClick:()=>{Ce(),C(b=>!b)},className:"px-4 py-2 text-left hover:bg-gray-800 text-sm text-red-400 border-t border-sky-800 flex items-center gap-2",children:[e.jsx(ue,{}),s("connection.block")]})]})]})]}),a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx(Qe,{className:"w-8 h-8 text-white cursor-pointer",onClick:()=>r("/chat"),title:s("profile.titles.chat")}),!m&&(d==null?void 0:d.total)>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full px-1.5",children:d.total})]}),e.jsx(Ke,{className:"w-8 h-8 text-white cursor-pointer",onClick:()=>{r("/settings")},title:s("profile.titles.settings")}),e.jsxs("div",{className:"relative",children:[e.jsx(et,{className:"w-7 h-7 text-white cursor-pointer",onClick:()=>r(`/profile/${t.id}/notifications`),title:s("profile.titles.notifications")}),!p&&se>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full px-1.5",children:se})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center sm:justify-end mt-6",children:[!a&&e.jsxs("div",{className:"w-full mx-auto md:mx-0 md:!mr-auto mb-3 flex flex-col items-start gap-6 mt-3",children:[e.jsxs("div",{className:"flex flex-col items-stretch w-full md:flex-row gap-3 md:gap-6",children:[!z&&e.jsxs("button",{title:i?i.status==="accepted"?s("connection.disconnect"):i.status==="pending"?s("connection.cancelRequest"):i.status==="blocked"?i.follower_profile_id===n.id?s("connection.unblock"):s("connection.blockedByOther"):"":s("connection.connect"),onClick:()=>{if(!i)return ae();if(i.status==="pending"||i.status==="accepted")return U();if(i.status==="blocked"&&i.follower_profile_id===n.id)return ne()},className:`w-full sm:w-auto inline-flex items-center justify-center gap-1 px-3.5 py-1.5 rounded-full text-sm font-semibold whitespace-nowrap transition
                    ${i?i.status==="accepted"?"bg-emerald-700 text-white hover:bg-emerald-800":i.status==="pending"?"bg-yellow-600 text-white hover:bg-yellow-700":i.status==="blocked"&&i.follower_profile_id===n.id?"bg-red-700 text-white hover:bg-red-800":i.status==="blocked"&&i.follower_profile_id===t.id?"bg-gray-600 text-gray-200 cursor-not-allowed":"bg-gray-700 text-white":"bg-sky-700 text-white hover:bg-sky-800"}
                    ${(i==null?void 0:i.status)==="blocked"&&i.follower_profile_id===t.id?"pointer-events-none":"cursor-pointer"}
                  `,disabled:(i==null?void 0:i.status)==="blocked"&&i.follower_profile_id===t.id,children:[ke(i==null?void 0:i.status),i?i.status==="accepted"?s("connection.accepted"):i.status==="pending"?s("connection.pending"):i.status==="blocked"&&i.follower_profile_id===n.id?s("connection.blocked"):i.status==="blocked"&&i.follower_profile_id===t.id?s("connection.blockedByOther"):"":s("connection.connect")]}),e.jsx("div",{children:e.jsx(pt,{otherProfile:t})})]}),ve&&e.jsx("p",{className:"text-xs mx-auto sm:mx-0 sm:mr-auto text-gray-400",children:s("profile.lastSeen",{time:gs(t.last_seen)})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsx(W,{onClick:()=>r(`/profile/${t.id}`),children:s("profile.navigation.about")})}),e.jsx("div",{className:"sm:mb-4",children:e.jsx(W,{onClick:()=>r(`/profile/${t.id}/ads`),children:s("profile.navigation.ads")})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsx(W,{onClick:()=>r(`/profile/${t.id}/posts`),children:s("profile.navigation.posts")})}),e.jsx("div",{className:"sm:mb-4",children:e.jsx(W,{starBorder:!0,onClick:()=>r(`/profile/${t.id}/groups`),className:"!bg-amber-800 hover:!bg-amber-900",children:s("profile.navigation.groups")})})]})]})]})}function js({profileData:a}){const{t}=v("profile"),{privacyOthers:s}=Re(),{data:n={}}=s(a.id);function r(o){const c=new Date(o),d=new Date;let m=d.getFullYear()-c.getFullYear();const l=d.getMonth()-c.getMonth();return(l<0||l===0&&d.getDate()<c.getDate())&&m--,m}return e.jsx("div",{className:"flex flex-col items-center",children:e.jsxs("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-12 gap-y-4 text-lg text-gray-300",children:[a.firstname&&e.jsxs("li",{className:"flex items-center",children:[e.jsxs("span",{className:"font-semibold w-28 text-gray-500",children:[t("profile.data.firstname"),":"]}),e.jsx("span",{children:a.firstname})]}),a.lastname&&e.jsxs("li",{className:"flex items-center",children:[e.jsxs("span",{className:"font-semibold w-28 text-gray-500",children:[t("profile.data.lastname"),":"]}),e.jsx("span",{children:a.lastname})]}),a.country&&e.jsxs("li",{className:"flex items-center",children:[e.jsxs("span",{className:"font-semibold w-28 text-gray-500",children:[t("profile.data.country"),":"]}),e.jsx("span",{children:a.country})]}),a.state&&e.jsxs("li",{className:"flex items-center",children:[e.jsxs("span",{className:"font-semibold w-28 text-gray-500",children:[t("profile.data.state"),":"]}),e.jsx("span",{children:a.state})]}),a.neighborhood&&e.jsxs("li",{className:"flex items-center",children:[e.jsxs("span",{className:"font-semibold w-28 text-gray-500",children:[t("profile.data.neighborhood"),":"]}),e.jsx("span",{children:a.neighborhood})]}),a.gender&&e.jsxs("li",{className:"flex items-center",children:[e.jsxs("span",{className:"font-semibold w-28 text-gray-500",children:[t("profile.data.gender"),":"]}),e.jsx("span",{children:t(`edit.placeholders.genderOptions.${a.gender.toLowerCase()}`)})]}),a.birthdate&&e.jsxs("li",{className:"flex items-center",children:[e.jsxs("span",{className:"font-semibold w-28 text-gray-500",children:[t("profile.data.age"),":"]}),e.jsxs("span",{children:[r(a.birthdate)," ",t("profile.data.years")]})]}),n.show_email&&a.email&&e.jsxs("li",{className:"flex items-center",children:[e.jsxs("span",{className:"font-semibold w-28 text-gray-500",children:[t("profile.data.email"),":"]}),e.jsx("span",{children:a.email})]})]})})}const bs=({role:a,data:t})=>{const{t:s}=v("music");return!t||t.length===0?e.jsx("p",{className:"text-gray-400 mt-4 italic text-center",children:s("roles.noData")}):e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-xl font-bold mb-4 text-sky-200 text-center",children:s("roles.detailsTitle",{role:s(`roles.${a.role.toLowerCase()}`)})}),e.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(n=>e.jsxs("li",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4 shadow-sm",children:[a.role==="Instrumentalist"&&e.jsxs(e.Fragment,{children:[e.jsx(w,{label:s("fields.instrument"),value:n.instrument}),e.jsx(w,{label:s("fields.yearsOfExperience"),value:n.years_of_experience}),e.jsx(w,{label:s("fields.level"),value:s(`levels.${n.level.toLowerCase()}`)})]}),a.role==="Singer"&&e.jsxs(e.Fragment,{children:[e.jsx(w,{label:s("fields.voiceType"),value:n.voice_type}),e.jsx(w,{label:s("fields.musicGenre"),value:n.music_genre}),e.jsx(w,{label:s("fields.level"),value:s(`levels.${n.level.toLowerCase()}`)})]}),a.role==="DJ"&&e.jsxs(e.Fragment,{children:[e.jsx(w,{label:s("fields.eventsPlayed"),value:n.events_played}),e.jsx(w,{label:s("fields.preferredGenres"),value:n.preferred_genres}),e.jsx(w,{label:s("fields.level"),value:s(`levels.${n.level.toLowerCase()}`)})]}),a.role==="Producer"&&e.jsxs(e.Fragment,{children:[e.jsx(w,{label:s("fields.productionType"),value:n.production_type}),e.jsx(w,{label:s("fields.yearsOfExperience"),value:n.years_of_experience}),e.jsx(w,{label:s("fields.level"),value:s(`levels.${n.level.toLowerCase()}`)})]}),a.role==="Composer"&&e.jsxs(e.Fragment,{children:[e.jsx(w,{label:s("fields.compositionStyle"),value:n.composition_style}),e.jsx(w,{label:s("fields.yearsOfExperience"),value:n.years_of_experience}),e.jsx(w,{label:s("fields.level"),value:s(`levels.${n.level.toLowerCase()}`)})]})]},n.id))})]})},w=({label:a,value:t})=>e.jsxs("p",{className:"text-sm text-gray-300 mb-1",children:[e.jsxs("span",{className:"font-semibold text-gray-200",children:[a,": "]}),"  ",t||"N/A"]});function ys({role:a,expandedRole:t,handleRoleClick:s}){const{t:n}=v("music"),r=t===a.id;return e.jsxs("div",{className:`p-5 rounded-xl shadow-md border transition-all duration-300 cursor-pointer text-white text-center select-none
        ${r?"border-sky-500 bg-sky-800/30":"border-gray-700 bg-gray-800 hover:border-sky-500 hover:bg-gray-700/60"}
      `,onClick:()=>s(a),children:[e.jsx("span",{className:"text-lg font-semibold tracking-wide",children:n(`roles.${a.role.toLowerCase()}`)}),e.jsx("div",{className:"mt-2 flex justify-center",children:e.jsx(rt,{className:`text-gray-400 transition-transform duration-200 ${r?"rotate-180":""}`})})]})}const ws=({profileId:a})=>{const{user:t}=P(),{t:s}=v("music"),{userMediaLinks:n}=ze(),{data:r=[]}=n(a),o=pe(),c=t.id===a,d=l=>{const h=l.match(/spotify\.com\/(track|playlist|album)\/([a-zA-Z0-9]+)/);if(!h)return null;const[g,y,u]=h;return`https://open.spotify.com/embed/${y}/${u}`},m=r.slice(0,2);return e.jsxs("section",{className:"mb-10",children:[c&&e.jsx(ee,{label:s("media.actions.add"),to:"/media/create"}),e.jsx("ul",{className:"space-y-4 text-center",children:m.map(l=>e.jsxs("li",{className:"shadow-sm p-4 rounded-lg bg-gradient-to-l to-gray-800",children:[e.jsx("p",{className:"font-medium mb-2 text-center",children:l.title}),l.media_type==="spotify"?e.jsx("iframe",{src:d(l.url),width:"100%",height:"80",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",className:"rounded w-full max-w-full"}):e.jsx("div",{className:"aspect-video bg-black rounded overflow-hidden",children:e.jsx(xt,{url:l.url,controls:!0,width:"100%",height:"100%",style:{maxWidth:"100%"}})})]},l.id))}),r.length>2&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx(W,{onClick:()=>o(`/media/${a}`),className:"!text-emerald-600 !text-2xl hover:!text-emerald-700 !bg-transparent",children:s("media.actions.seeMore")})})]})},vs=({profileId:a})=>{var T,A,D,C;const{t}=v("music"),{user:s}=P(),[n,r]=_.useState(),{fetchRoles:o}=Ae(),{data:c,isLoading:d,error:m}=o(a),{fetchInstruments:l}=Ue(),{data:h}=l(n),{fetchSinger:g}=Ee(),{data:y}=g(n),{fetchComposer:u}=Be(),{data:f}=u(n),{fetchProducer:p}=Ye(),{data:j}=p(n),{fetchDj:M}=He(),{data:S}=M(n),[N,i]=_.useState(null),z=s.id===a,X=x=>{N===x.id?i(null):(i(x.id),(x.role==="Instrumentalist"||x.role==="Singer"||x.role==="DJ"||x.role==="Producer"||x.role==="Composer")&&r(x.id))};return d?e.jsx(V,{}):m?e.jsx(R,{error:m.message||t("errors.fetch")}):e.jsxs("div",{className:"bg-gray-900 p-6 rounded-lg shadow-md w-full",children:[e.jsx("div",{className:"flex items-center justify-center font-semibold gap-3 mb-6",children:e.jsx(ye,{text:t("roles.title"),speed:3,className:"text-3xl tracking-wide"})}),e.jsx(ws,{profileId:a}),z&&e.jsx(ee,{label:t("roles.addRole"),to:"/settings/music"}),c.length===0?e.jsx("p",{className:"text-gray-400 text-center",children:t("roles.none")}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(x=>e.jsx(ys,{role:x,expandedRole:N,handleRoleClick:X},x.id))}),N&&e.jsxs("div",{className:"mt-6",children:[e.jsx(bs,{role:c.find(x=>x.id===N),data:((T=c.find(x=>x.id===N))==null?void 0:T.role)==="Instrumentalist"?h:((A=c.find(x=>x.id===N))==null?void 0:A.role)==="Singer"?y:((D=c.find(x=>x.id===N))==null?void 0:D.role)==="DJ"?S:((C=c.find(x=>x.id===N))==null?void 0:C.role)==="Producer"?j:f}),e.jsxs("div",{className:"flex justify-center mt-4 cursor-pointer",onClick:()=>i(null),children:[e.jsx(it,{className:"text-gray-500"})," "]})]})]})]})};function Ns(){return e.jsxs("div",{className:"relative flex flex-col w-35 h-65 bg-gray-100 rounded-lg shadow-sm overflow-hidden",children:[e.jsx($,{height:160,width:"100%"}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[e.jsx($,{circle:!0,width:24,height:24}),e.jsx($,{circle:!0,width:24,height:24})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 grow justify-end",children:[e.jsx($,{height:18,width:"70%"}),e.jsx($,{height:14,width:"50%"})]})]})}const Cs=({profileId:a,connection:t,ownProfile:s})=>{const{t:n}=v("profile"),{user:r}=P(),o=r==null?void 0:r.id,{fetchProfile:c}=H(),{updateConnection:d,deleteConnection:m}=Q(),{data:l,isLoading:h,error:g}=c(a),y=t.status==="pending"&&t.following_profile_id===o;t.status==="accepted"&&(t.following_profile_id===o||t.follower_profile_id);const u=o===t.follower_profile_id||o===t.following_profile_id,[f,p]=_.useState(!1);if(h)return e.jsx(Ns,{});if(g)return e.jsx(R,{error:g.message||"Error loading profile."});if(!l)return null;const j=async()=>{if(!t.id)return console.warn("Connection ID is missing");await d({connection:t,updatedConnection:{status:"accepted"}})},M=async()=>{if(!t.id)return console.warn("Connection ID is missing");await m(t)};return e.jsxs("div",{className:"relative flex flex-col w-35 h-65 text-gray-800 bg-gray-100 items-center gap-2 border rounded-lg shadow-sm",children:[t.id&&e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 z-10",children:[y&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:j,className:"text-green-600 hover:text-green-800",children:e.jsx(ot,{})}),e.jsx("button",{onClick:M,className:"text-red-600 hover:text-red-800",children:e.jsx(lt,{})})]}),u&&!y&&s&&e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>p(S=>!S),className:"text-gray-950 hover:text-orange-700 cursor-pointer","aria-label":n("connection.connectionCard.options"),children:e.jsx(ct,{title:n("connection.connectionCard.options")})}),f&&e.jsx("div",{className:"absolute right-0 mt-2 w-32 bg-gray-900 border rounded shadow-lg z-50",children:e.jsx("button",{onClick:M,className:"block w-full cursor-pointer text-center px-4 py-2 text-red-500 hover:text-red-600",children:t.status==="accepted"?n("connection.connectionCard.disconnect"):n("connection.connectionCard.delete")})})]})]}),e.jsx(K,{to:`/profile/${a}`,children:e.jsx("img",{src:l.avatar_url||"/default-avatar.png",alt:`${l.username}'s avatar`,className:"w-60 h-40 object-cover rounded-t-lg"})}),e.jsxs("div",{className:"text-center px-2 pb-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:l.username}),l.state||l.country?e.jsx("p",{className:"text-gray-400 text-sm",children:[l.state,l.country].filter(Boolean).join(", ")}):null]})]})};function J({checkStatus:a,profileId:t,maxVisible:s}){const{user:n}=P(),{t:r}=v("ui",{keyPrefix:"connections"}),{userConnections:o}=Q(),{data:c}=o(t),d=t===n.id;if(!["accepted","pending","blocked"].includes(a)||!c)return null;const m=c.filter(u=>a==="accepted"?u.status==="accepted":a==="blocked"?u.status==="blocked":a==="pending"?u.status==="pending"&&u.following_profile_id===t:!1),l=u=>u.following_profile_id===t?u.follower_profile_id:u.following_profile_id,h=a==="accepted"?r("title"):null,g=a==="accepted",y=s?m.slice(0,s):m;return e.jsxs("div",{className:"max-w-4xl mx-auto w-full bg-gradient-to-l from-gray-900 py-4 flex flex-wrap justify-center rounded-lg gap-4",children:[e.jsx("div",{className:"w-full flex items-center justify-between px-4 mb-2",children:e.jsxs("h2",{className:"text-xl font-bold text-white",children:[h,g&&e.jsxs("span",{className:"ml-2 text-sky-400 text-lg font-semibold",children:["(",m.length,")"]})]})}),y.length>0?y.map(u=>e.jsx(Cs,{connection:u,profileId:l(u),ownProfile:d},u.id)):e.jsx("div",{className:"text-gray-400",children:r(a==="pending"?"noPendingConnections":"noConnections")}),s&&m.length>s&&e.jsx(K,{to:`/profile/${t}/connections`,className:"w-full text-center text-sky-400 hover:underline mt-2 block",children:r("viewAll")})]})}function ks({profileId:a}){const{t}=v("ads"),{user:s}=P(),{fetchInfiniteByUser:n}=Ve(),{data:r,fetchNextPage:o,hasNextPage:c,isFetchingNextPage:d,isLoading:m,error:l}=n(a),h=a===s.id;if(m)return e.jsx(V,{});if(l)return e.jsx(R,{error:l.message});const g=r?r.pages.flat():[];return e.jsxs("div",{className:"mx-auto text-center w-full",children:[e.jsx("h2",{className:"text-center font-semibold mb-4",children:e.jsx(ye,{text:t("profileAds.title"),speed:3,className:"text-3xl tracking-wide"})}),h&&e.jsx(ee,{label:t("adsPage.buttons.createAd"),to:"/ads/new",showLabelOnMobile:!0}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:g.length>0?g.map(y=>e.jsx(gt,{ad:y,publisherId:a},y.id)):e.jsx("p",{className:"col-span-full text-center text-gray-400",children:t("profileAds.empty")})}),c&&e.jsx(Button,{className:"!w-1/2 md:!w-1/3 !font-bold mt-4 !mx-auto hover:!text-sky-600",onClick:()=>o(),disabled:d,children:t(d?"profileAds.buttons.loading":"profileAds.buttons.loadMore")})]})}function _s({profileId:a}){const{t}=v("profile",{keyPrefix:"notifications"}),{userNotifications:s,notificationsRealtime:n,updateNotification:r}=je(),{data:o=[],isLoading:c,error:d}=s(a);n(a);const m=o.map(f=>f.from_user_id).filter(Boolean).sort(),{profilesMap:l}=H(),{data:h={}}=l(m),g=f=>{var p,j;return((p=h[f])==null?void 0:p.username)||((j=h[f])==null?void 0:j.firstname)||"Someone"},y=async f=>{f.is_read||await r({...f,is_read:!0})};if(c)return e.jsx(V,{});if(d)return e.jsx(R,{error:d.message});if(o.length===0)return e.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:t("noNotifications")});const u=f=>t(f.type,{user:g(f.from_user_id)});return e.jsx("ul",{className:`divide-y max-w-4xl mx-auto divide-gray-700
                 p-4 bg-gradient-to-l to-gray-900 rounded-lg shadow-md`,children:o.map(f=>e.jsxs("li",{onClick:()=>y(f),className:`py-2 cursor-pointer hover:bg-gray-800 transition
                      ${f.is_read?"text-gray-400":"text-white font-semibold"}`,children:["• ",u(f)]},f.id))})}function Ps({profileId:a}){const{t}=v("profile"),s="cursor-pointer px-4 py-2 text-sm sm:text-base font-semibold rounded-lg transition-all",n=`${s} border-b-2 border-sky-600 text-white shadow-lg`,r=`${s} text-gray-300 hover:text-sky-600`;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gradient-to-b from-gray-800 to-gray-950 rounded-t-lg",children:e.jsxs("nav",{className:"flex justify-center space-x-8 py-3",children:[e.jsx(me,{end:!0,to:`/profile/${a}/notifications`,className:({isActive:o})=>o?n:r,children:t("profile.internNav.notifications")}),e.jsx(me,{to:`/profile/${a}/notifications/pending`,className:({isActive:o})=>o?n:r,children:t("profile.internNav.pending")})]})}),e.jsxs(be,{children:[e.jsx(k,{index:!0,element:e.jsx(_s,{profileId:a})}),e.jsx(k,{path:"pending",element:e.jsx(J,{profileId:a,checkStatus:"pending"})})]})]})}function Vs(){const{t:a}=v("profileGroup",{keyPrefix:"userGroups"}),{identifier:t}=Xe(),{user:s,loading:n}=P(),{fetchProfile:r}=H(),{data:o,isLoading:c,error:d}=r(t);if(n||c)return e.jsx(V,{});if(d)return e.jsx(R,{error:d.message});if(!o)return null;const m=s.id===t,l=()=>e.jsxs(e.Fragment,{children:[e.jsx(js,{profileData:o}),e.jsx(vs,{profileId:o.id}),e.jsx(J,{profileId:o.id,checkStatus:"accepted",maxVisible:4})]}),h=()=>e.jsx(ft,{profileId:o.id,isOwnProfile:m}),g=()=>e.jsx(ht,{}),y=()=>e.jsx("p",{className:"text-center text-gray-400",children:a("userGroupsComing")}),u=()=>e.jsx(ks,{profileId:o.id});return e.jsx("div",{className:"flex flex-col min-h-screen text-white",children:e.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[e.jsx(ps,{profileData:o,isOwnProfile:m}),e.jsxs(be,{children:[e.jsx(k,{index:!0,element:e.jsx(l,{})}),e.jsx(k,{path:"posts",element:e.jsx(h,{})}),e.jsx(k,{path:"connections",element:e.jsx(J,{profileId:o.id,checkStatus:"accepted"})}),m&&e.jsx(k,{path:"create",element:e.jsx(g,{})}),e.jsx(k,{path:"groups",element:e.jsx(y,{})}),e.jsx(k,{path:"ads",element:e.jsx(u,{})}),m&&e.jsx(k,{path:"notifications/*",element:e.jsx(Ps,{profileId:o.id})})]})]})})}export{Vs as default};
