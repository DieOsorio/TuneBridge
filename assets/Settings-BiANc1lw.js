import{j as e,B as z,P as R,u as W}from"./mui-O-_7DbpJ.js";import{P as X}from"./ProfileSettings-BXpqABBB.js";import{r as w}from"./calendar-BpW-aEGs.js";import{m as Y,n as Z,f as ee,o as se,p as te,F as ae,q as le,r as re,s as ne,B as oe,t as ie,u as ce,v as de}from"./icons-D__VgVoR.js";import{u as j,j as me,k as ue,c as O,S as F,I as G,l as ge,m as xe,n as pe,o as he,p as be,q as J,i as ve,E as fe,B as E,b as K,a as H,r as U,t as ye,v as je,R as we,g as k,w as Ne}from"./index-C9aPbYQh.js";import"./reactPlayer-D7fnNHFf.js";import"./lottie-DTlWc_fK.js";import"./gsap-Brfk6Bdo.js";import"./filepond-DcLflJls.js";const Q=new Set(["instrument","composition_style","production_type","preferred_genres","music_genre"]),A=({role:s,profileId:l,details:t,refetch:o,addDetails:g,updateDetails:d,deleteDetails:x,fields:i,title:c})=>{const{t:n}=j("common"),[a,u]=w.useState(null),[N,y]=w.useState(""),{upsertHashtag:S}=me(),{upsertProfileHashtag:C}=ue(),{register:L,handleSubmit:q,setError:_,clearErrors:v,reset:f,formState:{errors:P}}=O({defaultValues:i.reduce((r,m)=>({...r,[m.name]:m.default||""}),{})});w.useEffect(()=>{f(i.reduce((r,m)=>({...r,[m.name]:m.default||""}),{}))},[t,i,f]);const T=async r=>{try{if(v("root"),!i.every(h=>{var b;return!h.required||((b=r[h.name])==null?void 0:b.trim())})){_("root",{message:n("form.validation.allRequired")});return}await g({...r,role_id:s.id,profile_id:l});const I=[];for(const h of i)if(Q.has(h.name)&&r[h.name]){const b=r[h.name].split(",").map(p=>p.trim()).filter(Boolean);I.push(...b.map(p=>`#${p.replace(/\s+/g,"")}`))}try{const h=await Promise.all(I.map(async b=>await S({name:b})));await Promise.all(h.map(async b=>{await C({profile_id:l,hashtag_id:b.id})}))}catch(h){console.error("Error while upserting profile hashtags:",h.message)}f(),y(n("messages.success.add",{item:c})),setTimeout(()=>y(""),3e3),o()}catch(m){console.error(n("messages.error.add",{item:c.toLowerCase()}),m),_("root",{message:n("messages.error.add",{item:c.toLowerCase()})})}},M=async r=>{const m={...r,...(a==null?void 0:a[r.id])||{}};if(!i.every(h=>{var b;return!h.required||((b=m[h.name])==null?void 0:b.toString().trim())})){_("root",{message:n("form.validation.allRequired")});return}try{await d(r.id,{...r,...m});const h=[];for(const p of i)if(Q.has(p.name)&&m[p.name]){const V=m[p.name].split(",").map(B=>B.trim()).filter(Boolean);h.push(...V.map(B=>`#${B.replace(/\s+/g,"")}`))}const b=await Promise.all(h.map(async p=>await S({name:p})));await Promise.all(b.map(async p=>{await C({profile_id:l,hashtag_id:p.id})})),y(n("messages.success.update",{item:c})),setTimeout(()=>y(""),3e3),u(p=>{const{[r.id]:V,...B}=p||{};return B}),o()}catch(h){console.error(`Error updating ${c.toLowerCase()}:`,h),_("root",{message:n("messages.error.update",{title:c.toLowerCase()})})}},$=async r=>{console.log(`Deleting ${c.toLowerCase()} with ID:`,r);try{await x(r),y(n("messages.success.delete",{item:c})),setTimeout(()=>y(""),3e3),o()}catch(m){console.error(`Error deleting ${c.toLowerCase()}:`,m),_("root",{message:n("messages.error.delete",{item:c.toLowerCase()})})}};return e.jsxs("div",{className:"text-gray-900",children:[e.jsx("h4",{className:"text-xl text-gray-200 font-semibold mb-4",children:c}),N&&e.jsx("p",{className:"text-green-500 mb-2",children:N}),P.root&&e.jsx("p",{className:"text-red-500 mb-2",children:P.root.message}),e.jsx("ul",{className:"space-y-4",children:t.map(r=>e.jsxs("li",{className:"bg-gray-100 p-4 rounded-2xl shadow-md border border-white flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsx("div",{className:"flex flex-col gap-2 w-full sm:w-auto",children:i.map(m=>{var I,h;return e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"font-medium text-gray-700",children:[m.label,":"]}),m.type==="select"?e.jsxs("select",{value:((I=a==null?void 0:a[r.id])==null?void 0:I[m.name])??r[m.name],onChange:b=>u(p=>({...p,[r.id]:{...p==null?void 0:p[r.id],[m.name]:b.target.value}})),className:"ml-2 p-2 border border-gray-300 rounded-md bg-white",children:[e.jsx("option",{value:"",children:n("generic.chooseOne")}),m.options.map(b=>e.jsx("option",{value:b.value,children:b.label},b.value))]}):e.jsx("input",{type:m.type||"text",value:((h=a==null?void 0:a[r.id])==null?void 0:h[m.name])??r[m.name],onChange:b=>u(p=>({...p,[r.id]:{...p==null?void 0:p[r.id],[m.name]:b.target.value}})),className:"ml-2 p-2 border border-gray-300 rounded-md"})]},m.name)})}),e.jsxs("div",{className:"flex gap-2 mx-auto",children:[e.jsxs(z,{onClick:()=>M(r),variant:"contained",className:"!text-white !bg-emerald-600 hover:!bg-emerald-700 !px-3 !rounded-xl flex gap-1 !text-sm",children:[e.jsx(Y,{size:15}),n("generic.save")]}),e.jsxs(z,{onClick:()=>$(r.id),color:"error",variant:"contained",className:"!text-white !px-3 !rounded-xl !text-sm flex gap-1",children:[e.jsx(Z,{size:17}),n("generic.delete")]})]})]},r.id))}),e.jsxs("form",{onSubmit:q(T),className:"mt-8 bg-gray-100 p-6 rounded-2xl shadow-inner border border-white",children:[e.jsx("h5",{className:"text-md font-medium mb-4 text-gray-700",children:n("addNew",{item:c.toLowerCase()})}),e.jsx("div",{className:"grid sm:grid-cols-2 gap-4",children:i.map(r=>{var m;return e.jsx("div",{children:r.type==="select"?e.jsx(F,{id:r.name,label:r.label,options:r.options,register:L,validation:{required:r.required?`${r.label} is required`:!1},error:P[r.name],className:"bg-white focus:bg-white",defaultOption:n("generic.chooseOne")}):e.jsx(G,{id:r.name,label:r.label,placeholder:r.placeholder,type:r.type||"text",register:L,validation:{required:r.required?`${r.label} is required`:!1},error:(m=P[r.name])==null?void 0:m.message,className:"bg-white"})},r.name)})}),e.jsx("div",{className:"mt-4 w-full flex justify-center",children:e.jsx(z,{type:"submit",variant:"contained",className:"!text-white !bg-emerald-600 hover:!bg-emerald-700 !w-1/2 !px-3 !rounded-xl flex gap-1 !text-sm",children:n("generic.add")})})]})]})},Se=({role:s,profileId:l})=>{const{t}=j("music"),{fetchInstruments:o,addInstrument:g,updateInstrument:d,deleteInstrument:x}=ge(),{data:i,refetch:c}=o(s.id),n=a=>({...a,years_of_experience:a.years_of_experience?parseInt(a.years_of_experience,10):null});return e.jsx(A,{role:s,profileId:l,details:i||[],refetch:c,addDetails:a=>g({details:n(a)}),updateDetails:(a,u)=>d({id:a,details:n(u)}),deleteDetails:a=>x({id:a}),title:t("roles.detailsTitle",{role:t("fields.instrument").toLowerCase()}),fields:[{name:"instrument",label:t("fields.instrument"),placeholder:t("placeholders.instrument"),required:!0},{name:"years_of_experience",label:t("fields.yearsOfExperience"),type:"number",placeholder:t("placeholders.yearsOfExperience")},{name:"level",label:t("fields.level"),type:"select",options:[{value:"Beginner",label:t("levels.beginner")},{value:"Intermediate",label:t("levels.intermediate")},{value:"Advanced",label:t("levels.advanced")},{value:"Expert",label:t("levels.expert")}]}]})},_e=({role:s,profileId:l})=>{const{t}=j("music"),{fetchSinger:o,addSinger:g,updateSinger:d,deleteSinger:x}=xe(),{data:i,refetch:c}=o(s.id),n=a=>{var u,N;return{...a,voice_type:((u=a.voice_type)==null?void 0:u.trim())||null,music_genre:((N=a.music_genre)==null?void 0:N.trim())||null}};return e.jsx(A,{role:s,profileId:l,details:i||[],refetch:c,addDetails:a=>g({details:n(a)}),updateDetails:(a,u)=>d({id:a,details:n(u)}),deleteDetails:a=>x({id:a}),title:t("roles.detailsTitle",{role:t("roles.singer").toLowerCase()}),fields:[{name:"voice_type",label:t("fields.voiceType"),placeholder:t("placeholders.voiceType"),required:!0},{name:"music_genre",label:t("fields.musicGenre"),placeholder:t("placeholders.musicGenre")},{name:"level",label:t("fields.level"),type:"select",options:[{value:"Beginner",label:t("levels.beginner")},{value:"Intermediate",label:t("levels.intermediate")},{value:"Advanced",label:t("levels.advanced")},{value:"Expert",label:t("levels.expert")}]}]})},Pe=({role:s,profileId:l})=>{const{t}=j("music"),{fetchDj:o,addDj:g,updateDj:d,deleteDj:x}=pe(),{data:i,refetch:c}=o(s.id),n=a=>{var u;return{...a,events_played:((u=a.events_played)==null?void 0:u.trim())||null}};return e.jsx(A,{role:s,profileId:l,details:i||[],refetch:c,addDetails:a=>g({details:n(a)}),updateDetails:(a,u)=>d({id:a,details:n(u)}),deleteDetails:a=>x({id:a}),title:t("roles.detailsTitle",{role:t("roles.dj").toLowerCase()}),fields:[{name:"events_played",label:t("fields.eventsPlayed"),placeholder:t("placeholders.eventsPlayed"),required:!0},{name:"preferred_genres",label:t("fields.preferredGenres"),placeholder:t("placeholders.preferredGenres")},{name:"level",label:t("fields.level"),type:"select",options:[{value:"Beginner",label:t("levels.beginner")},{value:"Intermediate",label:t("levels.intermediate")},{value:"Advanced",label:t("levels.advanced")},{value:"Expert",label:t("levels.expert")}]}]})},De=({role:s,profileId:l})=>{const{t}=j("music"),{fetchProducer:o,addProducer:g,updateProducer:d,deleteProducer:x}=he(),{data:i,refetch:c}=o(s.id),n=a=>({...a,years_of_experience:a.years_of_experience?parseInt(a.years_of_experience,10):null});return e.jsx(A,{role:s,profileId:l,details:i||[],refetch:c,addDetails:a=>g({details:n(a)}),updateDetails:(a,u)=>d({id:a,details:n(u)}),deleteDetails:a=>x({id:a}),title:t("roles.detailsTitle",{role:t("roles.producer").toLowerCase()}),fields:[{name:"production_type",label:t("fields.productionType"),placeholder:t("placeholders.productionType"),required:!0},{name:"years_of_experience",label:t("fields.yearsOfExperience"),type:"number",placeholder:t("placeholders.yearsOfExperience")},{name:"level",label:t("fields.level"),type:"select",options:[{value:"Beginner",label:t("levels.beginner")},{value:"Intermediate",label:t("levels.intermediate")},{value:"Advanced",label:t("levels.advanced")},{value:"Expert",label:t("levels.expert")}]}]})},Ee=({role:s,profileId:l})=>{const{t}=j("music"),{fetchComposer:o,addComposer:g,updateComposer:d,deleteComposer:x}=be(),{data:i,refetch:c}=o(s.id),n=a=>{var u;return{...a,years_of_experience:a.years_of_experience?parseInt(a.years_of_experience,10):null,composition_style:((u=a.composition_style)==null?void 0:u.trim())||null}};return e.jsx(A,{role:s,profileId:l,details:i||[],refetch:c,addDetails:a=>g({details:n(a)}),updateDetails:(a,u)=>d({id:a,details:n(u)}),deleteDetails:a=>x({id:a}),title:t("roles.detailsTitle",{role:t("roles.composer").toLowerCase()}),fields:[{name:"composition_style",label:t("fields.compositionStyle"),placeholder:t("placeholders.compositionStyle"),required:!0},{name:"years_of_experience",label:t("fields.yearsOfExperience"),type:"number",placeholder:t("placeholders.yearsOfExperience")},{name:"level",label:t("fields.level"),type:"select",options:[{value:"Beginner",label:t("levels.beginner")},{value:"Intermediate",label:t("levels.intermediate")},{value:"Advanced",label:t("levels.advanced")},{value:"Expert",label:t("levels.expert")}]}]})},Ce=({role:s,profileId:l})=>e.jsxs("div",{className:"mt-4",children:[s.role==="Instrumentalist"&&e.jsx(Se,{role:s,profileId:l}),s.role==="Singer"&&e.jsx(_e,{role:s,profileId:l}),s.role==="DJ"&&e.jsx(Pe,{role:s,profileId:l}),s.role==="Producer"&&e.jsx(De,{role:s,profileId:l}),s.role==="Composer"&&e.jsx(Ee,{role:s,profileId:l})]}),Re=({profileId:s})=>{const{t:l}=j("music"),{fetchRoles:t}=J(),{data:o=[],isLoading:g,isError:d}=t(s),{addRole:x,deleteRole:i}=J(),[c,n]=w.useState(null),{register:a,handleSubmit:u,watch:N,reset:y,setError:S,formState:{errors:C}}=O({defaultValues:{selectedRole:""}}),L=N("selectedRole"),q=v=>{const f=v.selectedRole;if(o.length>=6){S("selectedRole",{message:l("edit.errors.maxRoles")});return}if(!f){S("selectedRole",{message:l("edit.errors.empty")});return}if(o.some(T=>T.role.toLowerCase()===f.toLowerCase())){S("selectedRole",{message:l("edit.errors.duplicate")});return}x({profileId:s,roleName:f}).then(()=>{y()}).catch(()=>{S("selectedRole",{message:l("edit.errors.addError")})})},_=w.useCallback(v=>{n(f=>f===v?null:v)},[]);return g?e.jsx(ve,{}):d?e.jsx(fe,{error:d.message}):e.jsxs("div",{className:"p-6 bg-gradient-to-r from-gray-900 text-white rounded-b-2xl shadow-lg max-w-4xl mx-auto",children:[e.jsxs("form",{onSubmit:u(q),className:"mb-6 space-y-4",children:[e.jsx("h2",{className:"text-2xl text-yellow-600 font-semibold text-center mb-4",children:l("edit.addRoleTitle")}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 items-center",children:[e.jsx(F,{id:"selectedRole",label:l("edit.selectLabel"),register:a,validation:{required:l("edit.errors.requiredSelect")},error:C.selectedRole,defaultOption:l("edit.defaultOption"),options:[{value:"Composer",label:l("roles.composer")},{value:"DJ",label:l("roles.dj")},{value:"Instrumentalist",label:l("roles.instrumentalist")},{value:"Producer",label:l("roles.producer")},{value:"Singer",label:l("roles.singer")}]}),e.jsx("div",{className:`${L==="Other"?"md:col-span-2":""}`,children:e.jsx(E,{type:"submit",className:"w-full md:w-auto md:mt-3 !bg-emerald-600 hover:!bg-emerald-700",children:l("edit.addButton")})})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:l("edit.yourRoles")}),o.length===0?e.jsx("p",{className:"text-gray-300",children:l("edit.noRoles")}):e.jsx("div",{className:"space-y-4",children:o.map(v=>e.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 shadow-sm transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 cursor-pointer hover:bg-gray-700 rounded-t-lg",onClick:()=>_(v.id),children:[e.jsx("span",{className:"text-lg font-semibold text-white",children:l(`roles.${v.role.toLowerCase()}`)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:`w-5 h-5 text-gray-400 transition-transform ${c===v.id?"rotate-90":""}`}),e.jsx("button",{onClick:f=>{f.stopPropagation(),i({id:v.id,profileId:s})},className:"text-xs bg-red-500 text-white px-2 py-1 rounded-full hover:bg-red-600","aria-label":l("music.edit.deleteRoleAria",{role:v.role}),children:"✕"})]})]}),c===v.id&&e.jsx("div",{className:"bg-gray-900 border-t border-gray-700 px-4 py-4 rounded-b-lg",children:e.jsx(Ce,{role:v,profileId:s})})]},v.id))})]})]})},ke=[{value:"en",label:"English"},{value:"es",label:"Español"}],Le=[{value:"dark",label:"Dark"},{value:"light",label:"Light"}],qe=()=>{const{t:s}=j("settings",{keyPrefix:"account"}),{deleteProfile:l}=K(),{user:t,updatePassword:o,deleteMyAccount:g,signOut:d}=H(),{prefs:x,saveUiPreferences:i}=U(),{control:c,handleSubmit:n,formState:{isDirty:a,isSubmitting:u}}=O({defaultValues:{language:(x==null?void 0:x.lang)??"en",theme:(x==null?void 0:x.theme)??"dark"}}),[N,y]=w.useState(!1),[S,C]=w.useState(!1),L=async({language:r,theme:m})=>{await i({lang:r,theme:m}),C(!0),setTimeout(()=>C(!1),2500)},{register:q,handleSubmit:_,watch:v,reset:f,formState:{errors:P,isSubmitting:T}}=O(),M=async({newPassword:r})=>{await o(r),f()},$=async()=>{try{await l(t.id),await g(),await d()}catch(r){console.error(r)}finally{y(!1)}};return e.jsxs("div",{className:"flex flex-col gap-10 bg-gradient-to-l to-gray-900 light:bg-gradient-to-l light:to-gray-200 p-6 rounded-b-lg shadow-lg max-w-4xl mx-auto",children:[e.jsxs("section",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl text-yellow-600 font-semibold mb-4",children:s("title")}),e.jsxs("p",{className:"text-gray-200 light:text-gray-900 font-bold",children:["Email: ",e.jsx("span",{className:"text-gray-400 light:text-gray-600",children:t.email})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-semibold text-center mb-4",children:s("preferences.title")}),e.jsxs("form",{onSubmit:n(L),className:"max-w-lg mx-auto space-y-6",children:[e.jsx(F,{id:"language",label:s("labels.language"),control:c,options:ke,className:"bg-gray-800 text-white light:bg-gray-200 light:text-gray-900"}),e.jsx(F,{id:"theme",label:s("labels.theme"),control:c,options:Le,className:"bg-gray-800 text-white light:bg-gray-200 light:text-gray-900"}),e.jsx("div",{className:"sm:col-span-2 flex justify-center gap-4",children:e.jsx(E,{type:"submit",disabled:u,className:"!bg-emerald-600 hover:!bg-emerald-700",children:s(u?"buttons.saving":S?"buttons.saved":"buttons.save")})})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg text-center font-semibold mb-4",children:s("password.title")}),e.jsxs("form",{onSubmit:_(M),className:"max-w-lg mx-auto space-y-6",children:[e.jsx(G,{id:"newPassword",type:"password",label:s("labels.new"),placeholder:s("placeholders.new"),register:q,validation:{required:s("validations.required"),minLength:{value:6,message:s("validations.min")}},error:P.newPassword}),e.jsx(G,{id:"confirmPassword",type:"password",label:s("labels.confirm"),placeholder:s("placeholders.confirm"),register:q,validation:{validate:r=>r===v("newPassword")||s("validations.mismatch")},error:P.confirmPassword}),e.jsx("div",{className:"sm:col-span-2 flex justify-center gap-4",children:e.jsx(E,{type:"submit",disabled:T,className:"!bg-emerald-600 hover:!bg-emerald-700",children:s(T?"buttons.saving":"buttons.change")})})]})]}),e.jsxs("section",{className:"border-t sm:w-lg mx-auto text-center border-gray-700 pt-10",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-400 mb-4",children:s("danger.title")}),e.jsx(E,{className:"!bg-red-700 hover:!bg-red-800",onClick:()=>y(!0),children:s("buttons.delete")})]}),e.jsx(ye,{isOpen:N,title:s("danger.title"),message:s("danger.confirm"),onConfirm:$,onCancel:()=>y(!1),confirmLabel:s("danger.yesDelete"),cancelLabel:s("danger.cancel"),color:"error"})]})},D=({id:s,label:l,register:t,validation:o={},error:g,className:d="",classForLabel:x="",...i})=>{const c=t?t(s,o):i;return e.jsxs("div",{className:`mb-4 flex bg-gray-900 p-4 rounded-lg items-center justify-between ${d}`,children:[l&&e.jsx("label",{htmlFor:s,className:`text-sm font-bold text-gray-200 select-none ${x}`,children:l}),e.jsxs("label",{htmlFor:s,className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{id:s,type:"checkbox",className:"sr-only peer",...c}),e.jsx("span",{className:`w-10 h-6 rounded-full bg-gray-500
                     transition-colors duration-200
                     peer-checked:bg-emerald-600
                     peer-focus:ring-2 peer-focus:ring-emerald-400/50`}),e.jsx("span",{className:`absolute left-0.5 top-0.5 w-5 h-5 rounded-full bg-white
                     transition-transform duration-200
                     peer-checked:translate-x-4`})]}),g&&e.jsx("p",{className:"text-red-500 text-sm mt-1 w-full",children:g.message||g})]})};D.propTypes={id:R.string.isRequired,label:R.string,register:R.func,validation:R.object,error:R.any,className:R.string,classForLabel:R.string};const Te=()=>{const{t:s}=j("settings",{keyPrefix:"privacy"}),{privacyPrefs:l,savePrivacySettings:t}=U(),{register:o,handleSubmit:g,reset:d,formState:{isDirty:x,isSubmitting:i}}=O({defaultValues:{show_email:!1,show_last_seen:!1,allow_messages:"all"}}),[c,n]=w.useState(!1);w.useEffect(()=>{l&&d(l)},[l,d]);const a=async u=>{await t(u),n(!0),setTimeout(()=>n(!1),2500)};return e.jsxs("section",{className:"flex flex-col gap-10 bg-gradient-to-l to-gray-900 p-6 rounded-b-lg shadow-lg max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-2xl text-yellow-600 font-semibold mb-6 text-center",children:s("title")}),e.jsx(D,{id:"show_email",label:s("toggles.showEmail"),register:o}),e.jsx(D,{id:"show_last_seen",label:s("toggles.showLastSeen"),register:o}),e.jsx(F,{id:"allow_messages",label:s("allowMessages.label"),options:[{value:"all",label:s("allowMessages.options.all")},{value:"connections_only",label:s("allowMessages.options.connections")},{value:"none",label:s("allowMessages.options.none")}],register:o}),e.jsx("div",{className:"pt-4 flex justify-center",children:e.jsx(E,{onClick:g(a),disabled:!x||i,className:"!bg-emerald-600 hover:!bg-emerald-700",children:s(i?"buttons.saving":c?"buttons.saved":"buttons.save")})})]})},Ie=()=>{const{t:s}=j("settings",{keyPrefix:"notifications"}),{notifPrefs:l,saveNotificationPrefs:t}=U(),{register:o,handleSubmit:g,reset:d,formState:{isDirty:x,isSubmitting:i}}=O({defaultValues:{likes:!0,comments:!0,connections:!0,groups:!0,matches:!0}}),[c,n]=w.useState(!1);w.useEffect(()=>{l&&d(l)},[l,d]);const a=async u=>{await t(u),n(!0),setTimeout(()=>n(!1),2500)};return e.jsxs("form",{onSubmit:g(a),className:"flex flex-col gap-10 bg-gradient-to-l to-gray-900 p-6 rounded-b-lg shadow-lg max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-2xl text-yellow-600 font-semibold mb-6 text-center",children:s("title")}),e.jsx(D,{id:"likes",label:s("toggles.likes"),register:o}),e.jsx(D,{id:"comments",label:s("toggles.comments"),register:o}),e.jsx(D,{id:"connections",label:s("toggles.connections"),register:o}),e.jsx(D,{id:"groups",label:s("toggles.groups"),register:o}),e.jsx(D,{id:"matches",label:s("toggles.matches"),register:o}),e.jsx("div",{className:"pt-4 flex justify-center",children:e.jsx(E,{type:"submit",disabled:!x||i,className:"!bg-emerald-600 hover:!bg-emerald-700",children:s(i?"buttons.saving":c?"buttons.saved":"buttons.save")})})]})},Oe={google:{icon:e.jsx(te,{className:"text-red-500"}),color:"!bg-red-600 hover:!bg-red-700"},github:{icon:e.jsx(se,{className:"text-white"}),color:"!bg-gray-800 hover:!bg-gray-900"}},Be=()=>{const{t:s}=j("settings",{keyPrefix:"providers"}),{user:l,linkProvider:t,unlinkProvider:o,loading:g}=H(),d=(l==null?void 0:l.identities)??[],x=i=>d.some(c=>c.provider===i);return e.jsxs("section",{className:"flex flex-col gap-10 bg-gradient-to-l to-gray-900 p-6 rounded-b-lg shadow-lg max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-2xl text-yellow-600 font-semibold mb-4 text-center",children:s("title")}),Object.entries(Oe).map(([i,c])=>{const n=d.find(a=>a.provider===i);return e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-700 pb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[c.icon,e.jsx("span",{className:"font-medium capitalize",children:i})]}),x(i)?e.jsx(E,{className:"!bg-red-700 hover:!bg-red-800",disabled:g,onClick:()=>o(n.id),children:s("buttons.disconnect")}):e.jsx(E,{className:c.color,disabled:g,onClick:()=>t(i),children:s("buttons.connect")})]},i)})]})},Je=()=>{const{user:s}=H(),{fetchProfile:l}=K(),{data:t}=l(s.id);W("(min-width:760px)");const{t:o}=j("ui",{keyPrefix:"sidebar"}),g=[{to:"/settings/profile",label:o("profileSettings"),icon:d=>d?e.jsx("img",{src:t==null?void 0:t.avatar_url,alt:"Avatar",className:"w-5 h-5 rounded-full object-cover ring-2 ring-yellow-600"}):e.jsx("img",{src:t==null?void 0:t.avatar_url,alt:"Avatar",className:"w-5 h-5 rounded-full object-cover"})},{to:"/settings/account",label:o("accountSettings"),icon:d=>d?e.jsx(ae,{}):e.jsx(le,{})},{to:"/settings/privacy",label:o("privacySettings"),icon:d=>d?e.jsx(re,{}):e.jsx(ne,{})},{to:"/settings/notifications",label:o("notificationsSettings"),icon:d=>d?e.jsx(oe,{}):e.jsx(ie,{})},{to:"/settings/music",label:o("musicSettings"),icon:d=>d?e.jsx(ce,{}):e.jsx(de,{})}];return e.jsxs("div",{className:"settings-layout flex min-h-screen bg-gray-950 text-white",children:[e.jsx(je,{avatarUrl:t==null?void 0:t.avatar_url,options:g}),e.jsx("div",{className:"settings-content flex-grow p-6 overflow-auto max-w-4xl ml-auto md:!mx-auto",children:e.jsxs(we,{children:[e.jsx(k,{path:"profile",element:e.jsx(X,{profile:t})}),e.jsx(k,{path:"music",element:e.jsx(Re,{profileId:s.id})}),e.jsx(k,{path:"account",element:e.jsx(qe,{})}),e.jsx(k,{path:"privacy",element:e.jsx(Te,{})}),e.jsx(k,{path:"notifications",element:e.jsx(Ie,{})}),e.jsx(k,{path:"apps",element:e.jsx(Be,{})}),e.jsx(k,{index:!0,element:e.jsx(Ne,{to:"profile",replace:!0})})]})})]})};export{Je as default};
