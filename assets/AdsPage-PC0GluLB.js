import{j as e,P as b}from"./mui-B-xP7mtj.js";import{r as m}from"./filepond-C4Y8_Bzv.js";import{u as A,C as N}from"./index.esm-B1e87uze.js";import{I as P}from"./Input-DJlOEIMy.js";import{A as k}from"./AdCard-0daIl4Rp.js";import{u as p,x as v,e as w}from"./index-iY5zQft3.js";import{S as C}from"./ShinyText-DgKPoZ1S.js";import{E as S}from"./ErrorMessage-B2u091H8.js";import{P as T}from"./PlusButton-B12TuVf8.js";import"./icons-r1d5ly4y.js";import"./ConfirmDialog-DxIiB_6a.js";import"./reactPlayer-xbeEqQf7.js";import"./lottie-Qij33HW6.js";const E=({filters:s,setFilters:r,placeholder:a})=>{const{control:t,watch:c}=A({defaultValues:{search:s.search}}),l=c("search");return m.useEffect(()=>{r(o=>({...o,search:l}))},[l,r]),e.jsx("form",{className:"p-4 rounded-lg shadow-md space-y-4",children:e.jsx(N,{control:t,name:"search",render:({field:o})=>e.jsx(P,{id:"search",placeholder:a||"Search ads...",className:"bg-gray-800",register:()=>o})})})},u=({ads:s})=>{const{t:r}=p("ads");return s.length?e.jsx("div",{className:"flex flex-col justify-center sm:flex-row flex-wrap gap-6",children:s.map(a=>e.jsx(k,{ad:a},a.id))}):e.jsx("p",{children:r("adsList.noAds")})};u.propTypes={ads:b.array.isRequired};const H=()=>{const{t:s}=p("ads"),[r,a]=m.useState("all"),[t,c]=m.useState({adType:null,lookingFor:[],genres:[],locations:null,search:""}),{fetchAllAds:l,searchMusicianAds:o}=v(),{data:x=[],isLoading:f,error:d}=t.search.trim()?o(t.search):l(),g=r==="all"?x:x.filter(n=>n.ad_type===r),i=n=>{const h="px-4 py-2 rounded-md border-b-2 text-sm text-gray-400 hover:text-gray-100 font-medium cursor-pointer transition-colors",j=r===n,y={all:"border-amber-700",looking:"border-sky-600",offering:"border-emerald-600"}[n];return`${h} ${j?`${y} !text-gray-100`:"text-gray-400"}`};return e.jsx("div",{className:"flex flex-col md:flex-row gap-4 p-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-center",children:e.jsx(C,{text:s("adsPage.title"),speed:3,className:"text-3xl font-semibold tracking-wide"})}),e.jsx("div",{className:"max-w-md mx-auto mt-4",children:e.jsx(E,{filters:t,setFilters:c,placeholder:s("adsPage.filters.placeholder")})}),e.jsxs("div",{className:"flex justify-center gap-6 my-4",children:[e.jsx("button",{className:i("all"),onClick:()=>a("all"),children:s("adsPage.nav.all")}),e.jsx("button",{className:i("looking"),onClick:()=>a("looking"),children:s("adsPage.nav.looking")}),e.jsx("button",{className:i("offering"),onClick:()=>a("offering"),children:s("adsPage.nav.offering")})]}),e.jsx(T,{label:s("adsPage.buttons.createAd"),to:"/ads/new"}),f&&e.jsx(w,{}),d&&e.jsx(S,{error:d.message}),!f&&!d&&e.jsx(u,{ads:g})]})})};export{H as default};
