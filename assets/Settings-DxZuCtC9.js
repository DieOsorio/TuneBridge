import{j as e,B as V,u as W}from"./mui-DM0ppf3M.js";import{s as X,t as Y,h as Z,u as ee,v as se,F as te,w as ae,x as le,y as re,B as ne,z as oe,C as ie,D as ce}from"./icons-70IfXVsJ.js";import{P as de}from"./ProfileSettings-BdUxTMkB.js";import{r as S}from"./calendar-BpW-aEGs.js";import{u as w,l as me,m as ue,c as T,n as ge,S as F,I as G,o as xe,p as pe,q as he,r as be,t as ve,v as fe,k as ye,E as je,B as E,b as K,a as H,w as U,x as we,P as J,y as Se,R as Ne,i as R,z as _e}from"./index-p55ST7R3.js";import"./reactPlayer-CjHFj7G4.js";import"./lottie-DTlWc_fK.js";import"./gsap-Brfk6Bdo.js";import"./filepond-DcLflJls.js";const Q=new Set(["instrument","composition_style","production_type","preferred_genres","music_genre"]),M=({role:t,profileId:l,details:s,refetch:d,addDetails:g,updateDetails:c,deleteDetails:x,fields:n,title:i})=>{const{t:o}=w("common"),[a,m]=S.useState(null),[_,y]=S.useState(""),{upsertHashtag:A}=me(),{upsertProfileHashtag:N}=ue(),{register:$,handleSubmit:I,setError:P,clearErrors:q,reset:b,control:j,formState:{errors:k}}=T({defaultValues:n.reduce((r,u)=>({...r,[u.name]:u.default||""}),{})});S.useEffect(()=>{b(n.reduce((r,u)=>({...r,[u.name]:u.default||""}),{}))},[s,n,b]);const B=async r=>{try{if(q("root"),!n.every(h=>{var v;return!h.required||((v=r[h.name])==null?void 0:v.trim())})){P("root",{message:o("form.validation.allRequired")});return}await g({...r,role_id:t.id,profile_id:String(l)});const D=[];for(const h of n)if(Q.has(h.name)&&r[h.name]){const v=r[h.name].split(",").map(p=>p.trim()).filter(Boolean);D.push(...v.map(p=>`#${p.replace(/\s+/g,"")}`))}try{const h=await Promise.all(D.map(async v=>await A({name:v})));await Promise.all(h.map(async v=>{await N({profile_id:String(l),hashtag_id:v.id})}))}catch(h){console.error("Error while upserting profile hashtags:",h.message)}b(),y(o("messages.success.add",{item:i.toLowerCase()})),setTimeout(()=>y(""),3e3),d()}catch(u){console.error(o("messages.error.add",{item:i.toLowerCase()}),u),P("root",{message:o("messages.error.add",{item:i.toLowerCase()})})}},z=async r=>{const u={...r,...(a==null?void 0:a[r.id])||{}};if(!n.every(h=>{var v;return!h.required||((v=u[h.name])==null?void 0:v.toString().trim())})){P("root",{message:o("form.validation.allRequired")});return}try{await c(r.id,{...r,...u});const h=[];for(const p of n)if(Q.has(p.name)&&u[p.name]){const f=u[p.name].split(",").map(O=>O.trim()).filter(Boolean);h.push(...f.map(O=>`#${O.replace(/\s+/g,"")}`))}const v=await Promise.all(h.map(async p=>await A({name:p})));await Promise.all(v.map(async p=>{await N({profile_id:String(l),hashtag_id:p.id})})),y(o("messages.success.update",{item:i.toLowerCase()})),setTimeout(()=>y(""),3e3),m(p=>{const{[r.id]:f,...O}=p||{};return O}),d()}catch(h){console.error(`Error updating ${i.toLowerCase()}:`,h),P("root",{message:o("messages.error.update",{item:i.toLowerCase()})})}},C=async r=>{console.log(`Deleting ${i.toLowerCase()} with ID:`,r);try{await x(r),y(o("messages.success.delete",{item:i.toLowerCase()})),setTimeout(()=>y(""),3e3),d()}catch(u){console.error(`Error deleting ${i.toLowerCase()}:`,u),P("root",{message:o("messages.error.delete",{item:i.toLowerCase()})})}};return e.jsxs("div",{className:"text-gray-900",children:[e.jsx("h4",{className:"text-xl text-gray-200 font-semibold mb-4",children:i}),_&&e.jsx("p",{className:"text-green-500 mb-2",children:_}),k.root&&e.jsx("p",{className:"text-red-500 mb-2",children:k.root.message}),e.jsx("ul",{className:"space-y-4",children:s.map(r=>e.jsxs("li",{className:"bg-gray-100 p-4 rounded-2xl shadow-md border border-white flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsx("div",{className:"flex flex-col gap-2 w-full sm:w-auto",children:n.map(u=>{var D,h,v;return e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"font-medium text-gray-700",children:[u.label,":"]}),u.type==="select"?e.jsxs("select",{value:((D=a==null?void 0:a[r.id])==null?void 0:D[u.name])??r[u.name],onChange:p=>m(f=>({...f,[r.id]:{...f==null?void 0:f[r.id],[u.name]:p.target.value}})),className:"ml-2 p-2 border border-gray-300 rounded-md bg-white",children:[e.jsx("option",{value:"",children:o("generic.chooseOne")}),(h=u.options)==null?void 0:h.map(p=>e.jsx("option",{value:p.value,children:p.label},p.value))]}):e.jsx("input",{type:u.type||"text",value:((v=a==null?void 0:a[r.id])==null?void 0:v[u.name])??r[u.name],onChange:p=>m(f=>({...f,[r.id]:{...f==null?void 0:f[r.id],[u.name]:p.target.value}})),className:"ml-2 p-2 border border-gray-300 rounded-md"})]},u.name)})}),e.jsxs("div",{className:"flex gap-2 mx-auto",children:[e.jsxs(V,{onClick:()=>z(r),variant:"contained",className:"!text-white !bg-emerald-600 hover:!bg-emerald-700 !px-3 !rounded-xl flex gap-1 !text-sm",children:[e.jsx(X,{size:15}),o("generic.save")]}),e.jsxs(V,{onClick:()=>C(r.id),color:"error",variant:"contained",className:"!text-white !px-3 !rounded-xl !text-sm flex gap-1",children:[e.jsx(Y,{size:17}),o("generic.delete")]})]})]},r.id))}),e.jsxs("form",{onSubmit:I(B),className:"mt-8 bg-gray-900 p-6 rounded-2xl shadow-inner border border-gray-600",children:[e.jsx("h5",{className:"text-lg font-medium mb-4 text-center text-white",children:o("addNew",{item:i.toLowerCase()})}),e.jsx("div",{className:"grid sm:grid-cols-2 gap-4",children:n.map(r=>{var u;return e.jsx("div",{children:r.type==="select"?e.jsx(ge,{name:r.name,control:j,rules:{required:r.required?`${r.label} is required`:!1},render:({field:D})=>e.jsx(F,{id:r.name,label:r.label,options:r.options||[],...D})}):e.jsx(G,{id:r.name,label:r.label,placeholder:r.placeholder,type:r.type||"text",error:(u=k[r.name])==null?void 0:u.message,register:$,validation:{required:r.required?`${r.label} is required`:!1}})},r.name)})}),e.jsx("div",{className:"mt-4 w-full flex justify-center",children:e.jsx(V,{type:"submit",variant:"contained",className:"!text-white !bg-emerald-600 hover:!bg-emerald-700 !w-1/2 !px-3 !rounded-xl flex gap-1 !text-sm",children:o("generic.add")})})]})]})},Pe=({role:t,profileId:l})=>{const{t:s}=w("music"),{fetchInstruments:d,addInstrument:g,updateInstrument:c,deleteInstrument:x}=xe(),{data:n,refetch:i}=d(t.id),o=a=>({...a,years_of_experience:a.years_of_experience?parseInt(a.years_of_experience,10):null});return e.jsx(M,{role:t,profileId:l,details:Array.isArray(n)?n:[],refetch:i,addDetails:a=>g({details:o(a)}),updateDetails:(a,m)=>c({id:String(a),details:o(m)}),deleteDetails:a=>x({id:String(a)}),title:s("roles.detailsTitle",{role:s("fields.instrument").toLowerCase()}),fields:[{name:"instrument",label:s("fields.instrument"),placeholder:s("placeholders.instrument"),required:!0},{name:"years_of_experience",label:s("fields.yearsOfExperience"),type:"number",placeholder:s("placeholders.yearsOfExperience")},{name:"level",label:s("fields.level"),type:"select",options:[{value:"Beginner",label:s("levels.beginner")},{value:"Intermediate",label:s("levels.intermediate")},{value:"Advanced",label:s("levels.advanced")},{value:"Expert",label:s("levels.expert")}]}]})},Ce=({role:t,profileId:l})=>{const{t:s}=w("music"),{fetchSinger:d,addSinger:g,updateSinger:c,deleteSinger:x}=pe(),{data:n,refetch:i}=d(String(t.id)),o=a=>{var m,_;return{...a,voice_type:((m=a.voice_type)==null?void 0:m.trim())||null,music_genre:((_=a.music_genre)==null?void 0:_.trim())||null}};return e.jsx(M,{role:t,profileId:l,details:Array.isArray(n)?n:[],refetch:i,addDetails:a=>g({details:{...o(a),role_id:String(t.id),profile_id:String(l),level:a.level??"Beginner"}}),updateDetails:(a,m)=>c({id:String(a),details:o(m)}),deleteDetails:a=>x({id:String(a),role_id:String(t.id)}),title:s("roles.detailsTitle",{role:s("roles.singer").toLowerCase()}),fields:[{name:"voice_type",label:s("fields.voiceType"),placeholder:s("placeholders.voiceType"),required:!0},{name:"music_genre",label:s("fields.musicGenre"),placeholder:s("placeholders.musicGenre")},{name:"level",label:s("fields.level"),type:"select",options:[{value:"Beginner",label:s("levels.beginner")},{value:"Intermediate",label:s("levels.intermediate")},{value:"Advanced",label:s("levels.advanced")},{value:"Expert",label:s("levels.expert")}]}]})},De=({role:t,profileId:l})=>{const{t:s}=w("music"),{fetchDj:d,addDj:g,updateDj:c,deleteDj:x}=he(),{data:n,refetch:i}=d(t.id),o=a=>{var m;return{...a,events_played:((m=a.events_played)==null?void 0:m.trim())||null}};return e.jsx(M,{role:t,profileId:l,details:Array.isArray(n)?n:[],refetch:i,addDetails:a=>g({details:o(a)}),updateDetails:(a,m)=>c({id:String(a),details:o(m)}),deleteDetails:a=>x({id:String(a)}),title:s("roles.detailsTitle",{role:s("roles.dj").toLowerCase()}),fields:[{name:"events_played",label:s("fields.eventsPlayed"),placeholder:s("placeholders.eventsPlayed"),required:!0},{name:"preferred_genres",label:s("fields.preferredGenres"),placeholder:s("placeholders.preferredGenres")},{name:"level",label:s("fields.level"),type:"select",options:[{value:"Beginner",label:s("levels.beginner")},{value:"Intermediate",label:s("levels.intermediate")},{value:"Advanced",label:s("levels.advanced")},{value:"Expert",label:s("levels.expert")}]}]})},Ee=({role:t,profileId:l})=>{const{t:s}=w("music"),{fetchProducers:d,addProducer:g,updateProducer:c,deleteProducer:x}=be(),{data:n,refetch:i}=d(t.id),o=a=>({...a,years_of_experience:a.years_of_experience?parseInt(a.years_of_experience,10):null});return e.jsx(M,{role:t,profileId:l,details:Array.isArray(n)?n:[],refetch:i,addDetails:a=>g({details:o(a)}),updateDetails:(a,m)=>c({id:String(a),details:o(m)}),deleteDetails:a=>x({id:String(a),roleId:t.id}),title:s("roles.detailsTitle",{role:s("roles.producer").toLowerCase()}),fields:[{name:"production_type",label:s("fields.productionType"),placeholder:s("placeholders.productionType"),required:!0},{name:"years_of_experience",label:s("fields.yearsOfExperience"),type:"number",placeholder:s("placeholders.yearsOfExperience")},{name:"level",label:s("fields.level"),type:"select",options:[{value:"Beginner",label:s("levels.beginner")},{value:"Intermediate",label:s("levels.intermediate")},{value:"Advanced",label:s("levels.advanced")},{value:"Expert",label:s("levels.expert")}]}]})},ke=({role:t,profileId:l})=>{const{t:s}=w("music"),{fetchComposer:d,addComposer:g,updateComposer:c,deleteComposer:x}=ve(),{data:n,refetch:i}=d(t.id),o=a=>{var m;return{...a,years_of_experience:a.years_of_experience?parseInt(a.years_of_experience,10):null,composition_style:((m=a.composition_style)==null?void 0:m.trim())||null}};return e.jsx(M,{role:t,profileId:l,details:Array.isArray(n)?n:[],refetch:i,addDetails:a=>g({details:o(a)}),updateDetails:(a,m)=>c({id:String(a),details:o(m)}),deleteDetails:a=>x({id:String(a)}),title:s("roles.detailsTitle",{role:s("roles.composer").toLowerCase()}),fields:[{name:"composition_style",label:s("fields.compositionStyle"),placeholder:s("placeholders.compositionStyle"),required:!0},{name:"years_of_experience",label:s("fields.yearsOfExperience"),type:"number",placeholder:s("placeholders.yearsOfExperience")},{name:"level",label:s("fields.level"),type:"select",options:[{value:"Beginner",label:s("levels.beginner")},{value:"Intermediate",label:s("levels.intermediate")},{value:"Advanced",label:s("levels.advanced")},{value:"Expert",label:s("levels.expert")}]}]})},Re=({role:t,profileId:l})=>e.jsxs("div",{className:"mt-4",children:[t.role==="Instrumentalist"&&e.jsx(Pe,{role:t,profileId:String(l)}),t.role==="Singer"&&e.jsx(Ce,{role:t,profileId:String(l)}),t.role==="DJ"&&e.jsx(De,{role:t,profileId:String(l)}),t.role==="Producer"&&e.jsx(Ee,{role:t,profileId:String(l)}),t.role==="Composer"&&e.jsx(ke,{role:t,profileId:String(l)})]}),Le=({profileId:t})=>{const{t:l}=w("music"),{fetchRoles:s,addRole:d,deleteRole:g}=fe(),{data:c=[],isLoading:x,isError:n,error:i}=s(t),[o,a]=S.useState(null),{control:m,handleSubmit:_,watch:y,reset:A,setError:N,formState:{errors:$}}=T({defaultValues:{selectedRole:""}}),I=y("selectedRole"),P=b=>{const j=b.selectedRole;if(c.length>=6){N("selectedRole",{message:l("edit.errors.maxRoles")});return}if(!j){N("selectedRole",{message:l("edit.errors.empty")});return}if(c.some(B=>B.role.toLowerCase()===j.toLowerCase())){N("selectedRole",{message:l("edit.errors.duplicate")});return}d({profileId:t,roleName:j}).then(()=>{A()}).catch(()=>{N("selectedRole",{message:l("edit.errors.addError")})})},q=S.useCallback(b=>{a(j=>j===b?null:b)},[]);return x?e.jsx(ye,{}):n?e.jsx(je,{error:(i==null?void 0:i.message)??"Unknown error"}):e.jsxs("div",{className:"p-6 bg-gradient-to-r from-gray-900 text-white rounded-b-2xl shadow-lg max-w-4xl mx-auto",children:[e.jsxs("form",{onSubmit:_(P),className:"mb-6 space-y-4",children:[e.jsx("h2",{className:"text-2xl text-yellow-600 font-semibold text-center mb-4",children:l("edit.addRoleTitle")}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 items-center",children:[e.jsx(F,{id:"selectedRole",options:[{value:"Composer",label:l("roles.composer")},{value:"DJ",label:l("roles.dj")},{value:"Instrumentalist",label:l("roles.instrumentalist")},{value:"Producer",label:l("roles.producer")},{value:"Singer",label:l("roles.singer")}],defaultOption:l("edit.selectLabel"),control:m}),e.jsx("div",{className:`${I==="Other"?"md:col-span-2":""}`,children:e.jsx(E,{type:"submit",className:"w-full md:w-auto md:mt-3 !bg-emerald-600 hover:!bg-emerald-700",children:l("edit.addButton")})})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:l("edit.yourRoles")}),c.length===0?e.jsx("p",{className:"text-gray-300",children:l("edit.noRoles")}):e.jsx("div",{className:"space-y-4",children:c.map(b=>e.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 shadow-sm transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 cursor-pointer hover:bg-gray-700 rounded-t-lg",onClick:()=>q(b.id),children:[e.jsx("span",{className:"text-lg font-semibold text-white",children:l(`roles.${b.role.toLowerCase()}`)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:`w-5 h-5 text-gray-400 transition-transform ${o===b.id?"rotate-90":""}`}),e.jsx("button",{onClick:j=>{j.stopPropagation(),g({id:b.id,profileId:t})},className:"text-xs bg-red-500 text-white px-2 py-1 rounded-full hover:bg-red-600","aria-label":l("music.edit.deleteRoleAria",{role:b.role}),children:"✕"})]})]}),o===b.id&&e.jsx("div",{className:"bg-gray-900 border-t border-gray-700 px-4 py-4 rounded-b-lg",children:e.jsx(Re,{role:b,profileId:t})})]},b.id))})]})]})},Ae=[{value:"en",label:"English"},{value:"es",label:"Español"}],Ie=[{value:"dark",label:"Dark"},{value:"light",label:"Light"}],Te=()=>{const{t}=w("settings",{keyPrefix:"account"}),{deleteProfile:l}=K(),{user:s,updatePassword:d,deleteMyAccount:g,signOut:c}=H(),{prefs:x,saveUiPreferences:n}=U(),{control:i,handleSubmit:o,formState:{isDirty:a,isSubmitting:m}}=T({defaultValues:{language:(x==null?void 0:x.lang)??"en",theme:(x==null?void 0:x.theme)??"dark"}}),[_,y]=S.useState(!1),[A,N]=S.useState(!1),$=async({language:C,theme:r})=>{await n({lang:C,theme:r}),N(!0),setTimeout(()=>N(!1),2500)},{register:I,handleSubmit:P,watch:q,reset:b,formState:{errors:j,isSubmitting:k}}=T(),B=async({newPassword:C})=>{await d(C),b()},z=async()=>{try{if(!s)return;await l(s.id),await g(),await c()}catch(C){console.error(C)}finally{y(!1)}};return e.jsxs("div",{className:"flex flex-col gap-10 bg-gradient-to-l to-gray-900 light:bg-gradient-to-l light:to-gray-200 p-6 rounded-b-lg shadow-lg max-w-4xl mx-auto",children:[e.jsxs("section",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl text-yellow-600 font-semibold mb-4",children:t("title")}),e.jsxs("p",{className:"text-gray-200 light:text-gray-900 font-bold",children:["Email: ",e.jsx("span",{className:"text-gray-400 light:text-gray-600",children:(s==null?void 0:s.email)??""})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-semibold text-center mb-4",children:t("preferences.title")}),e.jsxs("form",{onSubmit:o($),className:"max-w-lg mx-auto space-y-6",children:[e.jsx(F,{id:"language",label:t("labels.language"),control:i,options:Ae,search:!1}),e.jsx(F,{id:"theme",label:t("labels.theme"),control:i,options:Ie,search:!1}),e.jsx("div",{className:"sm:col-span-2 flex justify-center gap-4",children:e.jsx(E,{type:"submit",disabled:m,className:"!bg-emerald-600 hover:!bg-emerald-700",children:t(m?"buttons.saving":A?"buttons.saved":"buttons.save")})})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg text-center font-semibold mb-4",children:t("password.title")}),e.jsxs("form",{onSubmit:P(B),className:"max-w-lg mx-auto space-y-6",children:[e.jsx(G,{id:"newPassword",type:"password",label:t("labels.new"),placeholder:t("placeholders.new"),register:I,validation:{required:t("validations.required"),minLength:{value:6,message:t("validations.min")}},error:j.newPassword}),e.jsx(G,{id:"confirmPassword",type:"password",label:t("labels.confirm"),placeholder:t("placeholders.confirm"),register:I,validation:{validate:C=>C===q("newPassword")||t("validations.mismatch")},error:j.confirmPassword}),e.jsx("div",{className:"sm:col-span-2 flex justify-center gap-4",children:e.jsx(E,{type:"submit",disabled:k,className:"!bg-emerald-600 hover:!bg-emerald-700",children:t(k?"buttons.saving":"buttons.change")})})]})]}),e.jsxs("section",{className:"border-t sm:w-lg mx-auto text-center border-gray-700 pt-10",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-400 mb-4",children:t("danger.title")}),e.jsx(E,{className:"!bg-red-700 hover:!bg-red-800",onClick:()=>y(!0),type:"button",disabled:!1,children:t("buttons.delete")})]}),e.jsx(we,{isOpen:_,title:t("danger.title"),message:t("danger.confirm"),onConfirm:z,onCancel:()=>y(!1),confirmLabel:t("danger.yesDelete"),cancelLabel:t("danger.cancel"),color:"error"})]})},L=({id:t,label:l,register:s,validation:d={},error:g,className:c="",classForLabel:x="",...n})=>{const i=s?s(t,d):n;return e.jsxs("div",{className:`mb-4 flex bg-gray-900 p-4 rounded-lg items-center justify-between ${c}`,children:[l&&e.jsx("label",{htmlFor:t,className:`text-sm font-bold text-gray-200 select-none ${x}`,children:l}),e.jsxs("label",{htmlFor:t,className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{id:t,type:"checkbox",className:"sr-only peer",...i}),e.jsx("span",{className:`w-10 h-6 rounded-full bg-gray-500
                     transition-colors duration-200
                     peer-checked:bg-emerald-600
                     peer-focus:ring-2 peer-focus:ring-emerald-400/50`}),e.jsx("span",{className:`absolute left-0.5 top-0.5 w-5 h-5 rounded-full bg-white
                     transition-transform duration-200
                     peer-checked:translate-x-4`})]}),g&&e.jsx("p",{className:"text-red-500 text-sm mt-1 w-full",children:g.message||g})]})},qe=()=>{const{t}=w("settings",{keyPrefix:"privacy"}),{privacyPrefs:l,savePrivacySettings:s}=U(),{register:d,handleSubmit:g,reset:c,formState:{isDirty:x,isSubmitting:n}}=T({defaultValues:{show_email:!1,show_last_seen:!1,allow_messages:"all"}}),[i,o]=S.useState(!1);S.useEffect(()=>{l&&c(l)},[l,c]);const a=async m=>{await s(m),o(!0),setTimeout(()=>o(!1),2500)};return e.jsxs("section",{className:"flex flex-col gap-10 bg-gradient-to-l to-gray-900 p-6 rounded-b-lg shadow-lg max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-2xl text-yellow-600 font-semibold mb-6 text-center",children:t("title")}),e.jsx(L,{id:"show_email",label:t("toggles.showEmail"),register:d,error:void 0}),e.jsx(L,{id:"show_last_seen",label:t("toggles.showLastSeen"),register:d,error:void 0}),e.jsx(F,{id:"allow_messages",label:t("allowMessages.label"),options:[{value:"all",label:t("allowMessages.options.all")},{value:"connections_only",label:t("allowMessages.options.connections")},{value:"none",label:t("allowMessages.options.none")}],register:d,search:!1}),e.jsx("div",{className:"pt-4 flex justify-center",children:e.jsx(E,{onClick:g(a),disabled:!x||n,className:"!bg-emerald-600 hover:!bg-emerald-700",children:t(n?"buttons.saving":i?"buttons.saved":"buttons.save")})})]})},Be=()=>{const{t}=w("settings",{keyPrefix:"notifications"}),{notifPrefs:l,saveNotificationPrefs:s}=U(),{register:d,handleSubmit:g,reset:c,formState:{isDirty:x,isSubmitting:n}}=T({defaultValues:{likes:!0,comments:!0,connections:!0,groups:!0,matches:!0}}),[i,o]=S.useState(!1);S.useEffect(()=>{l&&c(l)},[l,c]);const a=async m=>{await s(m),o(!0),setTimeout(()=>o(!1),2500)};return e.jsxs("form",{onSubmit:g(a),className:"flex flex-col gap-10 bg-gradient-to-l to-gray-900 p-6 rounded-b-lg shadow-lg max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-2xl text-yellow-600 font-semibold mb-6 text-center",children:t("title")}),e.jsx(L,{id:"likes",label:t("toggles.likes"),register:d,error:void 0}),e.jsx(L,{id:"comments",label:t("toggles.comments"),register:d,error:void 0}),e.jsx(L,{id:"connections",label:t("toggles.connections"),register:d,error:void 0}),e.jsx(L,{id:"groups",label:t("toggles.groups"),register:d,error:void 0}),e.jsx(L,{id:"matches",label:t("toggles.matches"),register:d,error:void 0}),e.jsx("div",{className:"pt-4 flex justify-center",children:e.jsx(E,{type:"submit",disabled:!x||n,className:"!bg-emerald-600 hover:!bg-emerald-700",children:t(n?"buttons.saving":i?"buttons.saved":"buttons.save")})})]})},Oe={google:{icon:e.jsx(se,{className:"text-red-500"}),color:"!bg-red-600 hover:!bg-red-700"},github:{icon:e.jsx(ee,{className:"text-white"}),color:"!bg-gray-800 hover:!bg-gray-900"}},Fe=()=>{const{t}=w("settings",{keyPrefix:"providers"}),{user:l,linkProvider:s,unlinkProvider:d,loading:g}=H(),c=(l==null?void 0:l.identities)??[],x=n=>c.some(i=>i.provider===n);return e.jsxs("section",{className:"flex flex-col gap-10 bg-gradient-to-l to-gray-900 p-6 rounded-b-lg shadow-lg max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-2xl text-yellow-600 font-semibold mb-4 text-center",children:t("title")}),Object.entries(Oe).map(([n,i])=>{const o=c.find(a=>a.provider===n);return e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-700 pb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[i.icon,e.jsx("span",{className:"font-medium capitalize",children:n})]}),x(n)?e.jsx(E,{className:"!bg-red-700 hover:!bg-red-800",disabled:g,onClick:()=>o&&d(o.id),children:t("buttons.disconnect")}):e.jsx(E,{className:i.color,disabled:g,onClick:()=>s(n),children:t("buttons.connect")})]},n)})]})},Ke=()=>{const{user:t}=H();if(!t)return null;const{fetchProfile:l}=K(),{data:s}=l(t.id);W("(min-width:760px)");const{t:d}=w("ui",{keyPrefix:"sidebar"}),g=[{to:"/settings/profile",label:d("profileSettings"),icon:c=>c?e.jsx(J,{avatar_url:(s==null?void 0:s.avatar_url)??void 0,alt:"Avatar",className:"!w-6 !h-6 !ring-2 !ring-yellow-600",gender:s==null?void 0:s.gender}):e.jsx(J,{avatar_url:(s==null?void 0:s.avatar_url)??void 0,alt:"Avatar",className:"!w-6 !h-6",gender:s==null?void 0:s.gender})},{to:"/settings/account",label:d("accountSettings"),icon:c=>c?e.jsx(te,{}):e.jsx(ae,{})},{to:"/settings/privacy",label:d("privacySettings"),icon:c=>c?e.jsx(le,{}):e.jsx(re,{})},{to:"/settings/notifications",label:d("notificationsSettings"),icon:c=>c?e.jsx(ne,{}):e.jsx(oe,{})},{to:"/settings/music",label:d("musicSettings"),icon:c=>c?e.jsx(ie,{}):e.jsx(ce,{})}];return e.jsxs("div",{className:"settings-layout flex min-h-screen bg-gray-950 text-white",children:[e.jsx(Se,{avatarUrl:(s==null?void 0:s.avatar_url)??void 0,options:g}),e.jsx("div",{className:"settings-content flex-grow p-6 overflow-auto max-w-4xl ml-auto md:!mx-auto",children:e.jsxs(Ne,{children:[e.jsx(R,{path:"profile",element:e.jsx(de,{profile:s})}),e.jsx(R,{path:"music",element:e.jsx(Le,{profileId:t.id})}),e.jsx(R,{path:"account",element:e.jsx(Te,{})}),e.jsx(R,{path:"privacy",element:e.jsx(qe,{})}),e.jsx(R,{path:"notifications",element:e.jsx(Be,{})}),e.jsx(R,{path:"apps",element:e.jsx(Fe,{})}),e.jsx(R,{index:!0,element:e.jsx(_e,{to:"profile",replace:!0})})]})})]})};export{Ke as default};
