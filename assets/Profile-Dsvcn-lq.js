import{n as De,g as ie,b as Ae,c as ge,m as le,d as oe,o as ce,p as H,q as Te,t as de,s as he,j as e}from"./mui-DM0ppf3M.js";import{u as N,a as I,b as X,a0 as Fe,j as Q,w as pe,V as Oe,D as Re,F as Ue,a1 as je,A as be,L as ye,P as we,B as L,H as Ge,v as Be,o as Ee,p as ze,t as Ye,r as He,q as We,E as D,h as Ze,k as W,G as Ne,g as qe,J as Je,a2 as Ve,s as Ke,N as me,R as ve,i as S}from"./index-Bh6NGL6n.js";import{r as C}from"./calendar-BpW-aEGs.js";import{u as Xe,h as Qe}from"./useCanSendDM-DOB5yZnd.js";import{c as es,a2 as ss,a0 as ts,G as J,K as xe,L as ns,N as as,I as rs,S as is,a3 as ls,a4 as os,a5 as cs,a6 as ue,a7 as ds,k as ke,a8 as ms}from"./icons-DBDvTy8s.js";import{c as xs,g as us,a as fs,e as gs,b as hs}from"./ConnectionCard-CNIXhQJ9.js";import{S as ee}from"./ShinyText-2IjqnkFp.js";import{R as ps}from"./reactPlayer-CjHFj7G4.js";import{P as Z}from"./PlusButton-BhNz2Sn_.js";import{S as U}from"./index-CpFbDMuT.js";/* empty css                 */import{P as js}from"./PostsList-_KV_emtN.js";import bs from"./PostForm-bD0yT58e.js";import{a as ys,A as ws}from"./AdsListSkeleton-0c3dkW8s.js";import"./lottie-DTlWc_fK.js";import"./gsap-Brfk6Bdo.js";import"./filepond-DcLflJls.js";import"./proxy-B8wBTftU.js";import"./swiper-CzGqEt3B.js";function Ns(n,s,t){const a=Ae(),i=(t==null?void 0:t.locale)??a.locale??ge,l=xs(n,s);if(isNaN(l))throw new RangeError("Invalid time value");const o=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:l}),[c,m]=De(t==null?void 0:t.in,...l>0?[s,n]:[n,s]),d=us((t==null?void 0:t.roundingMethod)??"round"),x=m.getTime()-c.getTime(),f=x/H,b=ie(m)-ie(c),u=(x-b)/H,v=t==null?void 0:t.unit;let g;if(v?g=v:f<1?g="second":f<60?g="minute":f<le?g="hour":u<oe?g="day":u<ce?g="month":g="year",g==="second"){const j=d(x/1e3);return i.formatDistance("xSeconds",j,o)}else if(g==="minute"){const j=d(f);return i.formatDistance("xMinutes",j,o)}else if(g==="hour"){const j=d(f/60);return i.formatDistance("xHours",j,o)}else if(g==="day"){const j=d(u/le);return i.formatDistance("xDays",j,o)}else if(g==="month"){const j=d(u/oe);return j===12&&v!=="month"?i.formatDistance("xYears",1,o):i.formatDistance("xMonths",j,o)}else{const j=d(u/ce);return i.formatDistance("xYears",j,o)}}function vs(n,s){return Ns(n,fs(n),s)}function ks(n,s){const t=()=>Te(s==null?void 0:s.in,NaN),i=Is(n);let l;if(i.date){const d=Ls(i.date,2);l=Ms(d.restDateString,d.year)}if(!l||isNaN(+l))return t();const o=+l;let c=0,m;if(i.time&&(c=Ps(i.time),isNaN(c)))return t();if(i.timezone){if(m=$s(i.timezone),isNaN(m))return t()}else{const d=new Date(o+c),x=de(0,s==null?void 0:s.in);return x.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),x.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),x}return de(o+c+m,s==null?void 0:s.in)}const Y={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Cs=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,_s=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Ss=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Is(n){const s={},t=n.split(Y.dateTimeDelimiter);let a;if(t.length>2)return s;if(/:/.test(t[0])?a=t[0]:(s.date=t[0],a=t[1],Y.timeZoneDelimiter.test(s.date)&&(s.date=n.split(Y.timeZoneDelimiter)[0],a=n.substr(s.date.length,n.length))),a){const i=Y.timezone.exec(a);i?(s.time=a.replace(i[1],""),s.timezone=i[1]):s.time=a}return s}function Ls(n,s){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+s)+"})|(\\d{2}|[+-]\\d{"+(2+s)+"})$)"),a=n.match(t);if(!a)return{year:NaN,restDateString:""};const i=a[1]?parseInt(a[1]):null,l=a[2]?parseInt(a[2]):null;return{year:l===null?i:l*100,restDateString:n.slice((a[1]||a[2]).length)}}function Ms(n,s){if(s===null)return new Date(NaN);const t=n.match(Cs);if(!t)return new Date(NaN);const a=!!t[4],i=R(t[1]),l=R(t[2])-1,o=R(t[3]),c=R(t[4]),m=R(t[5])-1;if(a)return Os(s,c,m)?Ds(s,c,m):new Date(NaN);{const d=new Date(0);return!Ts(s,l,o)||!Fs(s,i)?new Date(NaN):(d.setUTCFullYear(s,l,Math.max(i,o)),d)}}function R(n){return n?parseInt(n):1}function Ps(n){const s=n.match(_s);if(!s)return NaN;const t=V(s[1]),a=V(s[2]),i=V(s[3]);return Rs(t,a,i)?t*he+a*H+i*1e3:NaN}function V(n){return n&&parseFloat(n.replace(",","."))||0}function $s(n){if(n==="Z")return 0;const s=n.match(Ss);if(!s)return 0;const t=s[1]==="+"?-1:1,a=parseInt(s[2]),i=s[3]&&parseInt(s[3])||0;return Us(a,i)?t*(a*he+i*H):NaN}function Ds(n,s,t){const a=new Date(0);a.setUTCFullYear(n,0,4);const i=a.getUTCDay()||7,l=(s-1)*7+t+1-i;return a.setUTCDate(a.getUTCDate()+l),a}const As=[31,null,31,30,31,30,31,31,30,31,30,31];function Ce(n){return n%400===0||n%4===0&&n%100!==0}function Ts(n,s,t){return s>=0&&s<=11&&t>=1&&t<=(As[s]||(Ce(n)?29:28))}function Fs(n,s){return s>=1&&s<=(Ce(n)?366:365)}function Os(n,s,t){return s>=1&&s<=53&&t>=0&&t<=6}function Rs(n,s,t){return n===24?s===0&&t===0:t>=0&&t<60&&s>=0&&s<60&&n>=0&&n<25}function Us(n,s){return s>=0&&s<=59}const Gs=({color:n="sky"})=>{const{t:s}=N("common"),t={pink:"bg-pink-100",sky:"bg-sky-100",amber:"bg-amber-100",green:"bg-green-100"}[n]||"bg-sky-100",a={pink:"bg-pink-600",sky:"bg-sky-600",amber:"bg-amber-600",green:"bg-green-600"}[n]||"bg-sky-600",i={pink:"text-pink-700",sky:"text-sky-700",amber:"text-amber-700",green:"text-green-700"}[n]||"text-pink-700";return e.jsxs("div",{className:"inline-flex items-center gap-3 select-none",children:[e.jsx("div",{className:`relative w-24 h-3 ${t} rounded overflow-hidden`,children:e.jsx("div",{className:`${a} absolute top-0 left-0 w-full h-full animate-[loading_1.5s_linear_infinite]`})}),e.jsx("span",{className:`text-xs font-semibold ${i}`,children:s("calculating")}),e.jsx("style",{children:`
        @keyframes loading {
          0% {
            transform: translateX(-100%);
          }
          100% {
            transform: translateX(100%);
          }
        }
      `})]})},Bs=({otherProfile:n,className:s=""})=>{const{t}=N("profile"),{user:a}=I(),{matchScore:i}=X(),[l,o]=C.useState(null);if(C.useEffect(()=>{a!=null&&a.id&&(n!=null&&n.id)&&i({profileAId:a.id,profileBId:n.id}).then(m=>{o(m)}).catch(m=>{console.error("matchScore error",m)})},[a==null?void 0:a.id,n==null?void 0:n.id,i]),l===null)return e.jsx(Gs,{color:"amber"});const c=Math.round(l*100);return e.jsxs("div",{className:`w-full md:w-auto flex items-center justify-center gap-1 cursor-help whitespace-nowrap select-none ${s}`,title:t("matchScore.title"),children:[e.jsx(es,{className:"text-amber-700 text-xl"}),e.jsxs("span",{className:`inline-block w-full text-center px-3 py-1.5 rounded-full text-sm font-semibold whitespace-nowrap ${c>=70?"bg-amber-800 text-white":c>=40?"bg-sky-700 text-white":c>=10?"bg-gray-300 text-gray-900":"bg-gray-800 text-gray-100"}`,children:["Match: ",c,"%"]})]})};function Es(n){if(!n)return null;const s=ks(n),t=Fe.language.startsWith("es")?gs:ge;return vs(s,{locale:t,addSuffix:!0})}const zs=({isOwnProfile:n,profileData:s})=>{const{t}=N("profile"),{user:a}=I(),i=Q(),{privacyOthers:l}=pe(),{data:o}=l(s.id),{totalUnreadMessages:c}=Oe(),{data:m,isLoading:d}=c((a==null?void 0:a.id)??""),{findConversation:x,createConversation:f}=Re(),{addParticipant:b}=Ue(),{userNotifications:u,notificationsRealtime:v}=je();v(a.id);const{data:g,isLoading:j}=u((a==null?void 0:a.id)??""),{connectionBetweenProfiles:A,addConnection:M,updateConnection:_,deleteConnection:T}=be(),{data:r,isLoading:y}=A((a==null?void 0:a.id)??"",s.id),{canSend:P,loading:F,reason:G}=Xe(s.id),[q,B]=C.useState(!1),[O,p]=C.useState(!1),[k,E]=C.useState(null),se=(g==null?void 0:g.filter(h=>!h.is_read).length)||0,_e=!!(o!=null&&o.show_last_seen&&s.last_seen),Se=()=>{q||!a||Qe({myProfileId:a.id,otherProfile:s,findConversation:x,createConversation:f,addParticipant:b,navigate:i,setLoading:()=>B(!0)})},te=async()=>{a&&await M({follower_profile_id:a.id,following_profile_id:s.id,status:"pending"})},z=async()=>{r&&await T(r)},Ie=async()=>{a&&(r?await _({connection:r,updatedConnection:{status:"blocked"}}):await M({follower_profile_id:a.id,following_profile_id:s.id,status:"blocked"}))},ne=async()=>{r&&await _({connection:r,updatedConnection:{status:"accepted"}})};C.useEffect(()=>{if(!O)return;const h=$=>{$.target.closest(".profile-connection-menu")||p(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[O]);const Le=h=>{const $="text-white text-lg mr-1 drop-shadow-[0_0_2px_rgba(255,255,255,0.5)]",$e="text-gray-300 text-lg mr-1 drop-shadow-[0_0_2px_rgba(255,255,255,0.2)]";return h==="accepted"?e.jsx(os,{className:$}):h==="pending"?e.jsx(cs,{className:$}):h==="blocked"&&(r==null?void 0:r.follower_profile_id)===(a==null?void 0:a.id)?e.jsx(ue,{className:$}):h==="blocked"&&(r==null?void 0:r.follower_profile_id)===s.id?e.jsx(ue,{className:$e}):e.jsx(ds,{className:$})},Me=(r==null?void 0:r.status)==="accepted",Pe=(r==null?void 0:r.status)==="pending",ae=(r==null?void 0:r.status)==="blocked"&&(r==null?void 0:r.follower_profile_id)===(a==null?void 0:a.id),re=(r==null?void 0:r.status)==="blocked"&&(r==null?void 0:r.follower_profile_id)===s.id;return e.jsxs("div",{className:"bg-gradient-to-l md:min-w-2xl lg:min-w-4xl from-gray-900 to-gray-950 mb-4 p-4 rounded-b-lg",children:[e.jsxs("div",{className:"flex flex-col gap-6 sm:flex-row sm:items-center",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-grow",children:[e.jsx(ye,{to:`/profile/${s.id}`,children:e.jsx(we,{avatar_url:s.avatar_url,className:"flex-shrink-0 !w-24 !h-24",gender:s.gender})}),e.jsxs("div",{className:"flex flex-col gap-2 flex-grow",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-100 break-words",children:s.username}),e.jsx("p",{className:"text-gray-400 break-words",children:s.bio})]})]}),e.jsxs("div",{className:"flex gap-4 ml-auto sm:mb-auto items-center relative",children:[!n&&e.jsxs(e.Fragment,{children:[P&&e.jsx(ss,{className:"w-8 h-8 text-white cursor-pointer",onClick:Se,title:t("profile.titles.startChat")}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{className:"text-white hover:text-sky-400 p-2 rounded-full focus:outline-none",onClick:()=>p(h=>!h),"aria-label":"Connection options",children:e.jsx(ts,{size:24})}),O&&e.jsxs("div",{className:"absolute right-0 top-10 z-20 bg-gray-900 border border-sky-700 rounded shadow-lg py-1 w-44 flex flex-col min-w-[150px] profile-connection-menu",children:[y?e.jsx("span",{className:"px-4 py-2 text-gray-400 text-xs flex items-center gap-2",children:t("connection.loading")}):ae?e.jsxs("button",{onClick:()=>{ne(),p(h=>!h)},className:"px-4 py-2 text-left hover:bg-gray-800 text-sm text-yellow-600 flex items-center gap-2",children:[e.jsx(J,{}),t("connection.unblock")]}):re?e.jsxs("span",{className:"px-4 py-2 text-red-400 text-xs flex items-center gap-2",children:[e.jsx(xe,{}),t("connection.blockedByOther")]}):Me?e.jsxs("button",{onClick:()=>{z(),p(h=>!h)},className:"px-4 py-2 text-left hover:bg-gray-800 text-sm text-gray-300 flex items-center gap-2",children:[e.jsx(J,{}),t("connection.disconnect")]}):Pe?e.jsxs("button",{onClick:()=>{z(),p(h=>!h)},className:"px-4 py-2 text-left hover:bg-gray-800 text-sm text-yellow-400 flex items-center gap-2 group",onMouseEnter:()=>E("disconnect"),onMouseLeave:()=>E(null),children:[k==="disconnect"?e.jsx(J,{}):e.jsx(ns,{}),t(k==="disconnect"?"connection.disconnect":"connection.pending")]}):e.jsxs("button",{onClick:()=>{te(),p(h=>!h)},className:"px-4 py-2 text-left hover:bg-gray-800 text-sm text-green-600 flex items-center gap-2",children:[e.jsx(as,{}),t("connection.connect")]}),!re&&!ae&&e.jsxs("button",{onClick:()=>{Ie(),p(h=>!h)},className:"px-4 py-2 text-left hover:bg-gray-800 text-sm text-red-400 border-t border-sky-800 flex items-center gap-2",children:[e.jsx(xe,{}),t("connection.block")]})]})]})]}),n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx(rs,{className:"w-8 h-8 text-white cursor-pointer",onClick:()=>i("/chat"),title:t("profile.titles.chat")}),!d&&((m==null?void 0:m.total)??0)>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full px-1.5",children:m==null?void 0:m.total})]}),e.jsx(is,{className:"w-8 h-8 text-white cursor-pointer",onClick:()=>{i("/settings")},title:t("profile.titles.settings")}),e.jsxs("div",{className:"relative",children:[e.jsx(ls,{className:"w-7 h-7 text-white cursor-pointer",onClick:()=>i(`/profile/${s.id}/notifications`),title:t("profile.titles.notifications")}),!j&&se>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full px-1.5",children:se})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center sm:justify-end mt-6",children:[!n&&e.jsxs("div",{className:"w-full mx-auto md:mx-0 md:!mr-auto mb-3 flex flex-col items-start gap-6 mt-3",children:[e.jsxs("div",{className:"flex flex-col items-stretch w-full md:flex-row gap-3 md:gap-6",children:[!y&&e.jsxs("button",{title:r?r.status==="accepted"?t("connection.disconnect"):r.status==="pending"?t("connection.cancelRequest"):r.status==="blocked"?r.follower_profile_id===(a==null?void 0:a.id)?t("connection.unblock"):t("connection.blockedByOther"):"":t("connection.connect"),onClick:()=>{if(!r)return te();if(r.status==="pending"||r.status==="accepted")return z();if(r.status==="blocked"&&r.follower_profile_id===(a==null?void 0:a.id))return ne()},className:`w-full sm:w-auto inline-flex items-center justify-center gap-1 px-3.5 py-1.5 rounded-full text-sm font-semibold whitespace-nowrap transition
                    ${r?r.status==="accepted"?"bg-emerald-700 text-white hover:bg-emerald-800":r.status==="pending"?"bg-yellow-600 text-white hover:bg-yellow-700":r.status==="blocked"&&r.follower_profile_id===(a==null?void 0:a.id)?"bg-red-700 text-white hover:bg-red-800":r.status==="blocked"&&r.follower_profile_id===s.id?"bg-gray-600 text-gray-200 cursor-not-allowed":"bg-gray-700 text-white":"bg-sky-700 text-white hover:bg-sky-800"}
                    ${(r==null?void 0:r.status)==="blocked"&&r.follower_profile_id===s.id?"pointer-events-none":"cursor-pointer"}
                  `,disabled:(r==null?void 0:r.status)==="blocked"&&r.follower_profile_id===s.id,children:[Le(r==null?void 0:r.status),r?r.status==="accepted"?t("connection.accepted"):r.status==="pending"?t("connection.pending"):r.status==="blocked"&&r.follower_profile_id===(a==null?void 0:a.id)?t("connection.blocked"):r.status==="blocked"&&r.follower_profile_id===s.id?t("connection.blockedByOther"):"":t("connection.connect")]}),e.jsx("div",{children:e.jsx(Bs,{otherProfile:s})})]}),_e&&e.jsx("p",{className:"text-xs mx-auto sm:mx-0 sm:mr-auto text-gray-400",children:t("profile.lastSeen",{time:Es(s.last_seen)})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsx(L,{onClick:()=>i(`/profile/${s.id}`),children:t("profile.navigation.about")})}),e.jsx("div",{className:"sm:mb-4",children:e.jsx(L,{onClick:()=>i(`/profile/${s.id}/ads`),children:t("profile.navigation.ads")})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsx(L,{onClick:()=>i(`/profile/${s.id}/posts`),children:t("profile.navigation.posts")})}),e.jsx("div",{className:"sm:mb-4",children:e.jsx(L,{starBorder:!0,onClick:()=>i(`/profile/${s.id}/groups`),className:"!bg-amber-800 hover:!bg-amber-900",children:t("profile.navigation.groups")})})]})]})]})},Ys=({profileData:n})=>{const{t:s}=N("profile"),{privacyOthers:t}=pe(),{data:a={}}=t(n.id);function i(l){if(!l)return 0;const o=new Date(l),c=new Date;let m=c.getFullYear()-o.getFullYear();const d=c.getMonth()-o.getMonth();return(d<0||d===0&&c.getDate()<o.getDate())&&m--,m}return e.jsx("div",{className:"flex flex-col items-center",children:e.jsxs("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-12 gap-y-4 text-lg text-gray-300",children:[n.firstname&&e.jsxs("li",{className:"flex items-center",children:[e.jsxs("span",{className:"font-semibold w-28 text-gray-500",children:[s("profile.data.firstname"),":"]}),e.jsx("span",{children:n.firstname})]}),n.lastname&&e.jsxs("li",{className:"flex items-center",children:[e.jsxs("span",{className:"font-semibold w-28 text-gray-500",children:[s("profile.data.lastname"),":"]}),e.jsx("span",{children:n.lastname})]}),n.country&&e.jsxs("li",{className:"flex items-center",children:[e.jsxs("span",{className:"font-semibold w-28 text-gray-500",children:[s("profile.data.country"),":"]}),e.jsx("span",{children:n.country})]}),n.state&&e.jsxs("li",{className:"flex items-center",children:[e.jsxs("span",{className:"font-semibold w-28 text-gray-500",children:[s("profile.data.state"),":"]}),e.jsx("span",{children:n.state})]}),n.neighborhood&&e.jsxs("li",{className:"flex items-center",children:[e.jsxs("span",{className:"font-semibold w-28 text-gray-500",children:[s("profile.data.neighborhood"),":"]}),e.jsx("span",{children:n.neighborhood})]}),n.gender&&e.jsxs("li",{className:"flex items-center",children:[e.jsxs("span",{className:"font-semibold w-28 text-gray-500",children:[s("profile.data.gender"),":"]}),e.jsx("span",{children:s(`edit.placeholders.genderOptions.${n.gender.toLowerCase()}`)})]}),n.birthdate&&e.jsxs("li",{className:"flex items-center",children:[e.jsxs("span",{className:"font-semibold w-28 text-gray-500",children:[s("profile.data.age"),":"]}),e.jsxs("span",{children:[i(n.birthdate)," ",s("profile.data.years")]})]}),a.show_email&&n.email&&e.jsxs("li",{className:"flex items-center",children:[e.jsxs("span",{className:"font-semibold w-28 text-gray-500",children:[s("profile.data.email"),":"]}),e.jsx("span",{children:n.email})]})]})})},Hs=({role:n,data:s})=>{const{t}=N("music");return!s||s.length===0?e.jsx("p",{className:"text-gray-400 mt-4 italic text-center",children:t("roles.noData")}):e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-xl font-bold mb-4 text-sky-200 text-center",children:t("roles.detailsTitle",{role:t(`roles.${n.role.toLowerCase()}`)})}),e.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(a=>e.jsxs("li",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4 shadow-sm",children:[n.role==="Instrumentalist"&&e.jsxs(e.Fragment,{children:[e.jsx(w,{label:t("fields.instrument"),value:a.instrument}),e.jsx(w,{label:t("fields.yearsOfExperience"),value:a.years_of_experience}),e.jsx(w,{label:t("fields.level"),value:t(`levels.${a.level.toLowerCase()}`)})]}),n.role==="Singer"&&e.jsxs(e.Fragment,{children:[e.jsx(w,{label:t("fields.voiceType"),value:a.voice_type}),e.jsx(w,{label:t("fields.musicGenre"),value:a.music_genre}),e.jsx(w,{label:t("fields.level"),value:t(`levels.${a.level.toLowerCase()}`)})]}),n.role==="DJ"&&e.jsxs(e.Fragment,{children:[e.jsx(w,{label:t("fields.eventsPlayed"),value:a.events_played}),e.jsx(w,{label:t("fields.preferredGenres"),value:a.preferred_genres}),e.jsx(w,{label:t("fields.level"),value:t(`levels.${a.level.toLowerCase()}`)})]}),n.role==="Producer"&&e.jsxs(e.Fragment,{children:[e.jsx(w,{label:t("fields.productionType"),value:a.production_type}),e.jsx(w,{label:t("fields.yearsOfExperience"),value:a.years_of_experience}),e.jsx(w,{label:t("fields.level"),value:t(`levels.${a.level.toLowerCase()}`)})]}),n.role==="Composer"&&e.jsxs(e.Fragment,{children:[e.jsx(w,{label:t("fields.compositionStyle"),value:a.composition_style}),e.jsx(w,{label:t("fields.yearsOfExperience"),value:a.years_of_experience}),e.jsx(w,{label:t("fields.level"),value:t(`levels.${a.level.toLowerCase()}`)})]})]},a.id))})]})},w=({label:n,value:s})=>e.jsxs("p",{className:"text-sm text-gray-300 mb-1",children:[e.jsxs("span",{className:"font-semibold text-gray-200",children:[n,": "]}),"  ",s||"N/A"]}),Ws=({role:n,expandedRole:s,handleRoleClick:t})=>{const{t:a}=N("music"),i=s===n.id;return e.jsxs("div",{className:`p-5 rounded-xl shadow-md border transition-all duration-300 cursor-pointer text-white text-center select-none
        ${i?"border-sky-500 bg-sky-800/30":"border-gray-700 bg-gray-800 hover:border-sky-500 hover:bg-gray-700/60"}
      `,onClick:()=>t(n),children:[e.jsx("span",{className:"text-lg font-semibold tracking-wide",children:a(`roles.${n.role.toLowerCase()}`)}),e.jsx("div",{className:"mt-2 flex justify-center",children:e.jsx(ke,{className:`text-gray-400 transition-transform duration-200 ${i?"rotate-180":""}`})})]})},Zs=()=>{const n="#a1a1aa",s="#e4e4e7";return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(U,{height:50,className:"rounded-lg",baseColor:n,highlightColor:s}),e.jsx(U,{height:300,className:"rounded-lg",baseColor:n,highlightColor:s})]})},qs=({profileId:n})=>{const{user:s}=I(),{t}=N("music"),{userMediaLinks:a}=Ge(),{data:i=[],isLoading:l}=a(n),o=Q(),c=s&&s.id===n;if(l)return e.jsx(Zs,{});const m=x=>{const f=x.match(/spotify\.com\/(track|playlist|album)\/([a-zA-Z0-9]+)/);if(!f)return null;const[b,u,v]=f;return`https://open.spotify.com/embed/${u}/${v}`},d=i.slice(0,2);return e.jsxs("section",{className:"mb-10",children:[c&&e.jsx(Z,{label:t("media.actions.add"),to:"/media/create"}),e.jsx("ul",{className:"space-y-4 text-center",children:d.map(x=>e.jsxs("li",{className:"shadow-sm p-4 rounded-lg bg-gradient-to-l to-gray-800",children:[e.jsx("p",{className:"font-medium mb-2 text-center",children:x.title}),x.media_type==="spotify"&&x.url?e.jsx("iframe",{src:m(x.url)||void 0,width:"100%",height:"80",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",className:"rounded w-full max-w-full"}):x.url?e.jsx("div",{className:"aspect-video bg-black rounded overflow-hidden",children:e.jsx(ps,{url:x.url,controls:!0,width:"100%",height:"100%",style:{maxWidth:"100%"}})}):null]},x.id))}),i.length>2&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx(L,{onClick:()=>o(`/media/${n}`),className:"!text-emerald-600 !text-2xl hover:!text-emerald-700 !bg-transparent",children:t("media.actions.seeMore")})})]})},Js=()=>e.jsxs("div",{className:"bg-gray-800 p-5 rounded-xl shadow-md flex flex-col gap-4 items-center",children:[e.jsx(U,{height:24,width:120,baseColor:"#a1a1aa",highlightColor:"#e4e4e7"}),e.jsx(ke,{className:"text-gray-400 mt-2"})]}),Vs=()=>{const n="#a1a1aa",s="#e4e4e7";return e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-center mb-4",children:e.jsx(U,{width:220,height:28,baseColor:n,highlightColor:s})}),e.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[...Array(2)].map((t,a)=>e.jsx("li",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4 shadow-sm",children:[...Array(3)].map((i,l)=>e.jsx("div",{className:"mb-2",children:e.jsx(U,{height:14,baseColor:n,highlightColor:s,width:`${80+Math.random()*20}%`})},l))},a))})]})},Ks=({profileId:n})=>{const{t:s}=N("music"),{user:t}=I(),[a,i]=C.useState(),{fetchRoles:l}=Be(),{data:o,isLoading:c,error:m}=l(n),{fetchInstruments:d}=Ee(),{data:x,isLoading:f}=d(a??""),{fetchSinger:b}=ze(),{data:u,isLoading:v}=b(a??""),{fetchComposer:g}=Ye(),{data:j,isLoading:A}=g(a??""),{fetchProducers:M}=He(),{data:_,isLoading:T}=M(a??""),{fetchDj:r}=We(),{data:y,isLoading:P}=r(a??""),[F,G]=C.useState(void 0),q=t&&t.id===n,B=c||f||v||A||T||P,O=p=>{F===p.id?G(void 0):(G(p.id),i(p.id))};return m?e.jsx(D,{error:m.message||s("errors.fetch")}):e.jsxs("div",{className:"bg-gray-900 p-6 rounded-lg shadow-md w-full",children:[e.jsx("div",{className:"flex items-center justify-center font-semibold gap-3 mb-6",children:e.jsx(ee,{text:s("roles.title"),speed:3,className:"text-3xl tracking-wide"})}),e.jsx(qs,{profileId:n}),q&&e.jsx(Z,{label:s("roles.addRole"),to:"/settings/music"}),o&&o.length===0?e.jsx("p",{className:"text-gray-400 text-center",children:s("roles.none")}):o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:B&&!o.length?[...Array(3)].map((p,k)=>e.jsx(Js,{},k)):o.map(p=>e.jsx(Ws,{role:p,expandedRole:F,handleRoleClick:O},p.id))}),F&&e.jsxs("div",{className:"mt-6",children:[B?e.jsx(Vs,{}):(()=>{const p=o.find(E=>E.id===F);let k=[];if(p){switch(p.role){case"Instrumentalist":k=x??[];break;case"Singer":k=u??[];break;case"DJ":k=y??[];break;case"Producer":k=Array.isArray(_)?_:_?[_]:[];break;case"Composer":k=j??[];break;default:k=[]}return e.jsx(Hs,{role:p,data:k})}return null})(),e.jsx("div",{className:"flex justify-center mt-4 cursor-pointer",onClick:()=>G(void 0),children:e.jsx(ms,{className:"text-gray-500"})})]})]}):null]})},K=({checkStatus:n,profileId:s,maxVisible:t})=>{const{user:a}=I(),{t:i}=N("ui",{keyPrefix:"connections"}),{userConnections:l}=be(),{data:o}=l(s),c=s===(a==null?void 0:a.id);if(!["accepted","pending","blocked"].includes(n)||!o)return null;const m=o.filter(u=>n==="accepted"?u.status==="accepted":n==="blocked"?u.status==="blocked":n==="pending"?u.status==="pending"&&u.following_profile_id===s:!1),d=u=>u.following_profile_id===s?u.follower_profile_id:u.following_profile_id,x=n==="accepted"?i("title"):null,f=n==="accepted",b=t?m.slice(0,t):m;return e.jsxs("div",{className:"max-w-4xl mx-auto w-full bg-gradient-to-l from-gray-900 py-4 flex flex-wrap justify-center rounded-lg gap-4",children:[e.jsx("div",{className:"w-full flex items-center justify-between px-4 mb-2",children:e.jsxs("h2",{className:"text-xl font-bold text-white",children:[x,f&&e.jsxs("span",{className:"ml-2 text-sky-400 text-lg font-semibold",children:["(",m.length,")"]})]})}),b.length>0?b.map(u=>e.jsx(hs,{connection:u,profileId:d(u),ownProfile:c},u.id)):e.jsx("div",{className:"text-gray-400",children:i(n==="pending"?"noPendingConnections":"noConnections")}),t&&m.length>t&&e.jsx(ye,{to:`/profile/${s}/connections`,className:"w-full text-center text-sky-400 hover:underline mt-2 block",children:i("viewAll")})]})},Xs=({groupId:n})=>{const{t:s}=N("profileGroup"),{fetchProfileGroup:t}=Ze(),a=Q(),{data:i,isLoading:l,error:o}=t(n),c=()=>{i&&a(`/group/${i.id}`)};return l?e.jsx(W,{}):o?e.jsx(D,{error:o.message}):i?e.jsxs("div",{className:"bg-gradient-to-r from-gray-800 p-4 rounded-lg shadow-md flex gap-4 items-center",children:[e.jsx(we,{avatar_url:i.avatar_url||"/default-avatar.png",alt:i.name,className:"!w-20 !h-20",group:!0}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-100",children:i.name}),e.jsx("p",{className:"text-sm text-gray-400",children:i.bio})]}),e.jsx(L,{className:"ml-auto !bg-amber-800 hover:!bg-amber-900",onClick:c,children:s("groupItem.viewGroup","View Group")})]}):null},Qs=({profileId:n,isOwnProfile:s})=>{const{t}=N("profileGroup"),{groupId:a}=Ne(),{user:i}=I(),{fetchUserGroups:l}=qe(),{data:o,isLoading:c,error:m}=l(n);return c?e.jsx(W,{}):m?e.jsx(D,{error:m.message}):e.jsxs("div",{className:"bg-gradient-to-l to-gray-900 p-6 rounded-b-lg shadow-lg max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-3xl font-semibold text-center mb-4 tracking-wide",children:e.jsx(ee,{text:t("userGroups.groups"),style:{"--shiny-primary":"#d97706cc"},className:"!text-amber-600",speed:3})}),!o||o.length===0?e.jsx("p",{className:"text-gray-400 text-center",children:t(s?"userGroups.notInAnyGroups":"userGroups.userNotInAnyGroups")}):e.jsx("div",{className:"grid grid-cols-1 gap-4",children:o.map(d=>e.jsx(Xs,{groupId:d.id},d.id))}),s&&e.jsx("div",{className:"mt-6 flex justify-start",children:e.jsx(Z,{label:t("userGroups.createNewGroup"),to:"/create-profile-group",color:"amber",slide:"right"})})]})},et=({profileId:n})=>{const{t:s}=N("ads"),{user:t}=I(),{fetchInfiniteByUser:a}=Je(),{data:i,fetchNextPage:l,hasNextPage:o,isFetchingNextPage:c,isLoading:m,error:d}=a(n),x=(t==null?void 0:t.id)===n;if(m)return e.jsx(ys,{isProfileView:!0});if(d)return e.jsx(D,{error:d.message});const f=i?i.pages.flat():[];return e.jsxs("div",{className:"mx-auto text-center w-full",children:[e.jsx("h2",{className:"text-center font-semibold mb-4",children:e.jsx(ee,{text:s("profileAds.title"),speed:3,className:"text-3xl tracking-wide"})}),x&&e.jsx(Z,{label:s("adsPage.buttons.createAd"),to:"/ads/new",showLabelOnMobile:!0}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.length>0?f.map(b=>e.jsx(ws,{ad:b,publisherId:n},b.id)):e.jsx("p",{className:"col-span-full text-center text-gray-400",children:s("profileAds.empty")})}),o&&e.jsx(L,{className:"!w-1/2 md:!w-1/3 !font-bold mt-4 !mx-auto hover:!text-sky-600",onClick:()=>l(),disabled:c,children:s(c?"profileAds.buttons.loading":"profileAds.buttons.loadMore")})]})},fe=n=>typeof n=="string"?JSON.parse(n):n||{},st=({profileId:n})=>{const{t:s}=N("profile",{keyPrefix:"notifications"}),[t,a]=C.useState(!1),{userNotifications:i,notificationsRealtime:l,updateNotification:o}=je(),{data:c=[],isLoading:m,error:d}=i(n);l(n);const x=C.useMemo(()=>c.map(r=>r.from_user_id).filter(Boolean).sort(),[c]),f=C.useMemo(()=>c.map(r=>fe(r.payload).group_id).filter(Boolean).sort(),[c]),{profilesMap:b}=X(),{data:u={}}=b(x),v=r=>{var y,P;return((y=u[r])==null?void 0:y.username)||((P=u[r])==null?void 0:P.firstname)||s("someone")},{data:g=[]}=Ve({queryKey:["notifGroups",f],enabled:f.length>0,queryFn:async()=>{const{data:r,error:y}=await Ke.schema("users").from("profile_groups").select("id, name").in("id",f);if(y)throw new Error(y.message);return r??[]}}),j=C.useMemo(()=>{const r={};return g.forEach(y=>{r[y.id]=y.name}),r},[g]),A=r=>j[r]||s("aGroup"),M=async r=>{r.is_read||await o({...r,is_read:!0})};if(m)return e.jsx(W,{});if(d)return e.jsx(D,{error:d.message});if(c.length===0)return e.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:s("noNotifications")});const _=r=>{const y=fe(r.payload);switch(r.type){case"group_follow":return s("group_follow",{user:v(y.follower_id),group:A(y.group_id)});default:return s(r.type,{user:v(r.from_user_id)})}},T=t?c:c.slice(0,10);return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("ul",{className:`divide-y divide-gray-700
                   p-4 bg-gradient-to-l to-gray-900 rounded-lg shadow-md`,children:T.map(r=>e.jsxs("li",{onClick:()=>M(r),className:`py-2 cursor-pointer hover:bg-gray-800 transition ${r.is_read?"text-gray-400":"text-white font-semibold"}`,children:["• ",_(r)]},r.id))}),c.length>10&&e.jsx("button",{onClick:()=>a(r=>!r),className:"mt-4 mx-auto block text-sky-400 hover:underline",children:s(t?"seeLess":"seeAll")})]})},tt=({profileId:n})=>{const{t:s}=N("profile"),t="cursor-pointer px-4 py-2 text-sm sm:text-base font-semibold rounded-lg transition-all",a=`${t} border-b-2 border-sky-600 text-white shadow-lg`,i=`${t} text-gray-300 hover:text-sky-600`;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gradient-to-b from-gray-800 to-gray-950 rounded-t-lg",children:e.jsxs("nav",{className:"flex justify-center space-x-8 py-3",children:[e.jsx(me,{end:!0,to:`/profile/${n}/notifications`,className:({isActive:l})=>l?a:i,children:s("profile.internNav.notifications")}),e.jsx(me,{to:`/profile/${n}/notifications/pending`,className:({isActive:l})=>l?a:i,children:s("profile.internNav.pending")})]})}),e.jsxs(ve,{children:[e.jsx(S,{index:!0,element:e.jsx(st,{profileId:n})}),e.jsx(S,{path:"pending",element:e.jsx(K,{profileId:n,checkStatus:"pending"})})]})]})};function Nt(){const{t:n}=N("profileGroup",{keyPrefix:"userGroups"}),{identifier:s}=Ne(),{user:t,loading:a}=I(),{fetchProfile:i}=X(),{data:l,isLoading:o,error:c}=i(s);if(a||o)return e.jsx(W,{});if(c)return e.jsx(D,{error:c.message});if(!l)return null;const d=(t==null?void 0:t.id)===s,x=()=>e.jsxs(e.Fragment,{children:[e.jsx(Ys,{profileData:l}),e.jsx(Ks,{profileId:l.id}),e.jsx(K,{profileId:l.id,checkStatus:"accepted",maxVisible:4})]}),f=()=>e.jsx(js,{profileId:l.id,disableSearch:!1,isOwnProfile:d}),b=()=>e.jsx(bs,{}),u=()=>e.jsx(Qs,{profileId:l.id,isOwnProfile:d}),v=()=>e.jsx(et,{profileId:l.id});return e.jsx("div",{className:"flex flex-col min-h-screen text-white",children:e.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[e.jsx(zs,{profileData:l,isOwnProfile:d}),e.jsxs(ve,{children:[e.jsx(S,{index:!0,element:e.jsx(x,{})}),e.jsx(S,{path:"posts",element:e.jsx(f,{})}),e.jsx(S,{path:"connections",element:e.jsx(K,{profileId:l.id,checkStatus:"accepted"})}),d&&e.jsx(S,{path:"create",element:e.jsx(b,{})}),e.jsx(S,{path:"groups",element:e.jsx(u,{})}),e.jsx(S,{path:"ads",element:e.jsx(v,{})}),d&&e.jsx(S,{path:"notifications/*",element:e.jsx(tt,{profileId:l.id})})]})]})})}export{Nt as default};
