import{j as e}from"./mui-DM0ppf3M.js";import{u as _,a as E,G as O,J as z,D as B,F as M,b as F,j as I,k as G,E as J,L as n,P as Q,B as R,x as T}from"./index-p55ST7R3.js";import{u as U,h as q}from"./useCanSendDM-Jd9h9vgr.js";import{r as x}from"./calendar-BpW-aEGs.js";import{O as H,P as K,Q as g}from"./icons-70IfXVsJ.js";import"./reactPlayer-CjHFj7G4.js";import"./lottie-DTlWc_fK.js";import"./gsap-Brfk6Bdo.js";import"./filepond-DcLflJls.js";const ie=()=>{var c,m;const{t:s}=_("ads"),{user:l}=E(),{id:f}=O(),{fetchAd:p,deleteAd:u}=z(),{findConversation:h,createConversation:j}=B(),{addParticipant:b}=M(),{data:t,isLoading:y,error:r}=p(f),{fetchProfile:N}=F(),{data:a,isLoading:v}=N(t==null?void 0:t.profile_id),d=I(),[w,D]=x.useState(!1),{canSend:P,loading:k}=U(a==null?void 0:a.id),[C,o]=x.useState(!1);if(y||v||k)return e.jsx(G,{});if(r||!t||!a||!l)return e.jsx(J,{error:(r==null?void 0:r.message)||"Unknown error"});const L=()=>{w||q({myProfileId:l.id,otherProfile:a,findConversation:h,createConversation:j,addParticipant:b,navigate:d,setLoading:D})},A=()=>{u(t),o(!1),d("/ads")},S=()=>{o(!1)},$=l.id===a.id,i=t.ad_type==="looking";return e.jsxs("div",{className:`max-w-3xl rounded-md bg-gradient-to-r mx-auto px-4 py-4 space-y-8 ${i?"from-cyan-950":"from-emerald-950"}`,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between bg-gradient-to-r bg-black/20 border-b p-2 border-gray-400",children:[e.jsxs("div",{className:"flex justify-between items-center gap-13",children:[e.jsx(n,{to:`/profile/${a.id}`,children:e.jsx(Q,{avatar_url:a.avatar_url,className:"!w-12 !h-12",gender:a.gender})}),e.jsx("h2",{className:"hidden min-w-100 sm:inline text-2xl tracking-wide mt-3 text-center rounded-lg px-4 py-1 text-gray-100",children:t.title}),e.jsxs("div",{className:"flex flex-col items-end gap-6 sm:flex-row sm:items-center",children:[$&&e.jsxs("div",{className:"flex gap-3",children:[e.jsx(n,{to:`/ads/edit/${t.id}`,children:e.jsx(H,{size:20,title:s("adCard.buttons.edit"),className:"text-yellow-500"})}),e.jsx("button",{onClick:()=>o(!0),children:e.jsx(K,{size:20,title:s("adCard.buttons.delete"),className:"text-red-500 cursor-pointer"})})]}),e.jsx("span",{className:`text-sm px-2 min-w-20 py-1 text-center rounded-lg font-medium ${i?"bg-blue-100 text-cyan-700":"bg-green-100 text-emerald-700"}`,children:s(i?"adsDetailsPage.badges.looking":"adsDetailsPage.badges.offering")})]})]}),e.jsx("h2",{className:"text-md max-w-50 tracking-wide text-left sm:hidden sm:text-left p-1 text-gray-100",children:t.title})]}),e.jsxs("div",{className:"md:grid md:grid-cols-2 md:gap-8 space-y-6 md:space-y-0",children:[e.jsxs("div",{className:"space-y-6 mx-auto",children:[e.jsxs("div",{className:"flex gap-4 justify-between sm:justify-start items-center",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-400",children:[s("adsDetailsPage.info.postedBy")," :"]}),e.jsx(n,{to:`/profile/${a.id}`,className:"flex items-center gap-4",children:e.jsx("p",{className:"text-gray-100 rounded-lg bg-black/20 px-6 py-1",children:a.username})})]}),e.jsxs("div",{className:"flex gap-4 justify-between sm:justify-start items-center",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-400",children:[s("adsDetailsPage.info.from")," :"]}),e.jsx("p",{className:"text-gray-100 rounded-lg bg-black/20 px-6 py-1",children:a.country})]}),e.jsxs("div",{className:"flex gap-4 justify-between sm:justify-start items-center",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-400",children:[s("adsDetailsPage.info.createdAt")," :"]}),e.jsx("p",{className:"text-gray-100 rounded-lg bg-black/20 px-6 py-1",children:new Date(t.created_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"space-y-6 mx-auto",children:[e.jsxs("div",{className:"flex flex-wrap justify-between sm:flex-nowrap sm:justify-start gap-2 sm:gap-4 items-start",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-400",children:[s("adsDetailsPage.info.genres")," :"]}),e.jsx("p",{className:"text-gray-100 bg-black/20 rounded-lg px-4 py-1 break-words w-fit max-w-full",children:((c=t.genres)==null?void 0:c.join(", "))||"—"})]}),e.jsxs("div",{className:"flex gap-4 justify-between sm:justify-start items-center",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-400",children:[s(i?"adsDetailsPage.badges.looking":"adsDetailsPage.badges.offering")," :"]}),e.jsx("p",{className:"text-gray-100 rounded-lg bg-black/20 px-6 py-1",children:((m=t.looking_for)==null?void 0:m.join(", "))||"—"})]}),e.jsxs("div",{className:"flex gap-4 justify-between sm:justify-start items-center",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-400",children:[s("adsDetailsPage.info.location")," :"]}),e.jsx("p",{className:"text-gray-100 rounded-lg bg-black/20 px-6 py-1",children:t.location||"—"})]})]})]}),e.jsxs("div",{className:"space-y-2 pt-6 text-center",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-400",children:[s("adsDetailsPage.info.description")," :"]}),e.jsx("p",{className:"text-gray-100 rounded-lg bg-black/20 px-6 py-4",children:t.description})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(n,{to:"/ads",className:`group relative items-center justify-end hidden md:flex ${i?"text-cyan-400 hover:text-cyan-300":"text-emerald-400 hover:text-emerald-300"} transition-colors text-sm font-medium`,children:[e.jsx(g,{size:25}),e.jsx("span",{className:`ml-2 whitespace-nowrap ${i?"text-cyan-500":"text-emerald-500"} font-semibold text-base px-3 py-1 transition-all duration-300 opacity-0 translate-x-4 group-hover:opacity-100 group-hover:translate-x-0 pointer-events-none`,children:s("adsDetailsPage.buttons.back")})]}),e.jsx(n,{to:"/ads",className:`md:hidden ${i?"text-cyan-500 hover:text-cyan-400":"text-emerald-500 hover:text-emerald-400"} transition-colors p-2 rounded-full focus:outline-none focus:ring-2 focus:ring-gray-300`,"aria-label":s("adsDetailsPage.buttons.back"),children:e.jsx(g,{title:s("adsDetailsPage.buttons.back"),size:22})}),P&&e.jsx(R,{className:`${i?"!bg-cyan-700 hover:!bg-cyan-800":"!bg-emerald-600 hover:!bg-emerald-700"}`,onClick:L,children:s("adsDetailsPage.buttons.contact")})]}),e.jsx(T,{isOpen:C,title:s("confirmDialog.title"),message:s("confirmDialog.message"),onConfirm:A,onCancel:S,confirmLabel:s("confirmDialog.labels.confirm"),cancelLabel:s("confirmDialog.labels.cancel"),color:"error"})]})};export{ie as default};
