import{j as e,y as g,S as l}from"./mui-B-xP7mtj.js";import{r as w}from"./filepond-C4Y8_Bzv.js";import{u as N,a as b,q as _,d as k,L as C}from"./index-cVJRNoKt.js";import{v as P,s as m,u as I,r as L,t as R}from"./icons-r1d5ly4y.js";import{P as S}from"./ProfileAvatar-c1RuMNn7.js";const $=()=>e.jsxs(g,{sx:{width:240,height:360,borderRadius:2,boxShadow:1,backgroundColor:"background.paper",display:"flex",flexDirection:"column",alignItems:"center",gap:1,p:1},children:[e.jsx(l,{variant:"rectangular",width:240,height:200,sx:{borderRadius:1}}),e.jsx(l,{variant:"text",width:"60%",height:32}),e.jsx(l,{variant:"text",width:"40%",height:24}),e.jsx(g,{sx:{flexGrow:1}}),e.jsx(l,{variant:"rectangular",width:160,height:40,sx:{borderRadius:1}})]}),A=({profile:t})=>{const{t:r}=N("profile"),{user:a}=b(),i=!!a,{addConnection:h,deleteConnection:x,userConnections:p,updateConnection:j}=_(),{data:d}=p(t.id),[n,u]=w.useState(""),f=k(),o=i&&(d==null?void 0:d.find(c=>c.follower_profile_id===a.id&&c.following_profile_id===t.id||c.follower_profile_id===t.id&&c.following_profile_id===a.id)),s=(o==null?void 0:o.status)??"connect",v=async()=>{if(!i){f("/login");return}s==="connect"?await h({follower_profile_id:a.id,following_profile_id:t.id,status:"pending"}):s==="pending"?await x(o):s==="accepted"?await x(o):s==="blocked"&&await j({connection:o,updatedConnection:{status:"accepted"}})},y=()=>s==="pending"?r("connection.cancelRequest"):s==="accepted"?r("connection.disconnect"):s==="blocked"?r("connection.unblock"):null;return e.jsxs("div",{className:"flex flex-col w-60 h-90 text-gray-800 items-center gap-2 border rounded-lg shadow-sm bg-gray-200",children:[e.jsx(C,{to:`/profile/${t.id}`,children:e.jsx(S,{avatar_url:t.avatar_url,alt:`${t.username}'s avatar`,className:"object-cover h-50 w-60",list:!0,gender:t.gender})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-semibold text-lg",children:t.username}),t.state&&t.country?e.jsxs("p",{className:"text-gray-500",children:[t.state,", ",t.country]}):t.country?e.jsx("p",{className:"text-gray-500",children:t.country}):t.state?e.jsx("p",{className:"text-gray-500",children:t.state}):null]}),e.jsx("div",{className:"mt-auto py-4",children:e.jsxs("button",{className:"relative font-bold cursor-pointer w-50 bg-gray-500 text-white px-4 py-2 rounded h-10 overflow-hidden flex items-center gap-2",onClick:v,onMouseEnter:()=>u(y()),onMouseLeave:()=>u(null),children:[e.jsxs("span",{className:"pl-1",children:[s==="connect"&&e.jsx(P,{className:"text-green-50"}),s==="accepted"&&!n&&e.jsx(m,{className:"text-green-50"}),s==="pending"&&!n&&e.jsx(I,{className:"text-yellow-50"}),(s==="pending"||s==="accepted")&&n&&e.jsx(L,{className:"text-red-50"}),s==="blocked"&&!n&&e.jsx(R,{className:"text-red-100"}),s==="blocked"&&n&&e.jsx(m,{className:""})]}),e.jsx("span",{className:`absolute inset-0 text-[13px] flex items-center justify-center transition-opacity duration-400 ${n?"opacity-0":"opacity-100"}`,children:r(`connection.${s}`)}),e.jsx("span",{className:`absolute inset-0 text-[13px] flex items-center justify-center transition-opacity duration-400 ${n?"opacity-100":"opacity-0"}`,children:n||""})]})})]})},M=({profiles:t,isSearching:r})=>r?e.jsx("div",{className:"flex flex-col gap-4 items-center",children:[...Array(3)].map((a,i)=>e.jsx($,{},i))}):!t||t.length===0?e.jsx("p",{className:"text-gray-500",children:"No profiles available."}):e.jsx("div",{className:"w-full flex flex-wrap justify-center gap-4",children:t.map(a=>e.jsx(A,{profile:a},a.id))});export{$ as P,M as a};
