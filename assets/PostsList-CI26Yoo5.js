import{j as e,y as W,S as z,B as ne}from"./mui-B-xP7mtj.js";import{r as c,R as ue}from"./filepond-C4Y8_Bzv.js";import{u as _,K as re,L as $,a as K,b as ie,M as he,e as le,r as ge,t as fe,d as oe,J as pe,O as je,I as ce}from"./index-cVJRNoKt.js";import{P as G}from"./ProfileAvatar-c1RuMNn7.js";import{a0 as be,a3 as ve,a4 as we,a5 as Ne,a6 as ke,a7 as ye,a8 as Ce,a9 as Pe,aa as Se,ab as ze,A as _e}from"./icons-r1d5ly4y.js";import{E as X}from"./ErrorMessage-B2u091H8.js";import{u as de}from"./index.esm-B1e87uze.js";import{S as Le}from"./index-cpdcplt_.js";import{u as Me,h as Ee}from"./useCanSendDM-L16iIdpx.js";import{m as Z}from"./proxy-A4UlACsI.js";import{S as Y,N as $e,P as ee,b as se,Z as te,a as ae}from"./swiper-Ciezsct5.js";import{P as q}from"./PlusButton-C-lc4xI5.js";function Ae({onChange:s,onSubmit:t,onCancel:n,value:r}){const{t:a}=_("comments");return e.jsxs("div",{className:"flex-1 mt-2 w-full place-items-end",children:[e.jsx("textarea",{value:r,onChange:o=>s(o.target.value),className:"bg-gray-100 dark:bg-zinc-700 p-3 rounded-lg shadow-sm w-150",rows:2,placeholder:a("card.placeholder")}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("button",{onClick:t,className:"px-3 py-1 bg-sky-700 hover:bg-sky-800 text-white rounded text-sm",children:a("card.buttons.reply")}),e.jsx("button",{onClick:()=>n(),className:"px-3 py-1 bg-gray-600 hover:bg-gray-700 text-white rounded text-sm",children:a("card.buttons.cancel")})]})]})}function Ie({value:s,onChange:t,onSave:n,onCancel:r}){const{t:a}=_("common");return e.jsxs("div",{className:"flex-1 mt-2 place-items-end",children:[e.jsx("textarea",{value:s,onChange:o=>t(o.target.value),className:"w-100 p-2 rounded-md border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-900 text-zinc-800 dark:text-zinc-100 resize-none",rows:2}),e.jsxs("div",{className:"flex gap-2 mt-2 justify-center",children:[e.jsx("button",{onClick:()=>n(),className:"px-3 py-1 w-18 bg-emerald-600 hover:bg-emerald-700 text-white rounded text-sm",children:a("generic.save")}),e.jsx("button",{onClick:()=>r(),className:"px-3 py-1 w-18 bg-gray-600 hover:bg-gray-700 text-white rounded text-sm",children:a("generic.cancel")})]})]})}const Oe=c.memo(Ie);function Fe({onMenu:s,onEdit:t,onDelete:n,menuRef:r,isMenuOpen:a}){const{t:o}=_("common");return e.jsxs("div",{className:"relative",ref:r,children:[e.jsx("button",{onClick:s,className:"cursor-pointer text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300 text-xl px-2",children:e.jsx(be,{size:20})}),a&&e.jsxs("div",{className:"absolute right-0 mt-2 w-32 bg-white dark:bg-zinc-900 border border-zinc-800 dark:border-zinc-700 rounded shadow-lg z-10",children:[e.jsx("button",{onClick:t,className:"block w-full text-center px-4 py-2 text-sm hover:bg-zinc-100 dark:hover:bg-zinc-800",children:o("generic.edit")}),e.jsx("div",{className:"border-t border-zinc-300 dark:border-zinc-700"}),e.jsx("button",{onClick:n,className:"block w-full text-center px-4 py-2 text-sm hover:bg-red-100 dark:hover:bg-red-950 text-red-600 dark:text-red-400",children:o("generic.delete")})]})]})}const Be=c.memo(Fe);function me({comment:s,profile:t,onDelete:n,onSaveEdit:r,replies:a=[],profilesMap:o,onReplySubmit:f,currentUserId:h}){const{t:m}=_("comments"),[p,v]=c.useState(!1),[i,j]=c.useState(!1),[d,b]=c.useState(""),[x,w]=c.useState(null),[N,k]=c.useState(!1),[C,S]=c.useState(s.content),{commentLikesQuery:A,insertLike:I,deleteLike:F}=re(),{data:L=[],isLoading:M}=A(s.id),u=x===s.id,y=h===s.profile_id,P=c.useRef(null);c.useEffect(()=>{function l(xe){u&&P.current&&!P.current.contains(xe.target)&&w(null)}return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[u]);const E=()=>(L==null?void 0:L.filter(l=>l.comment_id===s.id))||[],H=()=>E().some(l=>l.profile_id===h),T=()=>E().find(l=>l.profile_id===h),O=async()=>{if(!h)return;const l=T();l?await F(l):await I({comment_id:s.id,profile_id:h})},U=c.useCallback(()=>{d.trim()!==""&&(f({content:d,parent_id:s.id}),b(""),j(!1))},[d,s.id,f]),V=c.useCallback(()=>{b(""),j(!1)},[]),B=c.useCallback(()=>{r(s.id,s.post_id,C),k(!1)},[s.id,s.post_id,C,r]),R=c.useCallback(()=>{k(!1),S(s.content)},[s.content]),Q=c.useCallback(()=>{w(u?null:s.id)},[s.id]),g=p?a.slice(-10):[];return e.jsxs("div",{className:"flex mb-4",children:[e.jsx($,{to:`/profile/${t==null?void 0:t.id}`,children:e.jsx(G,{avatar_url:t==null?void 0:t.avatar_url,className:"!w-8 !h-8 mr-3 flex-shrink-0",alt:`${t==null?void 0:t.username}'s avatar`,gender:t==null?void 0:t.gender})}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsxs("div",{className:"bg-zinc-900 p-3 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"font-semibold text-zinc-700 dark:text-zinc-300",children:(t==null?void 0:t.username)||m("card.anonymous")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-xs text-zinc-500",children:new Date(s.updated_at||s.created_at).toLocaleString()}),y&&e.jsx(Be,{menuRef:P,onDelete:()=>n(s),onEdit:()=>k(!0),onMenu:()=>Q(),isMenuOpen:u})]})]}),e.jsx("div",{className:"text-zinc-600 dark:text-zinc-300 mt-1",children:s.content}),e.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-sky-700 dark:text-sky-500",children:[e.jsxs("button",{className:"flex items-center gap-1 hover:underline disabled:opacity-50",onClick:O,disabled:M,children:[e.jsx("span",{children:H()?m("card.liked"):m("card.like")}),e.jsx("span",{children:E().length})]}),e.jsx("button",{className:"hover:underline",onClick:()=>j(!i),children:m("card.reply")})]})]}),N&&e.jsx(Oe,{value:C,onChange:S,onSave:B,onCancel:R}),i&&e.jsx(Ae,{value:d,onChange:b,onSubmit:U,onCancel:V}),a.length>0&&e.jsxs("div",{className:"mt-4 border-zinc-300 dark:border-zinc-700",children:[e.jsx("button",{onClick:()=>v(!p),className:"flex items-center gap-1 text-sm font-bold text-sky-600 mb-1 hover:underline",children:e.jsxs(e.Fragment,{children:[p?e.jsx(ve,{}):e.jsx(we,{}),a.length===1?m("card.replies",{count:a.length}):m("card.repliesPlural",{count:a.length})]})}),p&&g.map(l=>e.jsx(me,{comment:l,profile:o[l.profile_id],onDelete:n,onSaveEdit:r,replies:l.replies||[],profilesMap:o,onReplySubmit:f,currentUserId:h},l.id))]})]})]})}const Re=c.memo(me);function De({postId:s}){var M;const{t}=_("comments"),{user:n}=K(),{fetchProfile:r,profilesMap:a}=ie(),{data:o}=r(n==null?void 0:n.id),{fetchComments:f,insertComment:h,updateComment:m,deleteComment:p,isLoading:v}=he(),{data:i}=f(s),[j,d]=c.useState(!1),b=He(i??[]),{data:x,isLoading:w}=a(b),{register:N,handleSubmit:k,reset:C,formState:{errors:S}}=de();if(w||v)return e.jsx(le,{});const A=async u=>{const y={post_id:s,profile_id:n.id,content:u.comment};try{await h(y),C()}catch(P){console.error("Could't insert comment",P)}},I=async u=>{try{await p(u)}catch(y){console.error("error trying to delete comment",y)}},F=async(u,y,P)=>{try{await m({id:u,post_id:y,updatedComment:{content:P,updated_at:new Date().toISOString()}})}catch(E){console.error("Error updating comment",E)}},L=async u=>{const y={post_id:s,profile_id:n.id,content:u.content,parent_id:u.parent_id??null};try{await h(y)}catch(P){console.error("Could not insert reply",P)}};return e.jsxs("div",{className:"w-full mt-4 border-t pt-4 text-sm text-zinc-800 dark:text-zinc-100",children:[e.jsxs("div",{className:"mb-4",children:[(i==null?void 0:i.length)>2&&!j&&e.jsx("button",{onClick:()=>d(!0),className:"mb-4 text-sky-700 dark:text-sky-400 text-sm hover:underline",children:t("box.loadMore")}),(M=j?i:i==null?void 0:i.slice(-2))==null?void 0:M.map(u=>e.jsx(Re,{comment:u,profile:x==null?void 0:x[u.profile_id],onDelete:I,onSaveEdit:F,replies:u.replies,profilesMap:x,onReplySubmit:L,currentUserId:n.id},u.id)),(i==null?void 0:i.length)===0&&e.jsx("p",{className:"italic text-zinc-600",children:t("box.noComments")})]}),e.jsxs("form",{onSubmit:k(A),className:"flex items-start gap-3 mt-4",children:[e.jsx($,{to:`/profile/${o.id}`,children:e.jsx(G,{avatar_url:o.avatar_url,className:"!w-10 !h-10",gender:o.gender,alt:`${o.username}'s avatar`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{...N("comment",{required:!0}),placeholder:t("box.placeholder"),className:"w-full p-2 rounded-md border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-950 text-zinc-800 dark:text-zinc-100 resize-none",rows:2}),e.jsx("button",{type:"submit",className:"mt-2 px-4 py-1 bg-sky-700 hover:bg-sky-800 text-white rounded-md text-sm",children:t("box.send")}),S.comment&&e.jsx("span",{className:"text-red-500 text-xs",children:t("box.error")})]})]})]})}function He(s=[]){const t=new Set;function n(r){for(const a of r)a.profile_id&&t.add(a.profile_id),Array.isArray(a.replies)&&a.replies.length>0&&n(a.replies)}return n(s),Array.from(t)}const Te=({profile:s,isLoading:t})=>{const{user:n}=K(),r=!!n,{findConversation:a,createConversation:o}=ge(),{addParticipant:f}=fe(),{canSend:h,loading:m}=Me(s.id),[p,v]=c.useState(!1),i=oe(),j=r&&n.id===s.id,d=()=>{if(!p){if(!r){i("/login");return}Ee({myProfileId:n.id,otherProfile:s,findConversation:a,createConversation:o,addParticipant:f,navigate:i,setLoading:v})}};if(t||m)return e.jsx(Z.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"absolute z-50 p-3 rounded-lg shadow-md bg-white dark:bg-zinc-900 w-64",children:e.jsx(Le,{count:4})});if(!s)return null;const{username:b,state:x,neighborhood:w,country:N,bio:k,avatar_url:C,id:S}=s;return e.jsxs(Z.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"absolute z-50 p-4 rounded-lg shadow-md bg-neutral-100 dark:bg-neutral-900 w-64 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx($,{to:`/profile/${S}`,children:e.jsx("img",{src:C,alt:`Avatar of ${b}`,className:"w-10 h-10 rounded-full object-cover"})}),e.jsxs("div",{className:"ml-6",children:[e.jsxs("p",{className:"font-semibold text-center text-neutral-900 dark:text-neutral-100 mb-2",children:["@",b]}),(x||N)&&e.jsxs("p",{className:"text-neutral-400 text-xs",children:[x,x&&N?", ":"",N]})]})]}),k&&e.jsx("p",{className:"text-neutral-600 dark:text-neutral-300 line-clamp-4",children:k.length>50?`${k.slice(0,100)}...`:k}),e.jsxs("div",{className:"flex justify-end items-center gap-5 pt-2",children:[j&&e.jsx($,{title:"Edit Profile",to:"/settings/profile",className:"text-neutral-400 cursor-pointer hover:text-neutral-900 dark:hover:text-neutral-100 transition",children:e.jsx(Ne,{size:30})}),e.jsx($,{title:"View Posts",to:`/profile/${S}/posts`,className:"text-neutral-400 cursor-pointer hover:text-neutral-900 dark:hover:text-neutral-100 transition",children:e.jsx(ke,{size:30})}),h&&e.jsx("button",{title:"Send Message",className:"text-neutral-400 cursor-pointer hover:text-neutral-900 dark:hover:text-neutral-100 transition",onClick:d,children:e.jsx(ye,{size:30})})]})]})},Ue=({children:s})=>e.jsxs("div",{className:`pointer-events-none absolute left-1/2 top-full mt-2 -translate-x-1/2
                  whitespace-nowrap rounded-md bg-gray-900/90 py-1 px-2 text-xs
                  font-semibold text-sky-200 shadow-lg backdrop-blur`,children:[s,e.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 h-2 w-2 rotate-45 bg-gray-900/90"})]});function D({post:s}){const{t}=_("posts"),{user:n}=K(),r=!!n,a=oe(),[o,f]=c.useState(!1),{fetchProfile:h}=ie(),{data:m,error:p,isLoading:v}=h(s.profile_id),{insertLike:i,deleteLike:j,userLikedPostQuery:d,postLikesQuery:b}=re(),{data:x}=d(s.id,r?n.id:void 0),{data:w=[]}=b(s.id),N=w.length,{getHashtagsByPostId:k}=pe(),{data:C}=k(s.id),[S,A]=c.useState(!1),[I,F]=c.useState(!1),[L,M]=c.useState(!1),[u,y]=c.useState(null),P=t("likes.count",{count:N}),E=je(),H=()=>{E(s.profile_id),A(!0)},T=r?{profile_id:n.id,post_id:s.id}:null,O=!!x,U=()=>{if(!r){a("/login");return}O?j({...x,post_id:s.id,profile_id:n.id}):i(T)},V=()=>{a(`/edit-post/${s.id}`)},B=g=>{y(g),M(!0)},R=()=>{M(!1),y(null)},Q=()=>{if(!r){a("/login");return}F(g=>!g)};return p?e.jsx(X,{error:p.message}):v?e.jsx(le,{}):e.jsxs("div",{className:"bg-gradient-to-l to-gray-800 p-4 rounded-lg shadow-md mb-4 mx-auto max-w-3xl w-full",children:[e.jsx("h3",{className:"text-xl mb-4 font-semibold rounded-lg bg-gradient-to-l to-sky-600 p-4 text-gray-100",children:s.title}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex sm:flex-col flex-row items-center",children:[e.jsxs("div",{onMouseEnter:H,onMouseLeave:()=>A(!1),className:"relative mb-auto",children:[e.jsxs($,{to:`/profile/${m.id}`,children:[e.jsx("h2",{className:"font-bold text-lg text-gray-200",children:m.username}),e.jsx(G,{avatar_url:m.avatar_url,className:"!w-15 !h-15 mx-auto",gender:m.gender,alt:`${m.username}'s avatar`})]}),S&&e.jsx(Te,{profile:m,isLoading:v})]}),e.jsxs("div",{className:"flex sm:h-full sm:justify-end sm:flex-col items-end ml-auto sm:ml-0 gap-3 sm:gap-8 mt-6",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center",children:r&&s.profile_id===n.id&&e.jsx(Ce,{title:"Edit Post",className:"text-yellow-600 hover:text-yellow-700 cursor-pointer",onClick:V,size:32})}),e.jsx("div",{onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),onClick:U,className:"relative cursor-pointer transition-transform duration-200 hover:scale-110",children:e.jsxs(Z.div,{initial:{scale:1},animate:{scale:O?[1,1.4,1]:1},transition:{duration:.4},children:[O||o?e.jsx(Pe,{className:"w-8 h-8 sm:w-10 sm:h-10"}):e.jsx(Se,{className:"w-8 h-8 sm:w-10 sm:h-10"}),o&&e.jsx(Ue,{children:P})]},O?"liked":"not-liked")}),e.jsx(ze,{size:32,title:"Post Comments",onClick:Q,className:`text-gray-400 cursor-pointer hover:text-sky-600 ${I&&"text-sky-600"} sm:!w-10 sm:!h-10`})]})]}),e.jsx("div",{className:"w-full max-w-[600px] flex-1 mx-auto bg-gradient-to-l from-gray-900 rounded-md hidden sm:flex",children:s.images_urls&&s.images_urls.length>0?e.jsx(Y,{modules:[$e,ee,se,te],slidesPerView:1,navigation:!0,pagination:{clickable:!0},scrollbar:{draggable:!0},style:{width:"100%",height:"100%"},children:s.images_urls.map((g,l)=>e.jsx(ae,{children:e.jsx("img",{src:g,alt:`Post image ${l}`,className:"w-full max-h-[500px] object-contain rounded cursor-pointer",style:{maxWidth:"100%",height:"auto",display:"block",margin:"0 auto"},onClick:()=>B(g)})},l))}):e.jsx("p",{className:"font-semibold text-center text-white",children:t("messages.noImages")})}),e.jsx("div",{className:"w-full mx-auto p-0 bg-gradient-to-l from-gray-900 rounded-md block sm:hidden",children:s.images_urls&&s.images_urls.length>0?s.images_urls.length===1?e.jsx("img",{src:s.images_urls[0],alt:"Post image",className:"w-full h-[60vw] min-h-[180px] max-h-[70vh] object-contain rounded cursor-pointer",onClick:()=>B(s.images_urls[0])}):e.jsx(Y,{modules:[ee,se,te],slidesPerView:1,pagination:{clickable:!0},scrollbar:{draggable:!0},style:{minHeight:"60vw",maxHeight:"70vh"},children:s.images_urls.map((g,l)=>e.jsx(ae,{children:e.jsx("img",{src:g,alt:`Post image ${l}`,className:"w-full h-full min-h-[180px] max-h-[70vh] object-contain rounded cursor-pointer",onClick:()=>B(g)})},l))}):e.jsx("p",{className:"font-semibold text-center text-white",children:t("messages.noImages")})})]}),L&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:R,children:e.jsxs("div",{className:"relative max-w-full max-h-full p-4",onClick:g=>g.stopPropagation(),children:[e.jsx("button",{className:"absolute top-1 right-1 text-white hover:text-red-100 cursor-pointer z-10",onClick:R,children:e.jsx(_e,{size:28})}),e.jsx("img",{src:u,alt:"Full-size post image",className:"max-w-[90vw] max-h-[80vh] object-contain rounded-md shadow-lg"})]})}),e.jsx("div",{className:"flex gap-2 mt-4 sm:mt-0 justify-center",children:C&&C.length>0&&C.map(g=>{const l=g.hashtags.name.startsWith("#")?g.hashtags.name.slice(1):g.hashtags.name;return e.jsx($,{to:`/hashtag/${l}`,className:"text-sm text-sky-500 hover:underline",children:g.hashtags.name},g.hashtag_id)})}),e.jsx("p",{className:"text-gray-300 mx-auto rounded-md bg-gray-900 font-semibold border-sky-700 border-1 sm:ml-auto sm:w-140 p-4 my-4",children:s.content}),I&&e.jsx(De,{postId:s.id})]})}function J(){return e.jsxs(W,{className:"bg-gradient-to-l to-gray-800 p-4 rounded-lg shadow-md mb-4 mx-auto max-w-3xl w-full",children:[e.jsx(z,{variant:"rectangular",height:40,className:"mb-4 rounded-lg"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex sm:flex-col flex-row items-center gap-4",children:[e.jsxs(W,{className:"flex flex-col items-center gap-2",children:[e.jsx(z,{variant:"circular",width:60,height:60}),e.jsx(z,{variant:"text",width:80})]}),e.jsxs("div",{className:"flex sm:flex-col items-center justify-end gap-6 mt-4 ml-auto sm:ml-0",children:[e.jsx(z,{variant:"circular",width:40,height:40}),e.jsx(z,{variant:"circular",width:40,height:40}),e.jsx(z,{variant:"circular",width:40,height:40})]})]}),e.jsx(W,{className:"w-full max-w-[600px] mx-auto p-4 bg-gradient-to-l from-gray-900 rounded-md",children:e.jsx(z,{variant:"rectangular",height:300,className:"w-full rounded-md"})})]}),e.jsx(z,{variant:"rectangular",height:80,className:"rounded-md mt-6"})]})}const Ve=()=>{const{t:s}=_(["posts","common"]),{searchPosts:t,infinitePosts:n}=ce(),{register:r,handleSubmit:a,watch:o}=de(),f=o("searchTerm"),{data:h,fetchNextPage:m,hasNextPage:p,isFetchingNextPage:v,isLoading:i,error:j}=n(),{data:d,isLoading:b}=t(f);return i?e.jsx("div",{className:"flex flex-col gap-4 items-center",children:[...Array(7)].map((x,w)=>e.jsx(J,{},w))}):j?e.jsx(X,{error:j.message}):e.jsxs("div",{className:"flex flex-col mx-auto text-center",children:[e.jsxs("form",{onSubmit:a(()=>{}),className:"mb-5 relative flex items-center justify-center",children:[e.jsx("input",{type:"text",...r("searchTerm"),placeholder:s("posts:placeholders.searchPosts"),className:"border rounded-lg p-2 focus:outline-none focus:ring w-full max-w-md"}),e.jsx("div",{className:"absolute right-0 top-9 -translate-y-1/2 hidden lg:flex items-center group",children:e.jsx(q,{label:s("posts:buttons.createPost"),to:"/create-post",iconSize:28,showLabelOnMobile:!1})})]}),e.jsx("div",{className:"flex justify-center items-center lg:hidden mb-4 mr-6",children:e.jsx(q,{label:s("posts:buttons.createPost"),to:"/create-post",iconSize:32,showLabelOnMobile:!0})}),b?e.jsx("div",{className:"flex flex-col gap-4 items-center",children:[...Array(2)].map((x,w)=>e.jsx(J,{},w))}):f&&(d==null?void 0:d.length)>0?d.map(x=>e.jsx(D,{post:x},x.id)):f?e.jsx("p",{className:"col-span-full text-center text-gray-500",children:s("posts:messages.noMatch")}):h&&h.pages.length>0?h.pages.map((x,w)=>e.jsx(ue.Fragment,{children:x.map(N=>e.jsx(D,{post:N},N.id))},w)):e.jsx("p",{className:"col-span-full text-center text-gray-500",children:s("posts:messages.empty")}),p&&e.jsx(ne,{className:"!w-1/2 md:!w-1/3 !font-bold mt-4 !mx-auto hover:!text-sky-600",onClick:()=>m(),disabled:v,children:s(v?"common:loading":"common:loadMore")})]})},as=({profileId:s,posts:t,disableSearch:n,isOwnProfile:r})=>{const{t:a}=_(["posts","common"]),{infiniteUserPosts:o}=ce(),{data:f,fetchNextPage:h,hasNextPage:m,isFetchingNextPage:p,isLoading:v,error:i}=o(s);if(!s&&!n)return e.jsx(Ve,{});if(v)return e.jsx("div",{className:"flex flex-col gap-4 items-center",children:[...Array(3)].map((d,b)=>e.jsx(J,{},b))});if(i)return e.jsx(X,{error:i.message});const j=f?f.pages.flat():[];return t?e.jsx("div",{className:"mx-auto text-center w-full",children:e.jsx("div",{className:"grid grid-cols-1 gap-4",children:t.length>0?t.map(d=>e.jsx(D,{post:d},d.id)):e.jsx("p",{className:"col-span-full text-center text-gray-400",children:a("posts:messages.empty")})})}):e.jsxs("div",{className:"mx-auto text-center w-full",children:[r&&e.jsx("div",{className:"w-full flex justify-end mb-4 relative",children:e.jsx("div",{className:"group flex items-center",children:e.jsx(q,{label:a("posts:buttons.createPost"),to:"/create-post",iconSize:28,showLabelOnMobile:!0})})}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:j.length>0?j.map(d=>e.jsx(D,{post:d},d.id)):e.jsx("p",{className:"col-span-full text-center text-gray-500",children:a("posts:messages.empty")})}),m&&e.jsx(ne,{className:"!w-1/2 md:!w-1/3 !font-bold mt-4 !mx-auto hover:!text-sky-600",onClick:()=>h(),disabled:p,children:a(p?"common:loading":"common:loadMore")})]})};export{as as P};
