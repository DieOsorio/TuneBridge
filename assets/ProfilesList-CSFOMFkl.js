import{j as e}from"./mui-DntPDMdt.js";import{r as l}from"./calendar-DXWKnWXk.js";import{u as N,a as b,A as k,j as _,L as C,P as S,K as E,J as p,E as R}from"./index-BXZZvcoM.js";import{y as $}from"./icons-DoyJ_9a6.js";import{F as L}from"./UserMinusIcon-kiJSbPsH.js";import{S as x}from"./index-BXOMkYts.js";/* empty css                 */function P({title:t,titleId:a,...n},o){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":a},n),t?l.createElement("title",{id:a},t):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const A=l.forwardRef(P),F=["connect","pending","accepted","blocked"],M=({profile:t})=>{const{t:a}=N("profile"),{user:n}=b(),o=!!n,{addConnection:u,deleteConnection:c,userConnections:m,updateConnection:w}=k(),{data:h}=m(t.id),[r,g]=l.useState(""),j=_(),i=o&&n?h==null?void 0:h.find(d=>d.follower_profile_id===n.id&&d.following_profile_id===t.id||d.follower_profile_id===t.id&&d.following_profile_id===n.id):void 0,f=i==null?void 0:i.status,s=F.includes(f)?f:"connect",y=async()=>{if(!o||!n){j("/login");return}s==="connect"?await u({follower_profile_id:n.id,following_profile_id:t.id,status:"pending"}):(s==="pending"||s==="accepted")&&i?await c(i):s==="blocked"&&i&&await w({connection:i,updatedConnection:{status:"accepted"}})},v=()=>s==="pending"?a("connection.cancelRequest"):s==="accepted"?a("connection.disconnect"):s==="blocked"?a("connection.unblock"):null;return e.jsxs("div",{className:"flex flex-col w-60 h-90 text-gray-800 items-center gap-2 border rounded-lg shadow-sm bg-gray-200",style:{contentVisibility:"auto",containIntrinsicSize:"370px"},children:[e.jsx(C,{to:`/profile/${t.id}`,children:e.jsx(S,{avatar_url:t.avatar_url,alt:`${t.username}'s avatar`,className:"object-cover h-50 w-60",list:!0,gender:t.gender})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-semibold text-lg",children:t.username}),t.state&&t.country?e.jsxs("p",{className:"text-gray-500",children:[t.state,", ",t.country]}):t.country?e.jsx("p",{className:"text-gray-500",children:t.country}):t.state?e.jsx("p",{className:"text-gray-500",children:t.state}):null]}),e.jsx("div",{className:"mt-auto py-4",children:e.jsxs("button",{className:"relative font-bold cursor-pointer w-50 bg-gray-500 text-white px-4 py-2 rounded h-10 overflow-hidden flex items-center gap-2",onClick:y,onMouseEnter:()=>g(v()),onMouseLeave:()=>g(""),children:[e.jsxs("span",{className:"pl-1",children:[s==="connect"&&e.jsx(E,{className:"text-green-50 w-4.5 h-4.5"}),s==="accepted"&&!r&&e.jsx(p,{className:"text-green-50 w-4 h-4"}),s==="pending"&&!r&&e.jsx(A,{className:"text-yellow-50 w-4 h-4"}),(s==="pending"||s==="accepted")&&r&&e.jsx(L,{className:"text-red-50 w-4.5 h-4.5"}),s==="blocked"&&!r&&e.jsx($,{className:"text-red-100 w-4 h-4"}),s==="blocked"&&r&&e.jsx(p,{className:"w-4 h-4"})]}),e.jsx("span",{className:`absolute inset-0 text-[13px] flex items-center justify-center transition-opacity duration-400 ${r?"opacity-0":"opacity-100"}`,children:a(`connection.${s}`)}),e.jsx("span",{className:`absolute inset-0 text-[13px] flex items-center justify-center transition-opacity duration-400 ${r?"opacity-100":"opacity-0"}`,children:r||""})]})})]})},T=()=>{const t="#a1a1aa",a="#e4e4e7";return e.jsxs("div",{className:"flex flex-col w-60 h-90 items-center gap-2 rounded-lg shadow-sm bg-gray-200",children:[e.jsx(x,{height:200,width:240,baseColor:t,highlightColor:a}),e.jsxs("div",{className:"text-center w-full px-4",children:[e.jsx(x,{height:20,width:"70%",baseColor:t,highlightColor:a}),e.jsx(x,{height:16,width:"50%",baseColor:t,highlightColor:a})]}),e.jsx("div",{className:"mt-auto py-4 w-full flex justify-center",children:e.jsx(x,{height:40,width:200,borderRadius:8,baseColor:t,highlightColor:a})})]})},J=({profiles:t,isSearching:a=!1,isLoading:n=!1,error:o})=>{const u=a||n;return o?e.jsx(R,{error:o.message}):u?e.jsx("div",{className:"w-full flex flex-wrap justify-center gap-4",children:[...Array(4)].map((c,m)=>e.jsx(T,{},m))}):!t||t.length===0?e.jsx("p",{className:"text-gray-500",children:"No profiles available."}):e.jsx("div",{className:"w-full flex flex-wrap justify-center gap-4",children:t.map(c=>e.jsx(M,{profile:{...c,id:String(c.id)}},String(c.id)))})};export{J as P};
