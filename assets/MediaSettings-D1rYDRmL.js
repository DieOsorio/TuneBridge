import{j as e}from"./mui-DM0ppf3M.js";import{a as L,G as N,j as S,u as k,H as E,c as M,k as w,E as _,I as p,S as A,B as f}from"./index-p55ST7R3.js";import{r as B}from"./calendar-BpW-aEGs.js";import"./reactPlayer-CjHFj7G4.js";import"./icons-70IfXVsJ.js";import"./lottie-DTlWc_fK.js";import"./gsap-Brfk6Bdo.js";import"./filepond-DcLflJls.js";const P=[{value:"youtube",label:"YouTube"},{value:"spotify",label:"Spotify"},{value:"soundcloud",label:"SoundCloud"},{value:"vimeo",label:"Vimeo"},{value:"file",label:"Direct Audio/Video URL"}],H=()=>{const{user:a}=L(),{id:s}=N(),d=S(),{t}=k("music"),{getMediaLink:x,insertMediaLink:b,updateMediaLink:g}=E(),i=!!s,{register:l,handleSubmit:h,reset:m,formState:{errors:n},setValue:o}=M(),{data:r,isLoading:y,error:c}=x(s??"");B.useEffect(()=>{i&&r?(o("url",r.url??""),o("title",r.title??""),o("media_type",r.media_type??"")):m()},[s,r,i,o,m]);const j=async u=>{if(a!=null&&a.id)try{i?await g({id:s??"",updatedLink:{...u,profile_id:a.id}}):await b({...u,profile_id:a.id}),d(`/profile/${a.id}/media`)}catch(v){console.error(v.message)}};return!(a!=null&&a.id)||i&&y?e.jsx(w,{}):c?e.jsx(_,{error:c.message}):e.jsxs("section",{className:"bg-gradient-to-l to-gray-900 p-6 rounded-b-lg shadow-lg max-w-4xl mx-auto",children:[e.jsx("div",{className:"text-center font-semibold",children:e.jsx("h2",{className:"text-2xl text-yellow-600 font-semibold text-center mb-4",children:t(i?"media.titleEdit":"media.titleAdd")})}),e.jsxs("form",{onSubmit:h(j),className:"space-y-4",children:[e.jsx(p,{id:"url",label:t("media.form.url"),placeholder:t("media.form.urlPlaceholder"),register:l,error:n.url}),e.jsx(p,{id:"title",label:t("media.form.title"),placeholder:t("media.form.titlePlaceholder"),maxLength:30,register:l,error:n.title}),e.jsx(A,{id:"media_type",label:t("media.form.type"),options:P,className:"",control:void 0,register:l}),e.jsxs("div",{className:"flex justify-center mt-16 gap-4",children:[e.jsx(f,{type:"submit",className:"!bg-emerald-600 hover:!bg-emerald-700",children:t(i?"media.form.update":"media.form.add")}),i&&e.jsx(f,{type:"button",onClick:()=>d(-1),className:"!bg-gray-600 hover:!bg-gray-700",children:t("media.form.cancel")})]})]})]})};export{H as default};
