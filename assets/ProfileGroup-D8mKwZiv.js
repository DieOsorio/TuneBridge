import{j as s}from"./mui-r_OKU3k3.js";import{h as N,P as j,B as m,u as v,A as w,a as b,J as y,K as k,i as G,E as C,w as u,R as P,g as o,M as _}from"./index-Lh6-Uiv0.js";import{K as A,L}from"./icons-C9PPhvnE.js";import"./filepond-C4Y8_Bzv.js";import"./reactPlayer-P4y7tfwb.js";import"./lottie-Qij33HW6.js";import"./gsap-Brfk6Bdo.js";const M=({groupData:l,isAdmin:i})=>{const t=N(),a=`/group/${l.id}`,e="!bg-sky-700 hover:!bg-sky-800";return s.jsxs("div",{className:"bg-gradient-to-l md:min-w-2xl lg:min-w-4xl from-amber-950 to-amber-800 mb-4 p-4 rounded-b-lg",children:[s.jsxs("div",{className:"flex flex-col gap-6 sm:flex-row sm:items-center",children:[s.jsxs("div",{className:"flex items-center gap-4 flex-grow",children:[s.jsx(j,{avatar_url:l.avatar_url,className:"flex-shrink-0 !w-24 !h-24"}),s.jsxs("div",{className:"flex flex-col gap-2 flex-grow",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white break-words",children:l.name}),s.jsx("p",{className:"text-gray-200 break-words",children:l.bio})]})]}),s.jsxs("div",{className:"flex gap-4 ml-auto items-center",children:[i&&s.jsx(A,{className:"w-8 h-8 text-white cursor-pointer",onClick:()=>t(`${a}/settings`),title:"Group settings"}),s.jsx(L,{className:"w-7 h-7 text-white cursor-pointer",onClick:()=>t(`${a}/notifications`),title:"Group notifications"})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center sm:justify-end mt-6",children:[s.jsxs("div",{children:[s.jsx("div",{className:"mb-4",children:s.jsx(m,{className:e,onClick:()=>t(a),children:"About"})}),s.jsx("div",{className:"sm:mb-4",children:s.jsx(m,{className:e,onClick:()=>t(`${a}/posts`),children:"Posts"})})]}),s.jsxs("div",{children:[s.jsx("div",{className:"mb-4",children:s.jsx(m,{className:e,onClick:()=>t(`${a}/`),children:"vamo'a've"})}),i&&s.jsx("div",{className:"sm:mb-4",children:s.jsx(m,{className:e,onClick:()=>t(`${a}/calendar`),children:"Calendar"})})]})]})]})};function $({group:l,members:i}){var a;const{t}=v("profileGroup");return s.jsxs("div",{className:"space-y-6",children:[((a=l.genres)==null?void 0:a.length)>0&&s.jsx("div",{className:"flex flex-wrap gap-2",children:l.genres.map((e,r)=>s.jsx("span",{className:"px-3 py-1 rounded bg-amber-800 text-sm",children:e},r))}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-3xl font-bold",children:i.length}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Members"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-3xl font-bold",children:"—"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Posts"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-3xl font-bold",children:"—"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Events"})]})]}),s.jsx("div",{className:"max-h-64 overflow-y-auto border border-amber-700 rounded p-3 bg-amber-900 scrollbar-custom",children:i.length===0?s.jsx("p",{className:"text-gray-400 text-center",children:"No members yet."}):s.jsx("ul",{className:"space-y-3",children:i.map(e=>{var r,c;return s.jsxs("li",{className:"flex items-center justify-between bg-gradient-to-r from-amber-950 rounded-2xl p-2 min-h-22 gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4 flex-grow min-w-0",children:[s.jsx(j,{avatar_url:((r=e==null?void 0:e.profiles)==null?void 0:r.avatar_url)||"",className:"!w-15 !h-15 rounded-full flex-shrink-0"}),s.jsxs("div",{className:"flex flex-col text-gray-300 truncate",children:[s.jsx("span",{className:"font-semibold truncate",children:((c=e.profiles)==null?void 0:c.username)||"Unknown"}),s.jsx("p",{className:"text-sm truncate",children:t(`groupMembersList.role.${e.role.toLowerCase()}`,e.role)}),e.roles_in_group&&e.roles_in_group.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.roles_in_group.map((n,p)=>s.jsx("span",{className:"bg-emerald-800 text-white text-xs px-2 py-0.5 rounded-full",children:n},p))})]})]}),s.jsxs("div",{className:"hidden md:flex flex-col items-end text-gray-400 text-xs min-w-[100px]",children:[s.jsxs("span",{children:["Joined: ",e.joinedDate||"N/A"]}),s.jsxs("span",{children:["Status: ",e.status||"Active"]})]})]},e.profile_id)})})})]})}function B(){return s.jsx("div",{children:"GroupPosts"})}function F(){return s.jsx("div",{children:"GroupCalendar"})}function T(){const{groupId:l}=w(),{user:i}=b(),{fetchProfileGroup:t}=y(),{data:a,isLoading:e,error:r}=t(l),{fetchGroupMembers:c}=k(),{data:n,isLoading:p,error:x}=c(l);if(e||p)return s.jsx(G,{});if(r||x)return s.jsx(C,{error:(r==null?void 0:r.message)||(x==null?void 0:x.message)});if(!a)return s.jsx(u,{to:"/",replace:!0});const d=n==null?void 0:n.find(g=>g.profile_id===i.id),h=(d==null?void 0:d.role)==="admin",f=!!d;return s.jsx("div",{className:"flex flex-col min-h-screen text-white",children:s.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-6",children:[s.jsx(M,{groupData:a,isAdmin:h}),s.jsxs(P,{children:[s.jsx(o,{index:!0,element:s.jsx($,{group:a,members:n})}),s.jsx(o,{path:"posts/*",element:s.jsx(B,{groupId:l,isMember:f})}),h&&s.jsxs(s.Fragment,{children:[s.jsx(o,{path:"calendar",element:s.jsx(F,{groupId:l})}),s.jsx(o,{path:"edit",element:s.jsx(_,{group:a,onSave:()=>window.history.back(),onCancel:()=>window.history.back()})})]}),s.jsx(o,{path:"*",element:s.jsx(u,{to:"",replace:!0})})]})]})})}export{T as default};
