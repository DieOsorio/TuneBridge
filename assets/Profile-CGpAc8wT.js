import{j as e,t as B,c as fe,n as Se,g as oe,b as De,e as he,m as le,d as ce,f as de,h as Y,i as ge,k as Z,l as F,o as I,p as Te}from"./mui-B-xP7mtj.js";import{u as v,a as P,b as H,D as Le,d as pe,E as Fe,A as Ie,r as $e,t as Oe,F as je,q as Q,L as K,o as Re,w as We,m as Ae,h as ze,i as Ue,l as Ee,k as Be,j as Ye,e as V,x as He,N as me,R as be,c as C,v as Ve}from"./index-Drs9Rx39.js";import{E as W}from"./ErrorMessage-B2u091H8.js";import{P as Xe}from"./ProfileAvatar-c1RuMNn7.js";import{B as R}from"./Button-CbZ7oUI_.js";import{b as Ze,Q as Ge,r as G,t as ue,u as qe,v as Je,R as Qe,S as Ke,T as et,U as tt,V as st,W as xe,X as nt,Y as at,Z as rt,_ as it,P as ot,$ as lt,a0 as ct}from"./icons-r1d5ly4y.js";import{r as _}from"./filepond-C4Y8_Bzv.js";import{u as dt,h as mt}from"./useCanSendDM-CBjXz14O.js";import{L as ut}from"./LoadingBadge-BLU5luUM.js";import{S as ye}from"./ShinyText-DgKPoZ1S.js";import{R as xt}from"./reactPlayer-xbeEqQf7.js";import{P as ee}from"./PlusButton-BGn71p1w.js";import{S as $}from"./index-cpdcplt_.js";/* empty css                 */import{P as ft}from"./PostsList-tl1SaheJ.js";import ht from"./PostForm-KWO0G61z.js";import{A as gt}from"./AdCard-Bf8VZA42.js";import"./lottie-Qij33HW6.js";import"./index.esm-B1e87uze.js";import"./proxy-A4UlACsI.js";import"./swiper-Ciezsct5.js";import"./Input-DJlOEIMy.js";import"./Textarea-ywiaY8NM.js";import"./ImageUploader-BhF5QjZI.js";import"./ConfirmDialog-DxIiB_6a.js";function pt({otherProfile:n,className:t=""}){const{t:s}=v("profile"),{user:a}=P(),{matchScore:r}=H(),[o,c]=_.useState(null);if(_.useEffect(()=>{a!=null&&a.id&&(n!=null&&n.id)&&r({profileAId:a.id,profileBId:n.id}).then(m=>{c(m)}).catch(m=>{console.error("matchScore error",m)})},[a==null?void 0:a.id,n==null?void 0:n.id]),o===null)return e.jsx(ut,{color:"amber"});const d=Math.round(o*100);return e.jsxs("div",{className:`w-full sm:w-auto flex sm:inline-flex items-center justify-center gap-1 cursor-help select-none ${t}`,title:s("matchScore.title"),children:[e.jsx(Ze,{className:"text-amber-700 text-xl"}),e.jsxs("span",{className:`inline-block w-full text-center px-3 py-1.5 rounded-full text-sm font-semibold whitespace-nowrap ${d>=70?"bg-amber-800 text-white":d>=40?"bg-sky-700 text-white":d>=10?"bg-gray-300 text-gray-900":"bg-gray-800 text-gray-100"}`,children:["Match: ",d,"%"]})]})}function jt(n,t){const s=+B(n)-+B(t);return s<0?-1:s>0?1:s}function bt(n){return fe(n,Date.now())}function yt(n){return t=>{const a=(n?Math[n]:Math.trunc)(t);return a===0?0:a}}function wt(n,t,s){const a=De(),r=(s==null?void 0:s.locale)??a.locale??he,o=jt(n,t);if(isNaN(o))throw new RangeError("Invalid time value");const c=Object.assign({},s,{addSuffix:s==null?void 0:s.addSuffix,comparison:o}),[d,m]=Se(s==null?void 0:s.in,...o>0?[t,n]:[n,t]),l=yt((s==null?void 0:s.roundingMethod)??"round"),h=m.getTime()-d.getTime(),g=h/Y,y=oe(m)-oe(d),u=(h-y)/Y,f=s==null?void 0:s.unit;let p;if(f?p=f:g<1?p="second":g<60?p="minute":g<le?p="hour":u<ce?p="day":u<de?p="month":p="year",p==="second"){const j=l(h/1e3);return r.formatDistance("xSeconds",j,c)}else if(p==="minute"){const j=l(g);return r.formatDistance("xMinutes",j,c)}else if(p==="hour"){const j=l(g/60);return r.formatDistance("xHours",j,c)}else if(p==="day"){const j=l(u/le);return r.formatDistance("xDays",j,c)}else if(p==="month"){const j=l(u/ce);return j===12&&f!=="month"?r.formatDistance("xYears",1,c):r.formatDistance("xMonths",j,c)}else{const j=l(u/de);return r.formatDistance("xYears",j,c)}}function vt(n,t){return wt(n,bt(n),t)}function Nt(n,t){const s=()=>fe(t==null?void 0:t.in,NaN),r=Pt(n);let o;if(r.date){const l=Mt(r.date,2);o=St(l.restDateString,l.year)}if(!o||isNaN(+o))return s();const c=+o;let d=0,m;if(r.time&&(d=Dt(r.time),isNaN(d)))return s();if(r.timezone){if(m=Tt(r.timezone),isNaN(m))return s()}else{const l=new Date(c+d),h=B(0,t==null?void 0:t.in);return h.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),h.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),h}return B(c+d+m,t==null?void 0:t.in)}const E={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},kt=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Ct=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,_t=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Pt(n){const t={},s=n.split(E.dateTimeDelimiter);let a;if(s.length>2)return t;if(/:/.test(s[0])?a=s[0]:(t.date=s[0],a=s[1],E.timeZoneDelimiter.test(t.date)&&(t.date=n.split(E.timeZoneDelimiter)[0],a=n.substr(t.date.length,n.length))),a){const r=E.timezone.exec(a);r?(t.time=a.replace(r[1],""),t.timezone=r[1]):t.time=a}return t}function Mt(n,t){const s=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=n.match(s);if(!a)return{year:NaN,restDateString:""};const r=a[1]?parseInt(a[1]):null,o=a[2]?parseInt(a[2]):null;return{year:o===null?r:o*100,restDateString:n.slice((a[1]||a[2]).length)}}function St(n,t){if(t===null)return new Date(NaN);const s=n.match(kt);if(!s)return new Date(NaN);const a=!!s[4],r=O(s[1]),o=O(s[2])-1,c=O(s[3]),d=O(s[4]),m=O(s[5])-1;if(a)return Ot(t,d,m)?Lt(t,d,m):new Date(NaN);{const l=new Date(0);return!It(t,o,c)||!$t(t,r)?new Date(NaN):(l.setUTCFullYear(t,o,Math.max(r,c)),l)}}function O(n){return n?parseInt(n):1}function Dt(n){const t=n.match(Ct);if(!t)return NaN;const s=q(t[1]),a=q(t[2]),r=q(t[3]);return Rt(s,a,r)?s*ge+a*Y+r*1e3:NaN}function q(n){return n&&parseFloat(n.replace(",","."))||0}function Tt(n){if(n==="Z")return 0;const t=n.match(_t);if(!t)return 0;const s=t[1]==="+"?-1:1,a=parseInt(t[2]),r=t[3]&&parseInt(t[3])||0;return Wt(a,r)?s*(a*ge+r*Y):NaN}function Lt(n,t,s){const a=new Date(0);a.setUTCFullYear(n,0,4);const r=a.getUTCDay()||7,o=(t-1)*7+s+1-r;return a.setUTCDate(a.getUTCDate()+o),a}const Ft=[31,null,31,30,31,30,31,31,30,31,30,31];function we(n){return n%400===0||n%4===0&&n%100!==0}function It(n,t,s){return t>=0&&t<=11&&s>=1&&s<=(Ft[t]||(we(n)?29:28))}function $t(n,t){return t>=1&&t<=(we(n)?366:365)}function Ot(n,t,s){return t>=1&&t<=53&&s>=0&&s<=6}function Rt(n,t,s){return n===24?t===0&&s===0:s>=0&&s<60&&t>=0&&t<60&&n>=0&&n<25}function Wt(n,t){return t>=0&&t<=59}const At={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},zt=(n,t,s)=>{let a;const r=At[n];return typeof r=="string"?a=r:t===1?a=r.one:a=r.other.replace("{{count}}",t.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"en "+a:"hace "+a:a},Ut={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},Et={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Bt={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Yt={date:Z({formats:Ut,defaultWidth:"full"}),time:Z({formats:Et,defaultWidth:"full"}),dateTime:Z({formats:Bt,defaultWidth:"full"})},Ht={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},Vt={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},Xt=(n,t,s,a)=>t.getHours()!==1?Vt[n]:Ht[n],Zt={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},Gt={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},qt={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},Jt={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},Qt={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},Kt={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},es=(n,t)=>Number(n)+"º",ts={ordinalNumber:es,era:F({values:Zt,defaultWidth:"wide"}),quarter:F({values:Gt,defaultWidth:"wide",argumentCallback:n=>Number(n)-1}),month:F({values:qt,defaultWidth:"wide"}),day:F({values:Jt,defaultWidth:"wide"}),dayPeriod:F({values:Qt,defaultWidth:"wide",formattingValues:Kt,defaultFormattingWidth:"wide"})},ss=/^(\d+)(º)?/i,ns=/\d+/i,as={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},rs={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},is={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},os={any:[/1/i,/2/i,/3/i,/4/i]},ls={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},cs={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},ds={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},ms={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},us={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},xs={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},fs={ordinalNumber:Te({matchPattern:ss,parsePattern:ns,valueCallback:function(n){return parseInt(n,10)}}),era:I({matchPatterns:as,defaultMatchWidth:"wide",parsePatterns:rs,defaultParseWidth:"any"}),quarter:I({matchPatterns:is,defaultMatchWidth:"wide",parsePatterns:os,defaultParseWidth:"any",valueCallback:n=>n+1}),month:I({matchPatterns:ls,defaultMatchWidth:"wide",parsePatterns:cs,defaultParseWidth:"any"}),day:I({matchPatterns:ds,defaultMatchWidth:"wide",parsePatterns:ms,defaultParseWidth:"any"}),dayPeriod:I({matchPatterns:us,defaultMatchWidth:"any",parsePatterns:xs,defaultParseWidth:"any"})},hs={code:"es",formatDistance:zt,formatLong:Yt,formatRelative:Xt,localize:ts,match:fs,options:{weekStartsOn:1,firstWeekContainsDate:1}};function gs(n){if(!n)return null;const t=Nt(n),s=Le.language.startsWith("es")?hs:he;return vt(t,{locale:s,addSuffix:!0})}function ps({isOwnProfile:n,profileData:t}){const{t:s}=v("profile"),{user:a}=P(),r=pe(),{data:o}=Fe(t.id),{totalUnreadMessages:c}=Ie(),{data:d,isLoading:m}=c(a==null?void 0:a.id),{findConversation:l,createConversation:h}=$e(),{addParticipant:g}=Oe(),{userNotifications:y,notificationsRealtime:u}=je();u(a.id);const{data:f,isLoading:p}=y(a.id),{connectionBetweenProfiles:j,addConnection:M,updateConnection:S,deleteConnection:N}=Q(),{data:i,isLoading:A}=j(a==null?void 0:a.id,t.id),{canSend:X}=dt(t.id),[L,z]=_.useState(!1),[D,k]=_.useState(!1),[x,te]=_.useState(null),se=(f==null?void 0:f.filter(b=>!b.is_read).length)||0,ve=!!(o!=null&&o.show_last_seen&&t.last_seen),Ne=()=>{L||mt({myProfileId:a.id,otherProfile:t,findConversation:l,createConversation:h,addParticipant:g,navigate:r,setLoading:z})},ne=async()=>{await M({follower_profile_id:a.id,following_profile_id:t.id,status:"pending"})},U=async()=>{i&&await N(i)},ke=async()=>{i?await S({connection:i,updatedConnection:{status:"blocked"}}):await M({follower_profile_id:a.id,following_profile_id:t.id,status:"blocked"})},ae=async()=>{i&&await S({connection:i,updatedConnection:{status:"accepted"}})};_.useEffect(()=>{if(!D)return;const b=T=>{T.target.closest(".profile-connection-menu")||k(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[D]);const Ce=b=>{const T="text-white text-lg mr-1 drop-shadow-[0_0_2px_rgba(255,255,255,0.5)]",Me="text-gray-300 text-lg mr-1 drop-shadow-[0_0_2px_rgba(255,255,255,0.2)]";return b==="accepted"?e.jsx(tt,{className:T}):b==="pending"?e.jsx(st,{className:T}):b==="blocked"&&i.follower_profile_id===a.id?e.jsx(xe,{className:T}):b==="blocked"&&i.follower_profile_id===t.id?e.jsx(xe,{className:Me}):e.jsx(nt,{className:T})},_e=(i==null?void 0:i.status)==="accepted",Pe=(i==null?void 0:i.status)==="pending",re=(i==null?void 0:i.status)==="blocked"&&i.follower_profile_id===a.id,ie=(i==null?void 0:i.status)==="blocked"&&i.follower_profile_id===t.id;return e.jsxs("div",{className:"bg-gradient-to-l from-gray-900 to-gray-950 mb-4 p-4 rounded-b-lg",children:[e.jsxs("div",{className:"flex flex-col gap-6 sm:flex-row sm:items-center",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-grow",children:[e.jsx(K,{to:`/profile/${t.id}`,children:e.jsx(Xe,{avatar_url:t.avatar_url,className:"flex-shrink-0 !w-24 !h-24",gender:t.gender})}),e.jsxs("div",{className:"flex flex-col gap-2 flex-grow",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-100 break-words",children:t.username}),e.jsx("p",{className:"text-gray-400 break-words",children:t.bio})]})]}),e.jsxs("div",{className:"flex gap-4 ml-auto sm:mb-auto items-center relative",children:[!n&&e.jsxs(e.Fragment,{children:[X&&e.jsx(at,{className:"w-8 h-8 text-white cursor-pointer",onClick:Ne,disabled:L,title:s("profile.titles.startChat")}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{className:"text-white hover:text-sky-400 p-2 rounded-full focus:outline-none",onClick:()=>k(b=>!b),"aria-label":"Connection options",children:e.jsx(Ge,{size:24})}),D&&e.jsxs("div",{className:"absolute right-0 top-10 z-20 bg-gray-900 border border-sky-700 rounded shadow-lg py-1 w-44 flex flex-col min-w-[150px] profile-connection-menu",children:[A?e.jsx("span",{className:"px-4 py-2 text-gray-400 text-xs flex items-center gap-2",children:s("connection.loading")}):re?e.jsxs("button",{onClick:()=>{ae(),k(b=>!b)},className:"px-4 py-2 text-left hover:bg-gray-800 text-sm text-yellow-600 flex items-center gap-2",children:[e.jsx(G,{}),s("connection.unblock")]}):ie?e.jsxs("span",{className:"px-4 py-2 text-red-400 text-xs flex items-center gap-2",children:[e.jsx(ue,{}),s("connection.blockedByOther")]}):_e?e.jsxs("button",{onClick:()=>{U(),k(b=>!b)},className:"px-4 py-2 text-left hover:bg-gray-800 text-sm text-gray-300 flex items-center gap-2",children:[e.jsx(G,{}),s("connection.disconnect")]}):Pe?e.jsxs("button",{onClick:()=>{U(),k(b=>!b)},className:"px-4 py-2 text-left hover:bg-gray-800 text-sm text-yellow-400 flex items-center gap-2 group",onMouseEnter:()=>te("disconnect"),onMouseLeave:()=>te(null),children:[x==="disconnect"?e.jsx(G,{}):e.jsx(qe,{}),s(x==="disconnect"?"connection.disconnect":"connection.pending")]}):e.jsxs("button",{onClick:()=>{ne(),k(b=>!b)},className:"px-4 py-2 text-left hover:bg-gray-800 text-sm text-green-600 flex items-center gap-2",children:[e.jsx(Je,{}),s("connection.connect")]}),!ie&&!re&&e.jsxs("button",{onClick:()=>{ke(),k(b=>!b)},className:"px-4 py-2 text-left hover:bg-gray-800 text-sm text-red-400 border-t border-sky-800 flex items-center gap-2",children:[e.jsx(ue,{}),s("connection.block")]})]})]})]}),n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx(Qe,{className:"w-8 h-8 text-white cursor-pointer",onClick:()=>r("/chat"),title:s("profile.titles.chat")}),!m&&(d==null?void 0:d.total)>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full px-1.5",children:d.total})]}),e.jsx(Ke,{className:"w-8 h-8 text-white cursor-pointer",onClick:()=>{r("/settings")},title:s("profile.titles.settings")}),e.jsxs("div",{className:"relative",children:[e.jsx(et,{className:"w-7 h-7 text-white cursor-pointer",onClick:()=>r(`/profile/${t.id}/notifications`),title:s("profile.titles.notifications")}),!p&&se>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full px-1.5",children:se})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center sm:justify-end mt-6",children:[!n&&e.jsxs("div",{className:"w-full mx-auto md:mx-0 md:!mr-auto mb-3 flex flex-col items-start gap-6 mt-3",children:[e.jsxs("div",{className:"flex flex-col items-stretch w-full md:flex-row gap-3 md:gap-6",children:[!A&&e.jsxs("button",{title:i?i.status==="accepted"?s("connection.disconnect"):i.status==="pending"?s("connection.cancelRequest"):i.status==="blocked"?i.follower_profile_id===a.id?s("connection.unblock"):s("connection.blockedByOther"):"":s("connection.connect"),onClick:()=>{if(!i)return ne();if(i.status==="pending"||i.status==="accepted")return U();if(i.status==="blocked"&&i.follower_profile_id===a.id)return ae()},className:`w-full sm:w-auto inline-flex items-center justify-center gap-1 px-3.5 py-1.5 rounded-full text-sm font-semibold whitespace-nowrap transition
                    ${i?i.status==="accepted"?"bg-emerald-700 text-white hover:bg-emerald-800":i.status==="pending"?"bg-yellow-600 text-white hover:bg-yellow-700":i.status==="blocked"&&i.follower_profile_id===a.id?"bg-red-700 text-white hover:bg-red-800":i.status==="blocked"&&i.follower_profile_id===t.id?"bg-gray-600 text-gray-200 cursor-not-allowed":"bg-gray-700 text-white":"bg-sky-700 text-white hover:bg-sky-800"}
                    ${(i==null?void 0:i.status)==="blocked"&&i.follower_profile_id===t.id?"pointer-events-none":"cursor-pointer"}
                  `,disabled:(i==null?void 0:i.status)==="blocked"&&i.follower_profile_id===t.id,children:[Ce(i==null?void 0:i.status),i?i.status==="accepted"?s("connection.accepted"):i.status==="pending"?s("connection.pending"):i.status==="blocked"&&i.follower_profile_id===a.id?s("connection.blocked"):i.status==="blocked"&&i.follower_profile_id===t.id?s("connection.blockedByOther"):"":s("connection.connect")]}),e.jsx("div",{children:e.jsx(pt,{otherProfile:t})})]}),ve&&e.jsx("p",{className:"text-xs mx-auto sm:mx-0 sm:mr-auto text-gray-400",children:s("profile.lastSeen",{time:gs(t.last_seen)})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsx(R,{onClick:()=>r(`/profile/${t.id}`),children:s("profile.navigation.about")})}),e.jsx("div",{className:"sm:mb-4",children:e.jsx(R,{onClick:()=>r(`/profile/${t.id}/ads`),children:s("profile.navigation.ads")})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsx(R,{onClick:()=>r(`/profile/${t.id}/posts`),children:s("profile.navigation.posts")})}),e.jsx("div",{className:"sm:mb-4",children:e.jsx(R,{starBorder:!0,onClick:()=>r(`/profile/${t.id}/groups`),className:"!bg-amber-800 hover:!bg-amber-900",children:s("profile.navigation.groups")})})]})]})]})}function js({profileData:n}){const{t}=v("profile"),{privacyOthers:s}=Re(),{data:a={}}=s(n.id);function r(o){const c=new Date(o),d=new Date;let m=d.getFullYear()-c.getFullYear();const l=d.getMonth()-c.getMonth();return(l<0||l===0&&d.getDate()<c.getDate())&&m--,m}return e.jsx("div",{className:"flex flex-col items-center",children:e.jsxs("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-12 gap-y-4 text-lg text-gray-300",children:[n.firstname&&e.jsxs("li",{className:"flex items-center",children:[e.jsxs("span",{className:"font-semibold w-28 text-gray-500",children:[t("profile.data.firstname"),":"]}),e.jsx("span",{children:n.firstname})]}),n.lastname&&e.jsxs("li",{className:"flex items-center",children:[e.jsxs("span",{className:"font-semibold w-28 text-gray-500",children:[t("profile.data.lastname"),":"]}),e.jsx("span",{children:n.lastname})]}),n.country&&e.jsxs("li",{className:"flex items-center",children:[e.jsxs("span",{className:"font-semibold w-28 text-gray-500",children:[t("profile.data.country"),":"]}),e.jsx("span",{children:n.country})]}),n.state&&e.jsxs("li",{className:"flex items-center",children:[e.jsxs("span",{className:"font-semibold w-28 text-gray-500",children:[t("profile.data.state"),":"]}),e.jsx("span",{children:n.state})]}),n.neighborhood&&e.jsxs("li",{className:"flex items-center",children:[e.jsxs("span",{className:"font-semibold w-28 text-gray-500",children:[t("profile.data.neighborhood"),":"]}),e.jsx("span",{children:n.neighborhood})]}),n.gender&&e.jsxs("li",{className:"flex items-center",children:[e.jsxs("span",{className:"font-semibold w-28 text-gray-500",children:[t("profile.data.gender"),":"]}),e.jsx("span",{children:t(`edit.placeholders.genderOptions.${n.gender.toLowerCase()}`)})]}),n.birthdate&&e.jsxs("li",{className:"flex items-center",children:[e.jsxs("span",{className:"font-semibold w-28 text-gray-500",children:[t("profile.data.age"),":"]}),e.jsxs("span",{children:[r(n.birthdate)," ",t("profile.data.years")]})]}),a.show_email&&n.email&&e.jsxs("li",{className:"flex items-center",children:[e.jsxs("span",{className:"font-semibold w-28 text-gray-500",children:[t("profile.data.email"),":"]}),e.jsx("span",{children:n.email})]})]})})}const bs=({role:n,data:t})=>{const{t:s}=v("music");return!t||t.length===0?e.jsx("p",{className:"text-gray-400 mt-4 italic text-center",children:s("roles.noData")}):e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-xl font-bold mb-4 text-sky-200 text-center",children:s("roles.detailsTitle",{role:s(`roles.${n.role.toLowerCase()}`)})}),e.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(a=>e.jsxs("li",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4 shadow-sm",children:[n.role==="Instrumentalist"&&e.jsxs(e.Fragment,{children:[e.jsx(w,{label:s("fields.instrument"),value:a.instrument}),e.jsx(w,{label:s("fields.yearsOfExperience"),value:a.years_of_experience}),e.jsx(w,{label:s("fields.level"),value:s(`levels.${a.level.toLowerCase()}`)})]}),n.role==="Singer"&&e.jsxs(e.Fragment,{children:[e.jsx(w,{label:s("fields.voiceType"),value:a.voice_type}),e.jsx(w,{label:s("fields.musicGenre"),value:a.music_genre}),e.jsx(w,{label:s("fields.level"),value:s(`levels.${a.level.toLowerCase()}`)})]}),n.role==="DJ"&&e.jsxs(e.Fragment,{children:[e.jsx(w,{label:s("fields.eventsPlayed"),value:a.events_played}),e.jsx(w,{label:s("fields.preferredGenres"),value:a.preferred_genres}),e.jsx(w,{label:s("fields.level"),value:s(`levels.${a.level.toLowerCase()}`)})]}),n.role==="Producer"&&e.jsxs(e.Fragment,{children:[e.jsx(w,{label:s("fields.productionType"),value:a.production_type}),e.jsx(w,{label:s("fields.yearsOfExperience"),value:a.years_of_experience}),e.jsx(w,{label:s("fields.level"),value:s(`levels.${a.level.toLowerCase()}`)})]}),n.role==="Composer"&&e.jsxs(e.Fragment,{children:[e.jsx(w,{label:s("fields.compositionStyle"),value:a.composition_style}),e.jsx(w,{label:s("fields.yearsOfExperience"),value:a.years_of_experience}),e.jsx(w,{label:s("fields.level"),value:s(`levels.${a.level.toLowerCase()}`)})]})]},a.id))})]})},w=({label:n,value:t})=>e.jsxs("p",{className:"text-sm text-gray-300 mb-1",children:[e.jsxs("span",{className:"font-semibold text-gray-200",children:[n,": "]}),"  ",t||"N/A"]});function ys({role:n,expandedRole:t,handleRoleClick:s}){const{t:a}=v("music"),r=t===n.id;return e.jsxs("div",{className:`p-5 rounded-xl shadow-md border transition-all duration-300 cursor-pointer text-white text-center select-none
        ${r?"border-sky-500 bg-sky-800/30":"border-gray-700 bg-gray-800 hover:border-sky-500 hover:bg-gray-700/60"}
      `,onClick:()=>s(n),children:[e.jsx("span",{className:"text-lg font-semibold tracking-wide",children:a(`roles.${n.role.toLowerCase()}`)}),e.jsx("div",{className:"mt-2 flex justify-center",children:e.jsx(rt,{className:`text-gray-400 transition-transform duration-200 ${r?"rotate-180":""}`})})]})}const ws=({profileId:n})=>{const{user:t}=P(),{t:s}=v("music"),{userMediaLinks:a}=We(),{data:r=[]}=a(n),o=pe(),c=t.id===n,d=l=>{const h=l.match(/spotify\.com\/(track|playlist|album)\/([a-zA-Z0-9]+)/);if(!h)return null;const[g,y,u]=h;return`https://open.spotify.com/embed/${y}/${u}`},m=r.slice(0,2);return e.jsxs("section",{className:"mb-10",children:[c&&e.jsx(ee,{label:s("media.actions.add"),to:"/media/create"}),e.jsx("ul",{className:"space-y-4 text-center",children:m.map(l=>e.jsxs("li",{className:"shadow-sm p-4 rounded-lg bg-gradient-to-l to-gray-800",children:[e.jsx("p",{className:"font-medium mb-2 text-center",children:l.title}),l.media_type==="spotify"?e.jsx("iframe",{src:d(l.url),width:"100%",height:"80",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",className:"rounded w-full max-w-full"}):e.jsx("div",{className:"aspect-video bg-black rounded overflow-hidden",children:e.jsx(xt,{url:l.url,controls:!0,width:"100%",height:"100%",style:{maxWidth:"100%"}})})]},l.id))}),r.length>2&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx(R,{onClick:()=>o(`/media/${n}`),className:"!text-emerald-600 !text-2xl hover:!text-emerald-700 !bg-transparent",children:s("media.actions.seeMore")})})]})},vs=({profileId:n})=>{var L,z,D,k;const{t}=v("music"),{user:s}=P(),[a,r]=_.useState(),{fetchRoles:o}=Ae(),{data:c,isLoading:d,error:m}=o(n),{fetchInstruments:l}=ze(),{data:h}=l(a),{fetchSinger:g}=Ue(),{data:y}=g(a),{fetchComposer:u}=Ee(),{data:f}=u(a),{fetchProducer:p}=Be(),{data:j}=p(a),{fetchDj:M}=Ye(),{data:S}=M(a),[N,i]=_.useState(null),A=s.id===n,X=x=>{N===x.id?i(null):(i(x.id),(x.role==="Instrumentalist"||x.role==="Singer"||x.role==="DJ"||x.role==="Producer"||x.role==="Composer")&&r(x.id))};return d?e.jsx(V,{}):m?e.jsx(W,{error:m.message||t("errors.fetch")}):e.jsxs("div",{className:"bg-gray-900 p-6 rounded-lg shadow-md w-full",children:[e.jsx("div",{className:"flex items-center justify-center font-semibold gap-3 mb-6",children:e.jsx(ye,{text:t("roles.title"),speed:3,className:"text-3xl tracking-wide"})}),e.jsx(ws,{profileId:n}),A&&e.jsx(ee,{label:t("roles.addRole"),to:"/settings/music"}),c.length===0?e.jsx("p",{className:"text-gray-400 text-center",children:t("roles.none")}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(x=>e.jsx(ys,{role:x,expandedRole:N,handleRoleClick:X},x.id))}),N&&e.jsxs("div",{className:"mt-6",children:[e.jsx(bs,{role:c.find(x=>x.id===N),data:((L=c.find(x=>x.id===N))==null?void 0:L.role)==="Instrumentalist"?h:((z=c.find(x=>x.id===N))==null?void 0:z.role)==="Singer"?y:((D=c.find(x=>x.id===N))==null?void 0:D.role)==="DJ"?S:((k=c.find(x=>x.id===N))==null?void 0:k.role)==="Producer"?j:f}),e.jsxs("div",{className:"flex justify-center mt-4 cursor-pointer",onClick:()=>i(null),children:[e.jsx(it,{className:"text-gray-500"})," "]})]})]})]})};function Ns(){return e.jsxs("div",{className:"relative flex flex-col w-35 h-65 bg-gray-100 rounded-lg shadow-sm overflow-hidden",children:[e.jsx($,{height:160,width:"100%"}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[e.jsx($,{circle:!0,width:24,height:24}),e.jsx($,{circle:!0,width:24,height:24})]}),e.jsxs("div",{className:"flex flex-col gap-1 p-2 grow justify-end",children:[e.jsx($,{height:18,width:"70%"}),e.jsx($,{height:14,width:"50%"})]})]})}const ks=({profileId:n,connection:t,ownProfile:s})=>{const{t:a}=v("profile"),{user:r}=P(),o=r==null?void 0:r.id,{fetchProfile:c}=H(),{updateConnection:d,deleteConnection:m}=Q(),{data:l,isLoading:h,error:g}=c(n),y=t.status==="pending"&&t.following_profile_id===o;t.status==="accepted"&&(t.following_profile_id===o||t.follower_profile_id);const u=o===t.follower_profile_id||o===t.following_profile_id,[f,p]=_.useState(!1);if(h)return e.jsx(Ns,{});if(g)return e.jsx(W,{error:g.message||"Error loading profile."});if(!l)return null;const j=async()=>{if(!t.id)return console.warn("Connection ID is missing");await d({connection:t,updatedConnection:{status:"accepted"}})},M=async()=>{if(!t.id)return console.warn("Connection ID is missing");await m(t)};return e.jsxs("div",{className:"relative flex flex-col w-35 h-65 text-gray-800 bg-gray-100 items-center gap-2 border rounded-lg shadow-sm",children:[t.id&&e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 z-10",children:[y&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:j,className:"text-green-600 hover:text-green-800",children:e.jsx(ot,{})}),e.jsx("button",{onClick:M,className:"text-red-600 hover:text-red-800",children:e.jsx(lt,{})})]}),u&&!y&&s&&e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>p(S=>!S),className:"text-gray-950 hover:text-orange-700 cursor-pointer","aria-label":a("connection.connectionCard.options"),children:e.jsx(ct,{title:a("connection.connectionCard.options")})}),f&&e.jsx("div",{className:"absolute right-0 mt-2 w-32 bg-gray-900 border rounded shadow-lg z-50",children:e.jsx("button",{onClick:M,className:"block w-full cursor-pointer text-center px-4 py-2 text-red-500 hover:text-red-600",children:t.status==="accepted"?a("connection.connectionCard.disconnect"):a("connection.connectionCard.delete")})})]})]}),e.jsx(K,{to:`/profile/${n}`,children:e.jsx("img",{src:l.avatar_url||"/default-avatar.png",alt:`${l.username}'s avatar`,className:"w-60 h-40 object-cover rounded-t-lg"})}),e.jsxs("div",{className:"text-center px-2 pb-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:l.username}),l.state||l.country?e.jsx("p",{className:"text-gray-400 text-sm",children:[l.state,l.country].filter(Boolean).join(", ")}):null]})]})};function J({checkStatus:n,profileId:t,maxVisible:s}){const{user:a}=P(),{t:r}=v("ui",{keyPrefix:"connections"}),{userConnections:o}=Q(),{data:c}=o(t),d=t===a.id;if(!["accepted","pending","blocked"].includes(n)||!c)return null;const m=c.filter(u=>n==="accepted"?u.status==="accepted":n==="blocked"?u.status==="blocked":n==="pending"?u.status==="pending"&&u.following_profile_id===t:!1),l=u=>u.following_profile_id===t?u.follower_profile_id:u.following_profile_id,h=n==="accepted"?r("title"):null,g=n==="accepted",y=s?m.slice(0,s):m;return e.jsxs("div",{className:"max-w-4xl mx-auto w-full bg-gradient-to-l from-gray-900 py-4 flex flex-wrap justify-center rounded-lg gap-4",children:[e.jsx("div",{className:"w-full flex items-center justify-between px-4 mb-2",children:e.jsxs("h2",{className:"text-xl font-bold text-white",children:[h,g&&e.jsxs("span",{className:"ml-2 text-sky-400 text-lg font-semibold",children:["(",m.length,")"]})]})}),y.length>0?y.map(u=>e.jsx(ks,{connection:u,profileId:l(u),ownProfile:d},u.id)):e.jsx("div",{className:"text-gray-400",children:r(n==="pending"?"noPendingConnections":"noConnections")}),s&&m.length>s&&e.jsx(K,{to:`/profile/${t}/connections`,className:"w-full text-center text-sky-400 hover:underline mt-2 block",children:r("viewAll")})]})}function Cs({profileId:n}){const{t}=v("ads"),{user:s}=P(),{fetchInfiniteByUser:a}=He(),{data:r,fetchNextPage:o,hasNextPage:c,isFetchingNextPage:d,isLoading:m,error:l}=a(n),h=n===s.id;if(m)return e.jsx(V,{});if(l)return e.jsx(W,{error:l.message});const g=r?r.pages.flat():[];return e.jsxs("div",{className:"mx-auto text-center w-full",children:[e.jsx("h2",{className:"text-center font-semibold mb-4",children:e.jsx(ye,{text:t("profileAds.title"),speed:3,className:"text-3xl tracking-wide"})}),h&&e.jsx(ee,{label:t("adsPage.buttons.createAd"),to:"/ads/new",showLabelOnMobile:!0}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:g.length>0?g.map(y=>e.jsx(gt,{ad:y,publisherId:n},y.id)):e.jsx("p",{className:"col-span-full text-center text-gray-400",children:t("profileAds.empty")})}),c&&e.jsx(Button,{className:"!w-1/2 md:!w-1/3 !font-bold mt-4 !mx-auto hover:!text-sky-600",onClick:()=>o(),disabled:d,children:t(d?"profileAds.buttons.loading":"profileAds.buttons.loadMore")})]})}function _s({profileId:n}){const{t}=v("profile",{keyPrefix:"notifications"}),{userNotifications:s,notificationsRealtime:a,updateNotification:r}=je(),{data:o=[],isLoading:c,error:d}=s(n);a(n);const m=o.map(f=>f.from_user_id).filter(Boolean).sort(),{profilesMap:l}=H(),{data:h={}}=l(m),g=f=>{var p,j;return((p=h[f])==null?void 0:p.username)||((j=h[f])==null?void 0:j.firstname)||"Someone"},y=async f=>{f.is_read||await r({...f,is_read:!0})};if(c)return e.jsx(V,{});if(d)return e.jsx(W,{error:d.message});if(o.length===0)return e.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:t("noNotifications")});const u=f=>t(f.type,{user:g(f.from_user_id)});return e.jsx("ul",{className:`divide-y max-w-4xl mx-auto divide-gray-700
                 p-4 bg-gradient-to-l to-gray-900 rounded-lg shadow-md`,children:o.map(f=>e.jsxs("li",{onClick:()=>y(f),className:`py-2 cursor-pointer hover:bg-gray-800 transition
                      ${f.is_read?"text-gray-400":"text-white font-semibold"}`,children:["• ",u(f)]},f.id))})}function Ps({profileId:n}){const{t}=v("profile"),s="cursor-pointer px-4 py-2 text-sm sm:text-base font-semibold rounded-lg transition-all",a=`${s} border-b-2 border-sky-600 text-white shadow-lg`,r=`${s} text-gray-300 hover:text-sky-600`;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gradient-to-b from-gray-800 to-gray-950 rounded-t-lg",children:e.jsxs("nav",{className:"flex justify-center space-x-8 py-3",children:[e.jsx(me,{end:!0,to:`/profile/${n}/notifications`,className:({isActive:o})=>o?a:r,children:t("profile.internNav.notifications")}),e.jsx(me,{to:`/profile/${n}/notifications/pending`,className:({isActive:o})=>o?a:r,children:t("profile.internNav.pending")})]})}),e.jsxs(be,{children:[e.jsx(C,{index:!0,element:e.jsx(_s,{profileId:n})}),e.jsx(C,{path:"pending",element:e.jsx(J,{profileId:n,checkStatus:"pending"})})]})]})}function Ks(){const{t:n}=v("profileGroup",{keyPrefix:"userGroups"}),{identifier:t}=Ve(),{user:s,loading:a}=P(),{fetchProfile:r}=H(),{data:o,isLoading:c,error:d}=r(t);if(a||c)return e.jsx(V,{});if(d)return e.jsx(W,{error:d.message});if(!o)return null;const m=s.id===t,l=()=>e.jsxs(e.Fragment,{children:[e.jsx(js,{profileData:o}),e.jsx(vs,{profileId:o.id}),e.jsx(J,{profileId:o.id,checkStatus:"accepted",maxVisible:4})]}),h=()=>e.jsx(ft,{profileId:o.id,isOwnProfile:m}),g=()=>e.jsx(ht,{}),y=()=>e.jsx("p",{className:"text-center text-gray-400",children:n("userGroupsComing")}),u=()=>e.jsx(Cs,{profileId:o.id});return e.jsx("div",{className:"flex flex-col min-h-screen text-white",children:e.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[e.jsx(ps,{profileData:o,isOwnProfile:m}),e.jsxs(be,{children:[e.jsx(C,{index:!0,element:e.jsx(l,{})}),e.jsx(C,{path:"posts",element:e.jsx(h,{})}),e.jsx(C,{path:"connections",element:e.jsx(J,{profileId:o.id,checkStatus:"accepted"})}),m&&e.jsx(C,{path:"create",element:e.jsx(g,{})}),e.jsx(C,{path:"groups",element:e.jsx(y,{})}),e.jsx(C,{path:"ads",element:e.jsx(u,{})}),m&&e.jsx(C,{path:"notifications/*",element:e.jsx(Ps,{profileId:o.id})})]})]})})}export{Ks as default};
