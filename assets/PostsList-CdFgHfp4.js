import{j as e,B as de}from"./mui-DM0ppf3M.js";import{a as Y,D as ke,F as ye,j as me,L as R,u as A,a7 as xe,P as ee,b as ue,a8 as Ce,c as he,k as Pe,h as _e,g as Se,a6 as Le,a9 as ze,E as se,a5 as ge}from"./index-p55ST7R3.js";import{r as c,R as Me}from"./calendar-BpW-aEGs.js";import{aa as Ee,ab as $e,ac as Ae,a9 as Ie,ad as Oe,ae as Re,af as Fe,ag as Be,ah as De,ai as Te,A as Ge}from"./icons-70IfXVsJ.js";import{u as He,h as Ue}from"./useCanSendDM-Jd9h9vgr.js";import{S as j}from"./index-CpFbDMuT.js";/* empty css                 */import{m as te}from"./proxy-B8wBTftU.js";import{S as ne,N as Ve,P as ie,a as re,Z as le,b as oe}from"./swiper-CzGqEt3B.js";import{P as K}from"./PlusButton-Db0q8DXx.js";const Qe=()=>{const s="#a1a1aa",t="#e4e4e7";return e.jsxs(te.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"absolute z-50 p-4 rounded-lg shadow-md bg-neutral-100 dark:bg-neutral-900 w-64 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(j,{circle:!0,width:40,height:40,baseColor:s,highlightColor:t}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx(j,{width:80,height:10,baseColor:s,highlightColor:t}),e.jsx(j,{width:100,height:8,baseColor:s,highlightColor:t})]})]}),e.jsxs("div",{className:"space-y-1 mb-3",children:[e.jsx(j,{height:8,width:"100%",baseColor:s,highlightColor:t}),e.jsx(j,{height:8,width:"90%",baseColor:s,highlightColor:t}),e.jsx(j,{height:8,width:"80%",baseColor:s,highlightColor:t}),e.jsx(j,{height:8,width:"70%",baseColor:s,highlightColor:t})]}),e.jsxs("div",{className:"flex justify-end items-center gap-5 pt-2",children:[e.jsx(j,{width:30,height:30,baseColor:s,highlightColor:t}),e.jsx(j,{width:30,height:30,baseColor:s,highlightColor:t}),e.jsx(j,{width:30,height:30,baseColor:s,highlightColor:t})]})]})};function ce(s){return s.username!==void 0}const We=({profile:s,isLoading:t,isGroup:a})=>{const{user:i}=Y(),n=!!i,{findConversation:r,createConversation:d}=ke(),{addParticipant:x}=ye(),{canSend:g,loading:b}=He(s.id),[P,l]=c.useState(!1),v=t||b,o=me(),k=n&&(i==null?void 0:i.id)===s.id,z=async({conversation_id:S,profile_id:O})=>x({conversation_id:S,profile_id:O,role:"member"}),f=()=>{if(!P){if(!n||!i){o("/login");return}!a&&"username"in s&&Ue({myProfileId:i.id,otherProfile:s,findConversation:r,createConversation:d,addParticipant:z,navigate:o,setLoading:()=>l(!0)})}};if(v)return e.jsx(Qe,{});if(!s)return null;const{state:w,country:y,bio:u,avatar_url:E,id:_}=s,I=ce(s)?s.username:null,$=ce(s)?null:s.name;return e.jsxs(te.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"absolute z-50 p-4 rounded-lg shadow-md bg-neutral-100 dark:bg-neutral-900 w-64 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(R,{to:a?`/group/${_}`:`/profile/${_}`,children:e.jsx("img",{src:E??void 0,alt:`Avatar of ${I||$}`,className:"w-10 h-10 rounded-full object-cover"})}),e.jsxs("div",{className:"ml-6",children:[e.jsxs("p",{className:"font-semibold text-center text-neutral-900 dark:text-neutral-100 mb-2",children:["@",I||$]}),(w||y)&&e.jsxs("p",{className:"text-neutral-400 text-xs",children:[w,w&&y?", ":"",y]})]})]}),u&&e.jsx("p",{className:"text-neutral-600 dark:text-neutral-300 line-clamp-4",children:u.length>50?`${u.slice(0,100)}...`:u}),e.jsxs("div",{className:"flex justify-end items-center gap-5 pt-2",children:[k&&e.jsx(R,{title:"Edit Profile",to:"/settings/profile",className:"text-neutral-400 cursor-pointer hover:text-neutral-900 dark:hover:text-neutral-100 transition",children:e.jsx(Ee,{size:30})}),e.jsx(R,{title:"View Posts",to:a?`/group/${_}/posts`:`/profile/${_}/posts`,className:"text-neutral-400 cursor-pointer hover:text-neutral-900 dark:hover:text-neutral-100 transition",children:e.jsx($e,{size:30})}),g&&!a&&e.jsx("button",{title:"Send Message",className:"text-neutral-400 cursor-pointer hover:text-neutral-900 dark:hover:text-neutral-100 transition",onClick:f,children:e.jsx(Ae,{size:30})})]})]})};function Ze({onChange:s,onSubmit:t,onCancel:a,value:i}){const{t:n}=A("comments"),r=d=>{s(d.target.value)};return e.jsxs("div",{className:"flex-1 mt-2 w-full place-items-end",children:[e.jsx("textarea",{value:i,onChange:r,className:"bg-gray-100 dark:bg-zinc-700 p-3 rounded-lg shadow-sm w-150",rows:2,placeholder:n("card.placeholder")}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("button",{onClick:t,className:"px-3 py-1 bg-sky-700 hover:bg-sky-800 text-white rounded text-sm",children:n("card.buttons.reply")}),e.jsx("button",{onClick:a,className:"px-3 py-1 bg-gray-600 hover:bg-gray-700 text-white rounded text-sm",children:n("card.buttons.cancel")})]})]})}function qe({value:s,onChange:t,onSave:a,onCancel:i}){const{t:n}=A("common"),r=d=>{t(d.target.value)};return e.jsxs("div",{className:"flex-1 mt-2 place-items-end",children:[e.jsx("textarea",{value:s,onChange:r,className:"w-100 p-2 rounded-md border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-900 text-zinc-800 dark:text-zinc-100 resize-none",rows:2}),e.jsxs("div",{className:"flex gap-2 mt-2 justify-center",children:[e.jsx("button",{onClick:a,className:"px-3 py-1 w-18 bg-emerald-600 hover:bg-emerald-700 text-white rounded text-sm",children:n("generic.save")}),e.jsx("button",{onClick:i,className:"px-3 py-1 w-18 bg-gray-600 hover:bg-gray-700 text-white rounded text-sm",children:n("generic.cancel")})]})]})}const Je=c.memo(qe);function Ke({onMenu:s,onEdit:t,onDelete:a,isMenuOpen:i,menuRef:n}){const{t:r}=A("common");return e.jsxs("div",{className:"relative",ref:n,children:[e.jsx("button",{onClick:s,className:"cursor-pointer text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300 text-xl px-2",children:e.jsx(Ie,{size:20})}),i&&e.jsxs("div",{className:"absolute right-0 mt-2 w-32 bg-white dark:bg-zinc-900 border border-zinc-800 dark:border-zinc-700 rounded shadow-lg z-10",children:[e.jsx("button",{onClick:t,className:"block w-full text-center px-4 py-2 text-sm hover:bg-zinc-100 dark:hover:bg-zinc-800",children:r("generic.edit")}),e.jsx("div",{className:"border-t border-zinc-300 dark:border-zinc-700"}),e.jsx("button",{onClick:a,className:"block w-full text-center px-4 py-2 text-sm hover:bg-red-100 dark:hover:bg-red-950 text-red-600 dark:text-red-400",children:r("generic.delete")})]})]})}const Xe=c.memo(Ke),fe=({comment:s,profile:t,onDelete:a,onSaveEdit:i,replies:n=[],profilesMap:r,onReplySubmit:d,currentUserId:x})=>{const{t:g}=A("comments"),[b,P]=c.useState(!1),[l,v]=c.useState(!1),[o,k]=c.useState(""),[z,f]=c.useState(null),[w,y]=c.useState(!1),[u,E]=c.useState(s.content),{commentLikesQuery:_,insertLike:I,deleteLike:$}=xe(),{data:S=[],isLoading:O}=_(s.id),m=z===s.id,F=x===s.profile_id,h=c.useRef(null);c.useEffect(()=>{function p(T){m&&h.current&&!h.current.contains(T.target)&&f(null)}return document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[m]);const C=()=>(S==null?void 0:S.filter(p=>p.comment_id===s.id))||[],M=()=>C().some(p=>p.profile_id===x),B=()=>C().find(p=>p.profile_id===x),U=async()=>{if(!x)return;const p=B();p?await $(p):await I({comment_id:s.id,profile_id:x})},V=c.useCallback(()=>{o.trim()!==""&&(d({content:o,parent_id:s.id}),k(""),v(!1))},[o,s.id,d]),Q=c.useCallback(()=>{k(""),v(!1)},[]),D=c.useCallback(()=>{i(s.id,s.post_id,u),y(!1)},[s.id,s.post_id,u,i]),W=c.useCallback(()=>{y(!1),E(s.content)},[s.content]),Z=c.useCallback(()=>{f(m?null:s.id)},[s.id,m]),q=b?n.slice(-10):[];return e.jsxs("div",{className:"flex mb-4",children:[e.jsx(R,{to:`/profile/${t==null?void 0:t.id}`,children:e.jsx(ee,{avatar_url:t==null?void 0:t.avatar_url,className:"!w-8 !h-8 mr-3 flex-shrink-0",alt:`${t==null?void 0:t.username}'s avatar`,gender:t==null?void 0:t.gender})}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsxs("div",{className:"bg-zinc-900 p-3 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"font-semibold text-zinc-700 dark:text-zinc-300",children:(t==null?void 0:t.username)||g("card.anonymous")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-xs text-zinc-500",children:new Date(s.updated_at||s.created_at).toLocaleString()}),F&&e.jsx(Xe,{menuRef:h,onDelete:()=>a(s),onEdit:()=>y(!0),onMenu:Z,isMenuOpen:m})]})]}),e.jsx("div",{className:"text-zinc-600 dark:text-zinc-300 mt-1",children:s.content}),e.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-sky-700 dark:text-sky-500",children:[e.jsxs("button",{className:"flex items-center gap-1 hover:underline disabled:opacity-50",onClick:U,disabled:O,children:[e.jsx("span",{children:M()?g("card.liked"):g("card.like")}),e.jsx("span",{children:C().length})]}),e.jsx("button",{className:"hover:underline",onClick:()=>v(!l),children:g("card.reply")})]})]}),w&&e.jsx(Je,{value:u,onChange:E,onSave:D,onCancel:W}),l&&e.jsx(Ze,{value:o,onChange:k,onSubmit:V,onCancel:Q}),n.length>0&&e.jsxs("div",{className:"mt-4 border-zinc-300 dark:border-zinc-700",children:[e.jsx("button",{onClick:()=>P(!b),className:"flex items-center gap-1 text-sm font-bold text-sky-600 mb-1 hover:underline",children:e.jsxs(e.Fragment,{children:[b?e.jsx(Oe,{}):e.jsx(Re,{}),n.length===1?g("card.replies",{count:n.length}):g("card.repliesPlural",{count:n.length})]})}),b&&q.map(p=>e.jsx(fe,{comment:p,profile:r[p.profile_id],onDelete:a,onSaveEdit:i,replies:p.replies||[],profilesMap:r,onReplySubmit:d,currentUserId:x},p.id))]})]})]})},Ye=c.memo(fe);function es({postId:s}){var F;const{t}=A("comments"),{user:a}=Y(),{fetchProfile:i,profilesMap:n}=ue(),{data:r,isLoading:d}=i((a==null?void 0:a.id)??null),{fetchComments:x,insertComment:g,updateComment:b,deleteComment:P}=Ce(),{data:l,isLoading:v}=x(s),[o,k]=c.useState(!1),z=ss(l??[]),{data:f,isLoading:w}=n(z),{register:y,handleSubmit:u,reset:E,formState:{errors:_}}=he();if(w||v||d)return e.jsx(Pe,{});const $=async h=>{if(!(a!=null&&a.id))return;const C={post_id:s,profile_id:a.id,content:h.comment};try{await g(C),E()}catch(M){console.error("Couldn't insert comment",M)}},S=async h=>{try{await P(h)}catch(C){console.error("Error trying to delete comment",C)}},O=async(h,C,M)=>{try{await b({id:h,post_id:C,updatedComment:{content:M,updated_at:new Date().toISOString()}})}catch(B){console.error("Error updating comment",B)}},m=async h=>{if(!(a!=null&&a.id))return;const C={post_id:s,profile_id:a.id,content:h.content,parent_id:h.parent_id??null};try{await g(C)}catch(M){console.error("Could not insert reply",M)}};return e.jsxs("div",{className:"w-full mt-4 border-t pt-4 text-sm text-zinc-800 dark:text-zinc-100",children:[e.jsxs("div",{className:"mb-4",children:[(l==null?void 0:l.length)&&l.length>2&&!o&&e.jsx("button",{onClick:()=>k(!0),className:"mb-4 text-sky-700 dark:text-sky-400 text-sm hover:underline",children:t("box.loadMore")}),(F=o?l:l==null?void 0:l.slice(-2))==null?void 0:F.map(h=>e.jsx(Ye,{comment:h,profile:f==null?void 0:f[h.profile_id],onDelete:S,onSaveEdit:O,replies:h.replies,profilesMap:f??{},onReplySubmit:m,currentUserId:(a==null?void 0:a.id)??null},h.id)),(l==null?void 0:l.length)===0&&e.jsx("p",{className:"italic text-zinc-600",children:t("box.noComments")})]}),e.jsxs("form",{onSubmit:u($),className:"flex items-start gap-3 mt-4",children:[e.jsx(R,{to:`/profile/${r==null?void 0:r.id}`,children:e.jsx(ee,{avatar_url:r==null?void 0:r.avatar_url,className:"!w-10 !h-10",gender:r==null?void 0:r.gender,alt:`${r==null?void 0:r.username}'s avatar`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{...y("comment",{required:!0}),placeholder:t("box.placeholder"),className:"w-full p-2 rounded-md border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-950 text-zinc-800 dark:text-zinc-100 resize-none",rows:2}),e.jsx("button",{type:"submit",className:"mt-2 px-4 py-1 bg-sky-700 hover:bg-sky-800 text-white rounded-md text-sm",children:t("box.send")}),_.comment&&e.jsx("span",{className:"text-red-500 text-xs",children:t("box.error")})]})]})]})}function ss(s=[]){const t=new Set;function a(i){for(const n of i)n.profile_id&&t.add(n.profile_id),Array.isArray(n.replies)&&n.replies.length>0&&a(n.replies)}return a(s),Array.from(t)}const ts=({children:s})=>e.jsxs("div",{className:`pointer-events-none absolute left-1/2 top-full mt-2 -translate-x-1/2
               whitespace-nowrap rounded-md bg-gray-900/90 py-1 px-2 text-xs
               font-semibold text-sky-200 shadow-lg backdrop-blur`,children:[s,e.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 h-2 w-2 rotate-45 bg-gray-900/90"})]});function H({post:s}){const{t}=A("posts"),{user:a}=Y(),i=!!a,n=me(),[r,d]=c.useState(!1),[x,g]=c.useState(!1),[b,P]=c.useState(!1),[l,v]=c.useState(!1),[o,k]=c.useState(null),{fetchProfile:z}=ue(),{data:f,error:w,isLoading:y}=z(s.profile_id),u=!!s.group_id,{fetchProfileGroup:E}=_e(),{data:_,isLoading:I}=E(s.group_id??""),{userGroupRole:$}=Se(),{data:S,isLoading:O}=$({profileId:(a==null?void 0:a.id)??"",groupId:s.group_id??""}),m=u?_:f,{insertLike:F,deleteLike:h,userLikedPostQuery:C,postLikesQuery:M}=xe(),{data:B}=i?C(s.id,a.id):{data:void 0},{data:U=[]}=M(s.id),V=U.length,{getHashtagsByPostId:Q}=Le(),{data:D}=Q(s.id),W=t("likes.count",{count:V}),Z=I||O||y,q=ze(),p=()=>{q(s.profile_id),g(!0)},T=i?{profile_id:a==null?void 0:a.id,post_id:s.id}:null,G=!!B,pe=()=>{if(!i){n("/login");return}G?h({...B,post_id:s.id,profile_id:(a==null?void 0:a.id)||""}):T&&F(T)},je=()=>{n(`/edit-post/${s.id}`)},J=N=>{k(N),v(!0)},ae=()=>{v(!1),k(null)},be=()=>{if(!i){n("/login");return}P(N=>!N)};if(w)return e.jsx(se,{error:w.message});const ve=s.profile_id===(a==null?void 0:a.id),we=i&&(!u&&ve||u&&(S==="admin"||S==="manager"));return e.jsxs("div",{className:"bg-gradient-to-l to-gray-800 p-4 rounded-lg shadow-md mb-4 mx-auto max-w-3xl w-full",children:[e.jsx("h3",{className:`text-xl mb-4 font-semibold rounded-lg bg-gradient-to-l ${u?"to-amber-700":"to-sky-600"} p-4 text-gray-100`,children:s.title}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex sm:flex-col flex-row items-center",children:[m&&e.jsxs("div",{onMouseEnter:p,onMouseLeave:()=>g(!1),className:"relative mb-auto",children:[e.jsxs(R,{to:u?`/group/${m.id??""}`:`/profile/${m.id??""}`,children:[e.jsx("h2",{className:"font-bold text-lg text-gray-200",children:"username"in m?m.username:m.name}),e.jsx(ee,{avatar_url:m.avatar_url,className:"!w-15 !h-15 mx-auto",gender:"gender"in m?m.gender:void 0,alt:`${"username"in m?m.username:m.name}'s avatar`})]}),x&&e.jsx(We,{profile:m,isLoading:Z,isGroup:u})]}),e.jsxs("div",{className:"flex sm:h-full sm:justify-end sm:flex-col items-end ml-auto sm:ml-0 gap-3 sm:gap-8 mt-6",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center",children:we&&e.jsx(Fe,{title:"Edit Post",className:"text-yellow-600 hover:text-yellow-700 cursor-pointer",onClick:je,size:32})}),e.jsx("div",{onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),onClick:pe,className:"relative cursor-pointer transition-transform duration-200 hover:scale-110",children:e.jsxs(te.div,{initial:{scale:1},animate:{scale:G?[1,1.4,1]:1},transition:{duration:.4},children:[G||r?e.jsx(Be,{className:"w-8 h-8 sm:w-10 sm:h-10"}):e.jsx(De,{className:"w-8 h-8 sm:w-10 sm:h-10"}),r&&e.jsx(ts,{children:W})]},G?"liked":"not-liked")}),e.jsx(Te,{size:32,title:"Post Comments",onClick:be,className:`text-gray-400 cursor-pointer ${u?"hover:text-amber-700":"hover:text-sky-600"} ${b&&!u?"text-sky-600":"text-amber-700"} sm:!w-10 sm:!h-10`})]})]}),e.jsx("div",{className:"w-full max-w-[600px] flex-1 mx-auto bg-gradient-to-l from-gray-900 rounded-md hidden sm:flex",children:s.images_urls&&s.images_urls.length>0?e.jsx(ne,{modules:[Ve,ie,re,le],slidesPerView:1,navigation:!0,pagination:{clickable:!0},scrollbar:{draggable:!0},style:{width:"100%",height:"100%"},children:s.images_urls.map((N,L)=>e.jsx(oe,{children:e.jsx("img",{src:N,alt:`Post image ${L}`,className:"w-full max-h-[500px] object-contain rounded cursor-pointer",style:{maxWidth:"100%",height:"auto",display:"block",margin:"0 auto"},onClick:()=>J(N)})},L))}):e.jsx("p",{className:"font-semibold m-auto text-center text-gray-400",children:t("messages.noImages")})}),e.jsx("div",{className:"w-full mx-auto p-0 bg-gradient-to-l from-gray-900 rounded-md block sm:hidden",children:s.images_urls&&s.images_urls.length>0?s.images_urls.length===1?e.jsx("img",{src:s.images_urls[0],alt:"Post image",className:"w-full h-[60vw] min-h-[180px] max-h-[70vh] object-contain rounded cursor-pointer",onClick:()=>s.images_urls&&J(s.images_urls[0])}):e.jsx(ne,{modules:[ie,re,le],slidesPerView:1,pagination:{clickable:!0},scrollbar:{draggable:!0},style:{minHeight:"60vw",maxHeight:"70vh"},children:s.images_urls.map((N,L)=>e.jsx(oe,{children:e.jsx("img",{src:N,alt:`Post image ${L}`,className:"w-full h-full min-h-[180px] max-h-[70vh] object-contain rounded cursor-pointer",onClick:()=>J(N)})},L))}):e.jsx("p",{className:"font-semibold text-center text-white",children:t("messages.noImages")})})]}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:ae,children:e.jsxs("div",{className:"relative max-w-full max-h-full p-4",onClick:N=>N.stopPropagation(),children:[e.jsx("button",{className:"absolute top-1 right-1 text-white hover:text-red-100 cursor-pointer z-10",onClick:ae,children:e.jsx(Ge,{size:28})}),e.jsx("img",{src:o??void 0,alt:"Full-size post image",className:"max-w-[90vw] max-h-[80vh] object-contain rounded-md shadow-lg"})]})}),D&&D.length>0&&D.filter(N=>N.hashtags!==void 0).map(N=>{const L=N.hashtags.name,Ne=L.startsWith("#")?L.slice(1):L;return e.jsx(R,{to:`/hashtag/${Ne}`,className:"text-sm mx-1 text-sky-500 hover:underline",children:L},N.hashtag_id)}),e.jsx("p",{className:`text-gray-300 mx-auto rounded-md bg-gray-900 font-semibold border-1 sm:ml-auto sm:w-140 p-4 my-4 ${u?"border-amber-700":"border-sky-700"}`,children:s.content}),b&&e.jsx(es,{postId:s.id})]})}function X(){const s="#a1a1aa",t="#e4e4e7";return e.jsxs("div",{className:"bg-gradient-to-l to-gray-800 p-4 rounded-lg shadow-md mb-4 mx-auto max-w-3xl w-full",children:[e.jsx(j,{height:60,baseColor:s,highlightColor:t,className:"mb-4 rounded-lg"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex sm:flex-col flex-row items-center sm:items-start gap-4 sm:gap-6 w-full sm:w-auto",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 sm:mb-auto",children:[e.jsx(j,{width:80,height:14,baseColor:s,highlightColor:t}),e.jsx(j,{circle:!0,width:60,height:60,baseColor:s,highlightColor:t})]}),e.jsx("div",{className:"flex sm:flex-col items-center justify-center gap-4 sm:gap-6 ml-auto sm:ml-5 sm:mt-6",children:[...Array(3)].map((a,i)=>e.jsx(j,{circle:!0,width:40,height:40,baseColor:s,highlightColor:t},i))})]}),e.jsx("div",{className:"w-full max-w-[600px] mx-auto p-4 bg-gradient-to-l from-gray-900 rounded-md",children:e.jsx(j,{height:300,className:"w-full rounded-md",baseColor:s,highlightColor:t})})]}),e.jsx("div",{className:"flex justify-center gap-3 mt-4 flex-wrap",children:[...Array(3)].map((a,i)=>e.jsx(j,{width:80,height:20,baseColor:s,highlightColor:t,className:"rounded"},i))}),e.jsx("div",{className:"max-w-[600px] mx-auto",children:e.jsx(j,{height:80,className:"rounded-md mt-6",baseColor:s,highlightColor:t})})]})}const as=()=>{const{t:s}=A(["posts","common"]),{searchPosts:t,infinitePosts:a}=ge(),{register:i,handleSubmit:n,watch:r}=he({defaultValues:{searchTerm:""}}),d=r("searchTerm"),{data:x,fetchNextPage:g,hasNextPage:b,isFetchingNextPage:P,isLoading:l,error:v}=a(),{data:o,isLoading:k}=t(d||""),z=()=>{};return l?e.jsx("div",{className:"flex flex-col gap-4 items-center",children:[...Array(7)].map((f,w)=>e.jsx(X,{},w))}):v?e.jsx(se,{error:v.message}):e.jsxs("div",{className:"flex flex-col mx-auto text-center",children:[e.jsxs("form",{onSubmit:n(z),className:"mb-5 relative flex items-center justify-center",children:[e.jsx("input",{type:"text",...i("searchTerm"),placeholder:s("posts:placeholders.searchPosts"),className:"border rounded-lg p-2 focus:outline-none focus:ring w-full max-w-md"}),e.jsx("div",{className:"absolute right-0 top-9 -translate-y-1/2 hidden lg:flex items-center group",children:e.jsx(K,{label:s("posts:buttons.createPost"),to:"/create-post",iconSize:28,showLabelOnMobile:!1})})]}),e.jsx("div",{className:"flex justify-center items-center lg:hidden mb-4 mr-6",children:e.jsx(K,{label:s("posts:buttons.createPost"),to:"/create-post",iconSize:32,showLabelOnMobile:!0})}),k?e.jsx("div",{className:"flex flex-col gap-4 items-center",children:[...Array(2)].map((f,w)=>e.jsx(X,{},w))}):d&&o&&o.length>0?o.map(f=>e.jsx(H,{post:f},f.id)):d?e.jsx("p",{className:"col-span-full text-center text-gray-500",children:s("posts:messages.noMatch")}):Array.isArray(x==null?void 0:x.pages)&&x.pages.length>0?x.pages.map((f,w)=>e.jsx(Me.Fragment,{children:f.map(y=>e.jsx(H,{post:y},y.id))},w)):e.jsx("p",{className:"col-span-full text-center text-gray-500",children:s("posts:messages.empty")}),b&&e.jsx(de,{className:"!w-1/2 md:!w-1/3 !font-bold mt-4 !mx-auto hover:!text-sky-600",onClick:()=>g(),disabled:P,children:s(P?"common:loading":"common:loadMore")})]})},gs=({profileId:s,posts:t,disableSearch:a=!1,isOwnProfile:i=!1})=>{const{t:n}=A(["posts","common"]),{infiniteUserPosts:r}=ge(),{data:d,fetchNextPage:x,hasNextPage:g,isFetchingNextPage:b,isLoading:P,error:l}=r(s??"",10);if(!s&&!a)return e.jsx(as,{});if(P)return e.jsx("div",{className:"flex flex-col gap-4 items-center",children:[...Array(3)].map((o,k)=>e.jsx(X,{},k))});if(l)return e.jsx(se,{error:l.message});const v=d?d.pages.flat():[];return t?e.jsx("div",{className:"mx-auto text-center w-full",children:e.jsx("div",{className:"grid grid-cols-1 gap-4",children:t.length>0?t.map(o=>e.jsx(H,{post:o},o.id)):e.jsx("p",{className:"col-span-full text-center text-gray-400",children:n("posts:messages.empty")})})}):e.jsxs("div",{className:"mx-auto text-center w-full",children:[i&&e.jsx("div",{className:"w-full flex justify-end mb-4 relative",children:e.jsx("div",{className:"group flex items-center",children:e.jsx(K,{label:n("posts:buttons.createPost"),to:"/create-post",iconSize:28,showLabelOnMobile:!0})})}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:v.length>0?v.map(o=>e.jsx(H,{post:o},o.id)):e.jsx("p",{className:"col-span-full text-center text-gray-500",children:n("posts:messages.empty")})}),g&&e.jsx(de,{className:"!w-1/2 md:!w-1/3 !font-bold mt-4 !mx-auto hover:!text-sky-600",onClick:()=>x(),disabled:b,children:n(b?"common:loading":"common:loadMore")})]})};export{gs as P};
