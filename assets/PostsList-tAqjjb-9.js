import{j as e,B as ae}from"./mui-COfzhOQm.js";import{u as z,a5 as ne,L as A,P as q,a as G,b as re,a6 as me,c as ie,i as xe,y as he,z as ue,h as le,a4 as ge,a7 as fe,E as J,a3 as oe}from"./index-BpP4ZOjQ.js";import{r as d,R as je}from"./filepond-C4Y8_Bzv.js";import{a6 as pe,a7 as be,a8 as ve,a9 as we,aa as Ne,ab as ke,ac as ye,ad as Ce,ae as Pe,af as Se,A as _e}from"./icons-Cu9gFVBg.js";import{u as ze,h as Le}from"./useCanSendDM-C2odkfZg.js";import{S as p}from"./index-cpdcplt_.js";/* empty css                 */import{m as K}from"./proxy-BXMBkS9E.js";import{S as X,N as Me,P as Y,b as ee,Z as se,a as te}from"./swiper-Ciezsct5.js";import{P as W}from"./PlusButton-CwWKXq4U.js";function Ee({onChange:s,onSubmit:t,onCancel:n,value:i}){const{t:a}=z("comments");return e.jsxs("div",{className:"flex-1 mt-2 w-full place-items-end",children:[e.jsx("textarea",{value:i,onChange:o=>s(o.target.value),className:"bg-gray-100 dark:bg-zinc-700 p-3 rounded-lg shadow-sm w-150",rows:2,placeholder:a("card.placeholder")}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("button",{onClick:t,className:"px-3 py-1 bg-sky-700 hover:bg-sky-800 text-white rounded text-sm",children:a("card.buttons.reply")}),e.jsx("button",{onClick:()=>n(),className:"px-3 py-1 bg-gray-600 hover:bg-gray-700 text-white rounded text-sm",children:a("card.buttons.cancel")})]})]})}function Ae({value:s,onChange:t,onSave:n,onCancel:i}){const{t:a}=z("common");return e.jsxs("div",{className:"flex-1 mt-2 place-items-end",children:[e.jsx("textarea",{value:s,onChange:o=>t(o.target.value),className:"w-100 p-2 rounded-md border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-900 text-zinc-800 dark:text-zinc-100 resize-none",rows:2}),e.jsxs("div",{className:"flex gap-2 mt-2 justify-center",children:[e.jsx("button",{onClick:()=>n(),className:"px-3 py-1 w-18 bg-emerald-600 hover:bg-emerald-700 text-white rounded text-sm",children:a("generic.save")}),e.jsx("button",{onClick:()=>i(),className:"px-3 py-1 w-18 bg-gray-600 hover:bg-gray-700 text-white rounded text-sm",children:a("generic.cancel")})]})]})}const $e=d.memo(Ae);function Ie({onMenu:s,onEdit:t,onDelete:n,menuRef:i,isMenuOpen:a}){const{t:o}=z("common");return e.jsxs("div",{className:"relative",ref:i,children:[e.jsx("button",{onClick:s,className:"cursor-pointer text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300 text-xl px-2",children:e.jsx(pe,{size:20})}),a&&e.jsxs("div",{className:"absolute right-0 mt-2 w-32 bg-white dark:bg-zinc-900 border border-zinc-800 dark:border-zinc-700 rounded shadow-lg z-10",children:[e.jsx("button",{onClick:t,className:"block w-full text-center px-4 py-2 text-sm hover:bg-zinc-100 dark:hover:bg-zinc-800",children:o("generic.edit")}),e.jsx("div",{className:"border-t border-zinc-300 dark:border-zinc-700"}),e.jsx("button",{onClick:n,className:"block w-full text-center px-4 py-2 text-sm hover:bg-red-100 dark:hover:bg-red-950 text-red-600 dark:text-red-400",children:o("generic.delete")})]})]})}const Fe=d.memo(Ie);function ce({comment:s,profile:t,onDelete:n,onSaveEdit:i,replies:a=[],profilesMap:o,onReplySubmit:f,currentUserId:h}){const{t:r}=z("comments"),[b,N]=d.useState(!1),[c,j]=d.useState(!1),[m,w]=d.useState(""),[u,v]=d.useState(null),[k,y]=d.useState(!1),[P,_]=d.useState(s.content),{commentLikesQuery:$,insertLike:I,deleteLike:O}=ne(),{data:L=[],isLoading:M}=$(s.id),x=u===s.id,C=h===s.profile_id,S=d.useRef(null);d.useEffect(()=>{function l(de){x&&S.current&&!S.current.contains(de.target)&&v(null)}return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[x]);const E=()=>(L==null?void 0:L.filter(l=>l.comment_id===s.id))||[],H=()=>E().some(l=>l.profile_id===h),T=()=>E().find(l=>l.profile_id===h),F=async()=>{if(!h)return;const l=T();l?await O(l):await I({comment_id:s.id,profile_id:h})},U=d.useCallback(()=>{m.trim()!==""&&(f({content:m,parent_id:s.id}),w(""),j(!1))},[m,s.id,f]),V=d.useCallback(()=>{w(""),j(!1)},[]),R=d.useCallback(()=>{i(s.id,s.post_id,P),y(!1)},[s.id,s.post_id,P,i]),B=d.useCallback(()=>{y(!1),_(s.content)},[s.content]),Q=d.useCallback(()=>{v(x?null:s.id)},[s.id]),g=b?a.slice(-10):[];return e.jsxs("div",{className:"flex mb-4",children:[e.jsx(A,{to:`/profile/${t==null?void 0:t.id}`,children:e.jsx(q,{avatar_url:t==null?void 0:t.avatar_url,className:"!w-8 !h-8 mr-3 flex-shrink-0",alt:`${t==null?void 0:t.username}'s avatar`,gender:t==null?void 0:t.gender})}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsxs("div",{className:"bg-zinc-900 p-3 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"font-semibold text-zinc-700 dark:text-zinc-300",children:(t==null?void 0:t.username)||r("card.anonymous")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-xs text-zinc-500",children:new Date(s.updated_at||s.created_at).toLocaleString()}),C&&e.jsx(Fe,{menuRef:S,onDelete:()=>n(s),onEdit:()=>y(!0),onMenu:()=>Q(),isMenuOpen:x})]})]}),e.jsx("div",{className:"text-zinc-600 dark:text-zinc-300 mt-1",children:s.content}),e.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-sky-700 dark:text-sky-500",children:[e.jsxs("button",{className:"flex items-center gap-1 hover:underline disabled:opacity-50",onClick:F,disabled:M,children:[e.jsx("span",{children:H()?r("card.liked"):r("card.like")}),e.jsx("span",{children:E().length})]}),e.jsx("button",{className:"hover:underline",onClick:()=>j(!c),children:r("card.reply")})]})]}),k&&e.jsx($e,{value:P,onChange:_,onSave:R,onCancel:B}),c&&e.jsx(Ee,{value:m,onChange:w,onSubmit:U,onCancel:V}),a.length>0&&e.jsxs("div",{className:"mt-4 border-zinc-300 dark:border-zinc-700",children:[e.jsx("button",{onClick:()=>N(!b),className:"flex items-center gap-1 text-sm font-bold text-sky-600 mb-1 hover:underline",children:e.jsxs(e.Fragment,{children:[b?e.jsx(be,{}):e.jsx(ve,{}),a.length===1?r("card.replies",{count:a.length}):r("card.repliesPlural",{count:a.length})]})}),b&&g.map(l=>e.jsx(ce,{comment:l,profile:o[l.profile_id],onDelete:n,onSaveEdit:i,replies:l.replies||[],profilesMap:o,onReplySubmit:f,currentUserId:h},l.id))]})]})]})}const Oe=d.memo(ce);function Re({postId:s}){var M;const{t}=z("comments"),{user:n}=G(),{fetchProfile:i,profilesMap:a}=re(),{data:o}=i(n==null?void 0:n.id),{fetchComments:f,insertComment:h,updateComment:r,deleteComment:b,isLoading:N}=me(),{data:c}=f(s),[j,m]=d.useState(!1),w=Be(c??[]),{data:u,isLoading:v}=a(w),{register:k,handleSubmit:y,reset:P,formState:{errors:_}}=ie();if(v||N)return e.jsx(xe,{});const $=async x=>{const C={post_id:s,profile_id:n.id,content:x.comment};try{await h(C),P()}catch(S){console.error("Could't insert comment",S)}},I=async x=>{try{await b(x)}catch(C){console.error("error trying to delete comment",C)}},O=async(x,C,S)=>{try{await r({id:x,post_id:C,updatedComment:{content:S,updated_at:new Date().toISOString()}})}catch(E){console.error("Error updating comment",E)}},L=async x=>{const C={post_id:s,profile_id:n.id,content:x.content,parent_id:x.parent_id??null};try{await h(C)}catch(S){console.error("Could not insert reply",S)}};return e.jsxs("div",{className:"w-full mt-4 border-t pt-4 text-sm text-zinc-800 dark:text-zinc-100",children:[e.jsxs("div",{className:"mb-4",children:[(c==null?void 0:c.length)>2&&!j&&e.jsx("button",{onClick:()=>m(!0),className:"mb-4 text-sky-700 dark:text-sky-400 text-sm hover:underline",children:t("box.loadMore")}),(M=j?c:c==null?void 0:c.slice(-2))==null?void 0:M.map(x=>e.jsx(Oe,{comment:x,profile:u==null?void 0:u[x.profile_id],onDelete:I,onSaveEdit:O,replies:x.replies,profilesMap:u,onReplySubmit:L,currentUserId:n.id},x.id)),(c==null?void 0:c.length)===0&&e.jsx("p",{className:"italic text-zinc-600",children:t("box.noComments")})]}),e.jsxs("form",{onSubmit:y($),className:"flex items-start gap-3 mt-4",children:[e.jsx(A,{to:`/profile/${o.id}`,children:e.jsx(q,{avatar_url:o.avatar_url,className:"!w-10 !h-10",gender:o.gender,alt:`${o.username}'s avatar`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{...k("comment",{required:!0}),placeholder:t("box.placeholder"),className:"w-full p-2 rounded-md border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-950 text-zinc-800 dark:text-zinc-100 resize-none",rows:2}),e.jsx("button",{type:"submit",className:"mt-2 px-4 py-1 bg-sky-700 hover:bg-sky-800 text-white rounded-md text-sm",children:t("box.send")}),_.comment&&e.jsx("span",{className:"text-red-500 text-xs",children:t("box.error")})]})]})]})}function Be(s=[]){const t=new Set;function n(i){for(const a of i)a.profile_id&&t.add(a.profile_id),Array.isArray(a.replies)&&a.replies.length>0&&n(a.replies)}return n(s),Array.from(t)}const De=()=>{const s="#a1a1aa",t="#e4e4e7";return e.jsxs(K.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"absolute z-50 p-4 rounded-lg shadow-md bg-neutral-100 dark:bg-neutral-900 w-64 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(p,{circle:!0,width:40,height:40,baseColor:s,highlightColor:t}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx(p,{width:80,height:10,baseColor:s,highlightColor:t}),e.jsx(p,{width:100,height:8,baseColor:s,highlightColor:t})]})]}),e.jsxs("div",{className:"space-y-1 mb-3",children:[e.jsx(p,{height:8,width:"100%",baseColor:s,highlightColor:t}),e.jsx(p,{height:8,width:"90%",baseColor:s,highlightColor:t}),e.jsx(p,{height:8,width:"80%",baseColor:s,highlightColor:t}),e.jsx(p,{height:8,width:"70%",baseColor:s,highlightColor:t})]}),e.jsxs("div",{className:"flex justify-end items-center gap-5 pt-2",children:[e.jsx(p,{width:30,height:30,baseColor:s,highlightColor:t}),e.jsx(p,{width:30,height:30,baseColor:s,highlightColor:t}),e.jsx(p,{width:30,height:30,baseColor:s,highlightColor:t})]})]})},He=({profile:s,isLoading:t})=>{const{user:n}=G(),i=!!n,{findConversation:a,createConversation:o}=he(),{addParticipant:f}=ue(),{canSend:h,loading:r}=ze(s.id),[b,N]=d.useState(!1),c=t||r,j=le(),m=i&&n.id===s.id,w=()=>{if(!b){if(!i){j("/login");return}Le({myProfileId:n.id,otherProfile:s,findConversation:a,createConversation:o,addParticipant:f,navigate:j,setLoading:N})}};if(c)return e.jsx(De,{});if(!s)return null;const{username:u,state:v,country:k,bio:y,avatar_url:P,id:_}=s;return e.jsxs(K.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"absolute z-50 p-4 rounded-lg shadow-md bg-neutral-100 dark:bg-neutral-900 w-64 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(A,{to:`/profile/${_}`,children:e.jsx("img",{src:P,alt:`Avatar of ${u}`,className:"w-10 h-10 rounded-full object-cover"})}),e.jsxs("div",{className:"ml-6",children:[e.jsxs("p",{className:"font-semibold text-center text-neutral-900 dark:text-neutral-100 mb-2",children:["@",u]}),(v||k)&&e.jsxs("p",{className:"text-neutral-400 text-xs",children:[v,v&&k?", ":"",k]})]})]}),y&&e.jsx("p",{className:"text-neutral-600 dark:text-neutral-300 line-clamp-4",children:y.length>50?`${y.slice(0,100)}...`:y}),e.jsxs("div",{className:"flex justify-end items-center gap-5 pt-2",children:[m&&e.jsx(A,{title:"Edit Profile",to:"/settings/profile",className:"text-neutral-400 cursor-pointer hover:text-neutral-900 dark:hover:text-neutral-100 transition",children:e.jsx(we,{size:30})}),e.jsx(A,{title:"View Posts",to:`/profile/${_}/posts`,className:"text-neutral-400 cursor-pointer hover:text-neutral-900 dark:hover:text-neutral-100 transition",children:e.jsx(Ne,{size:30})}),h&&e.jsx("button",{title:"Send Message",className:"text-neutral-400 cursor-pointer hover:text-neutral-900 dark:hover:text-neutral-100 transition",onClick:w,children:e.jsx(ke,{size:30})})]})]})},Te=({children:s})=>e.jsxs("div",{className:`pointer-events-none absolute left-1/2 top-full mt-2 -translate-x-1/2
                  whitespace-nowrap rounded-md bg-gray-900/90 py-1 px-2 text-xs
                  font-semibold text-sky-200 shadow-lg backdrop-blur`,children:[s,e.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 h-2 w-2 rotate-45 bg-gray-900/90"})]});function D({post:s}){const{t}=z("posts"),{user:n}=G(),i=!!n,a=le(),[o,f]=d.useState(!1),{fetchProfile:h}=re(),{data:r,error:b,isLoading:N}=h(s.profile_id),{insertLike:c,deleteLike:j,userLikedPostQuery:m,postLikesQuery:w}=ne(),{data:u}=m(s.id,i?n.id:void 0),{data:v=[]}=w(s.id),k=v.length,{getHashtagsByPostId:y}=ge(),{data:P}=y(s.id),[_,$]=d.useState(!1),[I,O]=d.useState(!1),[L,M]=d.useState(!1),[x,C]=d.useState(null),S=t("likes.count",{count:k}),E=fe(),H=()=>{E(s.profile_id),$(!0)},T=i?{profile_id:n.id,post_id:s.id}:null,F=!!u,U=()=>{if(!i){a("/login");return}F?j({...u,post_id:s.id,profile_id:n.id}):c(T)},V=()=>{a(`/edit-post/${s.id}`)},R=g=>{C(g),M(!0)},B=()=>{M(!1),C(null)},Q=()=>{if(!i){a("/login");return}O(g=>!g)};return b?e.jsx(J,{error:b.message}):e.jsxs("div",{className:"bg-gradient-to-l to-gray-800 p-4 rounded-lg shadow-md mb-4 mx-auto max-w-3xl w-full",children:[e.jsx("h3",{className:"text-xl mb-4 font-semibold rounded-lg bg-gradient-to-l to-sky-600 p-4 text-gray-100",children:s.title}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex sm:flex-col flex-row items-center",children:[e.jsxs("div",{onMouseEnter:H,onMouseLeave:()=>$(!1),className:"relative mb-auto",children:[e.jsxs(A,{to:`/profile/${r==null?void 0:r.id}`,children:[e.jsx("h2",{className:"font-bold text-lg text-gray-200",children:r==null?void 0:r.username}),e.jsx(q,{avatar_url:r==null?void 0:r.avatar_url,className:"!w-15 !h-15 mx-auto",gender:r==null?void 0:r.gender,alt:`${r==null?void 0:r.username}'s avatar`})]}),_&&e.jsx(He,{profile:r,isLoading:N})]}),e.jsxs("div",{className:"flex sm:h-full sm:justify-end sm:flex-col items-end ml-auto sm:ml-0 gap-3 sm:gap-8 mt-6",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center",children:i&&s.profile_id===n.id&&e.jsx(ye,{title:"Edit Post",className:"text-yellow-600 hover:text-yellow-700 cursor-pointer",onClick:V,size:32})}),e.jsx("div",{onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),onClick:U,className:"relative cursor-pointer transition-transform duration-200 hover:scale-110",children:e.jsxs(K.div,{initial:{scale:1},animate:{scale:F?[1,1.4,1]:1},transition:{duration:.4},children:[F||o?e.jsx(Ce,{className:"w-8 h-8 sm:w-10 sm:h-10"}):e.jsx(Pe,{className:"w-8 h-8 sm:w-10 sm:h-10"}),o&&e.jsx(Te,{children:S})]},F?"liked":"not-liked")}),e.jsx(Se,{size:32,title:"Post Comments",onClick:Q,className:`text-gray-400 cursor-pointer hover:text-sky-600 ${I&&"text-sky-600"} sm:!w-10 sm:!h-10`})]})]}),e.jsx("div",{className:"w-full max-w-[600px] flex-1 mx-auto bg-gradient-to-l from-gray-900 rounded-md hidden sm:flex",children:s.images_urls&&s.images_urls.length>0?e.jsx(X,{modules:[Me,Y,ee,se],slidesPerView:1,navigation:!0,pagination:{clickable:!0},scrollbar:{draggable:!0},style:{width:"100%",height:"100%"},children:s.images_urls.map((g,l)=>e.jsx(te,{children:e.jsx("img",{src:g,alt:`Post image ${l}`,className:"w-full max-h-[500px] object-contain rounded cursor-pointer",style:{maxWidth:"100%",height:"auto",display:"block",margin:"0 auto"},onClick:()=>R(g)})},l))}):e.jsx("p",{className:"font-semibold text-center text-white",children:t("messages.noImages")})}),e.jsx("div",{className:"w-full mx-auto p-0 bg-gradient-to-l from-gray-900 rounded-md block sm:hidden",children:s.images_urls&&s.images_urls.length>0?s.images_urls.length===1?e.jsx("img",{src:s.images_urls[0],alt:"Post image",className:"w-full h-[60vw] min-h-[180px] max-h-[70vh] object-contain rounded cursor-pointer",onClick:()=>R(s.images_urls[0])}):e.jsx(X,{modules:[Y,ee,se],slidesPerView:1,pagination:{clickable:!0},scrollbar:{draggable:!0},style:{minHeight:"60vw",maxHeight:"70vh"},children:s.images_urls.map((g,l)=>e.jsx(te,{children:e.jsx("img",{src:g,alt:`Post image ${l}`,className:"w-full h-full min-h-[180px] max-h-[70vh] object-contain rounded cursor-pointer",onClick:()=>R(g)})},l))}):e.jsx("p",{className:"font-semibold text-center text-white",children:t("messages.noImages")})})]}),L&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:B,children:e.jsxs("div",{className:"relative max-w-full max-h-full p-4",onClick:g=>g.stopPropagation(),children:[e.jsx("button",{className:"absolute top-1 right-1 text-white hover:text-red-100 cursor-pointer z-10",onClick:B,children:e.jsx(_e,{size:28})}),e.jsx("img",{src:x,alt:"Full-size post image",className:"max-w-[90vw] max-h-[80vh] object-contain rounded-md shadow-lg"})]})}),e.jsx("div",{className:"flex gap-2 mt-4 sm:mt-0 justify-center",children:P&&P.length>0&&P.map(g=>{const l=g.hashtags.name.startsWith("#")?g.hashtags.name.slice(1):g.hashtags.name;return e.jsx(A,{to:`/hashtag/${l}`,className:"text-sm text-sky-500 hover:underline",children:g.hashtags.name},g.hashtag_id)})}),e.jsx("p",{className:"text-gray-300 mx-auto rounded-md bg-gray-900 font-semibold border-sky-700 border-1 sm:ml-auto sm:w-140 p-4 my-4",children:s.content}),I&&e.jsx(Re,{postId:s.id})]})}function Z(){const s="#a1a1aa",t="#e4e4e7";return e.jsxs("div",{className:"bg-gradient-to-l to-gray-800 p-4 rounded-lg shadow-md mb-4 mx-auto max-w-3xl w-full",children:[e.jsx(p,{height:60,baseColor:s,highlightColor:t,className:"mb-4 rounded-lg"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex sm:flex-col flex-row items-center sm:items-start gap-4 sm:gap-6 w-full sm:w-auto",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 sm:mb-auto",children:[e.jsx(p,{width:80,height:14,baseColor:s,highlightColor:t}),e.jsx(p,{circle:!0,width:60,height:60,baseColor:s,highlightColor:t})]}),e.jsx("div",{className:"flex sm:flex-col items-center justify-center gap-4 sm:gap-6 ml-auto sm:ml-5 sm:mt-6",children:[...Array(3)].map((n,i)=>e.jsx(p,{circle:!0,width:40,height:40,baseColor:s,highlightColor:t},i))})]}),e.jsx("div",{className:"w-full max-w-[600px] mx-auto p-4 bg-gradient-to-l from-gray-900 rounded-md",children:e.jsx(p,{height:300,className:"w-full rounded-md",baseColor:s,highlightColor:t})})]}),e.jsx("div",{className:"flex justify-center gap-3 mt-4 flex-wrap",children:[...Array(3)].map((n,i)=>e.jsx(p,{width:80,height:20,baseColor:s,highlightColor:t,className:"rounded"},i))}),e.jsx("div",{className:"max-w-[600px] mx-auto",children:e.jsx(p,{height:80,className:"rounded-md mt-6",baseColor:s,highlightColor:t})})]})}const Ue=()=>{const{t:s}=z(["posts","common"]),{searchPosts:t,infinitePosts:n}=oe(),{register:i,handleSubmit:a,watch:o}=ie(),f=o("searchTerm"),{data:h,fetchNextPage:r,hasNextPage:b,isFetchingNextPage:N,isLoading:c,error:j}=n(),{data:m,isLoading:w}=t(f);return c?e.jsx("div",{className:"flex flex-col gap-4 items-center",children:[...Array(7)].map((u,v)=>e.jsx(Z,{},v))}):j?e.jsx(J,{error:j.message}):e.jsxs("div",{className:"flex flex-col mx-auto text-center",children:[e.jsxs("form",{onSubmit:a(()=>{}),className:"mb-5 relative flex items-center justify-center",children:[e.jsx("input",{type:"text",...i("searchTerm"),placeholder:s("posts:placeholders.searchPosts"),className:"border rounded-lg p-2 focus:outline-none focus:ring w-full max-w-md"}),e.jsx("div",{className:"absolute right-0 top-9 -translate-y-1/2 hidden lg:flex items-center group",children:e.jsx(W,{label:s("posts:buttons.createPost"),to:"/create-post",iconSize:28,showLabelOnMobile:!1})})]}),e.jsx("div",{className:"flex justify-center items-center lg:hidden mb-4 mr-6",children:e.jsx(W,{label:s("posts:buttons.createPost"),to:"/create-post",iconSize:32,showLabelOnMobile:!0})}),w?e.jsx("div",{className:"flex flex-col gap-4 items-center",children:[...Array(2)].map((u,v)=>e.jsx(Z,{},v))}):f&&(m==null?void 0:m.length)>0?m.map(u=>e.jsx(D,{post:u},u.id)):f?e.jsx("p",{className:"col-span-full text-center text-gray-500",children:s("posts:messages.noMatch")}):h&&h.pages.length>0?h.pages.map((u,v)=>e.jsx(je.Fragment,{children:u.map(k=>e.jsx(D,{post:k},k.id))},v)):e.jsx("p",{className:"col-span-full text-center text-gray-500",children:s("posts:messages.empty")}),b&&e.jsx(ae,{className:"!w-1/2 md:!w-1/3 !font-bold mt-4 !mx-auto hover:!text-sky-600",onClick:()=>r(),disabled:N,children:s(N?"common:loading":"common:loadMore")})]})},es=({profileId:s,posts:t,disableSearch:n,isOwnProfile:i})=>{const{t:a}=z(["posts","common"]),{infiniteUserPosts:o}=oe(),{data:f,fetchNextPage:h,hasNextPage:r,isFetchingNextPage:b,isLoading:N,error:c}=o(s);if(!s&&!n)return e.jsx(Ue,{});if(N)return e.jsx("div",{className:"flex flex-col gap-4 items-center",children:[...Array(3)].map((m,w)=>e.jsx(Z,{},w))});if(c)return e.jsx(J,{error:c.message});const j=f?f.pages.flat():[];return t?e.jsx("div",{className:"mx-auto text-center w-full",children:e.jsx("div",{className:"grid grid-cols-1 gap-4",children:t.length>0?t.map(m=>e.jsx(D,{post:m},m.id)):e.jsx("p",{className:"col-span-full text-center text-gray-400",children:a("posts:messages.empty")})})}):e.jsxs("div",{className:"mx-auto text-center w-full",children:[i&&e.jsx("div",{className:"w-full flex justify-end mb-4 relative",children:e.jsx("div",{className:"group flex items-center",children:e.jsx(W,{label:a("posts:buttons.createPost"),to:"/create-post",iconSize:28,showLabelOnMobile:!0})})}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:j.length>0?j.map(m=>e.jsx(D,{post:m},m.id)):e.jsx("p",{className:"col-span-full text-center text-gray-500",children:a("posts:messages.empty")})}),r&&e.jsx(ae,{className:"!w-1/2 md:!w-1/3 !font-bold mt-4 !mx-auto hover:!text-sky-600",onClick:()=>h(),disabled:b,children:a(b?"common:loading":"common:loadMore")})]})};export{es as P};
