import{j as a}from"./mui-O-_7DbpJ.js";import{a as L,A as S,h as N,u as E,D as k,c as M,i as _,E as w,I as c,S as A,B as p}from"./index-Cf-eeQSk.js";import{r as P}from"./calendar-BpW-aEGs.js";import"./reactPlayer-D7fnNHFf.js";import"./icons-D__VgVoR.js";import"./lottie-DTlWc_fK.js";import"./gsap-Brfk6Bdo.js";import"./filepond-DcLflJls.js";const q=[{value:"youtube",label:"YouTube"},{value:"spotify",label:"Spotify"},{value:"soundcloud",label:"SoundCloud"},{value:"vimeo",label:"Vimeo"},{value:"file",label:"Direct Audio/Video URL"}],F=()=>{const{user:r}=L(),{id:o}=S(),m=N(),{t:e}=E("music"),{getMediaLink:f,insertMediaLink:x,updateMediaLink:b}=k(),t=!!o,{register:s,handleSubmit:g,reset:h,formState:{errors:l},setValue:d}=M(),{data:i,isLoading:y,error:n}=f(o,{enabled:t});P.useEffect(()=>{t&&i?(d("url",i.url),d("title",i.title),d("media_type",i.media_type)):h()},[o,i]);const j=async u=>{try{t?await b({id:o,updatedLink:{...u,profile_id:r.id}}):await x({...u,profile_id:r.id}),m(`/profile/${r.id}/media`)}catch(v){console.error(v.message)}};return!r.id||t&&y?a.jsx(_,{}):n?a.jsx(w,{error:n.message}):a.jsxs("section",{className:"bg-gradient-to-l to-gray-900 p-6 rounded-b-lg shadow-lg max-w-4xl mx-auto",children:[a.jsx("div",{className:"text-center font-semibold",children:a.jsx("h2",{className:"text-2xl text-yellow-600 font-semibold text-center mb-4",children:e(t?"media.titleEdit":"media.titleAdd")})}),a.jsxs("form",{onSubmit:g(j),className:"space-y-4",children:[a.jsx(c,{id:"url",label:e("media.form.url"),placeholder:e("media.form.urlPlaceholder"),required:!0,register:s,error:l.url}),a.jsx(c,{id:"title",label:e("media.form.title"),placeholder:e("media.form.titlePlaceholder"),maxLength:30,validation:{maxLength:{value:30}},register:s,error:l.title}),a.jsx(A,{id:"media_type",label:e("media.form.type"),options:q,defaultOption:e("media.form.typePlaceholder"),register:s,validation:{required:e("media.form.typeRequired")},error:l.media_type}),a.jsxs("div",{className:"flex justify-center mt-16 gap-4",children:[a.jsx(p,{type:"submit",className:"!bg-emerald-600 hover:!bg-emerald-700",children:e(t?"media.form.update":"media.form.add")}),t&&a.jsx(p,{type:"button",onClick:()=>m(-1),className:"!bg-gray-600 hover:!bg-gray-700",children:e("media.form.cancel")})]})]})]})};export{F as default};
