import{j as s}from"./mui-DM0ppf3M.js";import{a as g,G as h,u as j,H as b,k as w,E as c,L as N}from"./index-DR1Vxlj-.js";import{R as v}from"./reactPlayer-CjHFj7G4.js";import{S as k}from"./ShinyText-2IjqnkFp.js";import{P as L}from"./PlusButton-D7otCLjI.js";import"./calendar-BpW-aEGs.js";import"./icons-A8qOaPVA.js";import"./lottie-DTlWc_fK.js";import"./gsap-Brfk6Bdo.js";import"./filepond-DcLflJls.js";const B=()=>{const{user:t}=g(),{id:i}=h(),{t:r}=j("music"),{userMediaLinks:m,deleteMediaLink:u}=b();let a=[],o=!1,l=null;if(i){const e=m(i);a=e.data??[],o=e.isLoading,l=e.error}const d=t&&t.id===i;if(o||!i)return s.jsx(w,{});if(l)return s.jsx(c,{error:l.message});if(!Array.isArray(a))return s.jsx(c,{error:"Invalid media data received"});const p=e=>{const n=e.match(/spotify\.com\/(track|playlist|album)\/([a-zA-Z0-9]+)/);if(!n)return null;const[M,f,y]=n;return`https://open.spotify.com/embed/${f}/${y}`},x=[...a.filter(e=>e.media_type==="spotify"),...a.filter(e=>e.media_type!=="spotify")];return s.jsxs("section",{className:"max-w-260 mx-auto",children:[s.jsx("div",{className:"text-center font-semibold",children:s.jsx(k,{text:r("media.title"),className:"text-3xl font-semibold tracking-wide mb-12"})}),d&&s.jsx(L,{label:r("media.actions.add"),to:"/media/create"}),s.jsx("ul",{className:"space-y-4 text-center",children:x.map(e=>s.jsxs("li",{className:"shadow-sm p-4 rounded-lg bg-gradient-to-l to-gray-800",children:[s.jsx("div",{className:"mb-2 mt-8",children:s.jsx("p",{className:"font-medium",children:e.title})}),s.jsx("div",{className:"mb-6",children:e.media_type==="spotify"&&e.url?s.jsx("div",{className:"rounded-lg bg-[#1db954] p-1",children:s.jsx("iframe",{src:p(e.url)||void 0,width:"100%",height:"80",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy"})}):e.url?s.jsx("div",{className:"aspect-video max-w-full bg-gray-900 p-1 rounded-lg",children:s.jsx(v,{url:e.url,controls:!0,width:"100%",height:"100%"})}):null}),d&&s.jsxs("div",{className:"flex gap-4 justify-center",children:[s.jsx(N,{to:`/media/edit/${e.id}`,className:"px-2 py-1 min-w-20 rounded-lg bg-yellow-600 hover:bg-yellow-700",children:r("media.actions.edit")}),s.jsx("button",{onClick:()=>t&&u({profile_id:t.id,id:e.id}),className:"px-2 py-1 min-w-20 rounded-lg cursor-pointer !bg-red-600 hover:!bg-red-700",children:r("media.actions.delete")})]})]},e.id))})]})};export{B as default};
