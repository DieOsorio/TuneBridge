import{j as e,P as b}from"./mui-r_OKU3k3.js";import{r as m}from"./filepond-C4Y8_Bzv.js";import{c as A,F as N,I as P,u as p,G as k,i as v,E as w}from"./index-Lh6-Uiv0.js";import{A as C}from"./AdCard-DHIUjY3F.js";import{S}from"./ShinyText-pBf_BUOn.js";import{P as T}from"./PlusButton-Cxgoa6SF.js";import"./reactPlayer-P4y7tfwb.js";import"./icons-C9PPhvnE.js";import"./lottie-Qij33HW6.js";import"./gsap-Brfk6Bdo.js";const E=({filters:s,setFilters:a,placeholder:r})=>{const{control:t,watch:c}=A({defaultValues:{search:s.search}}),l=c("search");return m.useEffect(()=>{a(o=>({...o,search:l}))},[l,a]),e.jsx("form",{className:"p-4 rounded-lg shadow-md space-y-4",children:e.jsx(N,{control:t,name:"search",render:({field:o})=>e.jsx(P,{id:"search",placeholder:r||"Search ads...",className:"bg-gray-800",register:()=>o})})})},u=({ads:s})=>{const{t:a}=p("ads");return s.length?e.jsx("div",{className:"flex flex-col justify-center sm:flex-row flex-wrap gap-6",children:s.map(r=>e.jsx(C,{ad:r},r.id))}):e.jsx("p",{children:a("adsList.noAds")})};u.propTypes={ads:b.array.isRequired};const _=()=>{const{t:s}=p("ads"),[a,r]=m.useState("all"),[t,c]=m.useState({adType:null,lookingFor:[],genres:[],locations:null,search:""}),{fetchAllAds:l,searchMusicianAds:o}=k(),{data:x=[],isLoading:f,error:d}=t.search.trim()?o(t.search):l(),g=a==="all"?x:x.filter(n=>n.ad_type===a),i=n=>{const h="px-4 py-2 rounded-md border-b-2 text-sm text-gray-400 hover:text-gray-100 font-medium cursor-pointer transition-colors",j=a===n,y={all:"border-amber-700",looking:"border-sky-600",offering:"border-emerald-600"}[n];return`${h} ${j?`${y} !text-gray-100`:"text-gray-400"}`};return e.jsx("div",{className:"flex flex-col md:flex-row gap-4 p-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-center",children:e.jsx(S,{text:s("adsPage.title"),speed:3,className:"text-3xl font-semibold tracking-wide"})}),e.jsx("div",{className:"max-w-md mx-auto mt-4",children:e.jsx(E,{filters:t,setFilters:c,placeholder:s("adsPage.filters.placeholder")})}),e.jsxs("div",{className:"flex justify-center gap-6 my-4",children:[e.jsx("button",{className:i("all"),onClick:()=>r("all"),children:s("adsPage.nav.all")}),e.jsx("button",{className:i("looking"),onClick:()=>r("looking"),children:s("adsPage.nav.looking")}),e.jsx("button",{className:i("offering"),onClick:()=>r("offering"),children:s("adsPage.nav.offering")})]}),e.jsx(T,{label:s("adsPage.buttons.createAd"),to:"/ads/new"}),f&&e.jsx(v,{}),d&&e.jsx(w,{error:d.message}),!f&&!d&&e.jsx(u,{ads:g})]})})};export{_ as default};
