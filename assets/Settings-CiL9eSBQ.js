import{j as e,B as H,u as K}from"./mui-DntPDMdt.js";import{c as X,d as Y,e as Z,f as ee,B as se,g as te,I as ae,h as re}from"./icons-B8MnwRHo.js";import{P as le}from"./ProfileSettings-BVdTU0Tb.js";import{r as f}from"./calendar-DXWKnWXk.js";import{u as S,l as ne,m as oe,c as B,n as ie,S as M,I as z,o as ce,p as de,q as me,r as ue,t as ge,v as xe,k as pe,E as he,B as I,b as Q,a as W,w as G,x as be,P as U,y as ve,R as fe,i as A,z as ye}from"./index-HpvwY6ca.js";import"./reactPlayer-CBmCIXQE.js";import"./lottie-FCmafNqs.js";import"./gsap-CH_iu5NA.js";import"./filepond-DvarZm2e.js";function je({title:t,titleId:r,...s},o){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":r},s),t?f.createElement("title",{id:r},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const we=f.forwardRef(je),J=new Set(["instrument","composition_style","production_type","preferred_genres","music_genre"]),$=({role:t,profileId:r,details:s,refetch:o,addDetails:x,updateDetails:i,deleteDetails:g,fields:c,title:d})=>{const{t:n}=S("common"),[a,m]=f.useState(null),[_,j]=f.useState(""),{upsertHashtag:R}=ne(),{upsertProfileHashtag:N}=oe(),{register:F,handleSubmit:k,setError:P,clearErrors:T,reset:b,control:w,formState:{errors:E}}=B({defaultValues:c.reduce((l,u)=>({...l,[u.name]:u.default||""}),{})});f.useEffect(()=>{b(c.reduce((l,u)=>({...l,[u.name]:u.default||""}),{}))},[s,c,b]);const q=async l=>{try{if(T("root"),!c.every(h=>{var v;return!h.required||((v=l[h.name])==null?void 0:v.trim())})){P("root",{message:n("form.validation.allRequired")});return}await x({...l,role_id:t.id,profile_id:String(r)});const D=[];for(const h of c)if(J.has(h.name)&&l[h.name]){const v=l[h.name].split(",").map(p=>p.trim()).filter(Boolean);D.push(...v.map(p=>`#${p.replace(/\s+/g,"")}`))}try{const h=await Promise.all(D.map(async v=>await R({name:v})));await Promise.all(h.map(async v=>{await N({profile_id:String(r),hashtag_id:v.id})}))}catch(h){console.error("Error while upserting profile hashtags:",h.message)}b(),j(n("messages.success.add",{item:d.toLowerCase()})),setTimeout(()=>j(""),3e3),o()}catch(u){console.error(n("messages.error.add",{item:d.toLowerCase()}),u),P("root",{message:n("messages.error.add",{item:d.toLowerCase()})})}},V=async l=>{const u={...l,...(a==null?void 0:a[l.id])||{}};if(!c.every(h=>{var v;return!h.required||((v=u[h.name])==null?void 0:v.toString().trim())})){P("root",{message:n("form.validation.allRequired")});return}try{await i(l.id,{...l,...u});const h=[];for(const p of c)if(J.has(p.name)&&u[p.name]){const y=u[p.name].split(",").map(O=>O.trim()).filter(Boolean);h.push(...y.map(O=>`#${O.replace(/\s+/g,"")}`))}const v=await Promise.all(h.map(async p=>await R({name:p})));await Promise.all(v.map(async p=>{await N({profile_id:String(r),hashtag_id:p.id})})),j(n("messages.success.update",{item:d.toLowerCase()})),setTimeout(()=>j(""),3e3),m(p=>{const{[l.id]:y,...O}=p||{};return O}),o()}catch(h){console.error(`Error updating ${d.toLowerCase()}:`,h),P("root",{message:n("messages.error.update",{item:d.toLowerCase()})})}},C=async l=>{console.log(`Deleting ${d.toLowerCase()} with ID:`,l);try{await g(l),j(n("messages.success.delete",{item:d.toLowerCase()})),setTimeout(()=>j(""),3e3),o()}catch(u){console.error(`Error deleting ${d.toLowerCase()}:`,u),P("root",{message:n("messages.error.delete",{item:d.toLowerCase()})})}};return e.jsxs("div",{className:"text-gray-900",children:[e.jsx("h4",{className:"text-xl text-gray-200 font-semibold mb-4",children:d}),_&&e.jsx("p",{className:"text-green-500 mb-2",children:_}),E.root&&e.jsx("p",{className:"text-red-500 mb-2",children:E.root.message}),e.jsx("ul",{className:"space-y-4",children:s.map(l=>e.jsxs("li",{className:"bg-gray-100 p-4 rounded-2xl shadow-md border border-white flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsx("div",{className:"flex flex-col gap-2 w-full sm:w-auto",children:c.map(u=>{var D,h,v;return e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"font-medium text-gray-700",children:[u.label,":"]}),u.type==="select"?e.jsxs("select",{value:((D=a==null?void 0:a[l.id])==null?void 0:D[u.name])??l[u.name],onChange:p=>m(y=>({...y,[l.id]:{...y==null?void 0:y[l.id],[u.name]:p.target.value}})),className:"ml-2 p-2 border border-gray-300 rounded-md bg-white",children:[e.jsx("option",{value:"",children:n("generic.chooseOne")}),(h=u.options)==null?void 0:h.map(p=>e.jsx("option",{value:p.value,children:p.label},p.value))]}):e.jsx("input",{type:u.type||"text",value:((v=a==null?void 0:a[l.id])==null?void 0:v[u.name])??l[u.name],onChange:p=>m(y=>({...y,[l.id]:{...y==null?void 0:y[l.id],[u.name]:p.target.value}})),className:"ml-2 p-2 border border-gray-300 rounded-md"})]},u.name)})}),e.jsxs("div",{className:"flex gap-2 mx-auto",children:[e.jsx(H,{onClick:()=>V(l),variant:"contained",className:"!text-white !bg-emerald-600 hover:!bg-emerald-700 !px-3 !rounded-xl flex gap-1 !text-sm",children:n("generic.save")}),e.jsx(H,{onClick:()=>C(l.id),color:"error",variant:"contained",className:"!text-white !px-3 !rounded-xl !text-sm flex gap-1",children:n("generic.delete")})]})]},l.id))}),e.jsxs("form",{onSubmit:k(q),className:"mt-8 bg-gray-900 p-6 rounded-2xl shadow-inner border border-gray-600",children:[e.jsx("h5",{className:"text-lg font-medium mb-4 text-center text-white",children:n("addNew",{item:d.toLowerCase()})}),e.jsx("div",{className:"grid sm:grid-cols-2 gap-4",children:c.map(l=>{var u;return e.jsx("div",{children:l.type==="select"?e.jsx(ie,{name:l.name,control:w,rules:{required:l.required?`${l.label} is required`:!1},render:({field:D})=>e.jsx(M,{id:l.name,label:l.label,options:l.options||[],...D})}):e.jsx(z,{id:l.name,label:l.label,placeholder:l.placeholder,type:l.type||"text",error:(u=E[l.name])==null?void 0:u.message,register:F,validation:{required:l.required?`${l.label} is required`:!1}})},l.name)})}),e.jsx("div",{className:"mt-4 w-full flex justify-center",children:e.jsx(H,{type:"submit",variant:"contained",className:"!text-white !bg-emerald-600 hover:!bg-emerald-700 !w-1/2 !px-3 !rounded-xl flex gap-1 !text-sm",children:n("generic.add")})})]})]})},Se=({role:t,profileId:r})=>{const{t:s}=S("music"),{fetchInstruments:o,addInstrument:x,updateInstrument:i,deleteInstrument:g}=ce(),{data:c,refetch:d}=o(t.id),n=a=>({...a,years_of_experience:a.years_of_experience?parseInt(a.years_of_experience,10):null});return e.jsx($,{role:t,profileId:r,details:Array.isArray(c)?c:[],refetch:d,addDetails:a=>x({details:n(a)}),updateDetails:(a,m)=>i({id:String(a),details:n(m)}),deleteDetails:a=>g({id:String(a)}),title:s("roles.detailsTitle",{role:s("fields.instrument").toLowerCase()}),fields:[{name:"instrument",label:s("fields.instrument"),placeholder:s("placeholders.instrument"),required:!0},{name:"years_of_experience",label:s("fields.yearsOfExperience"),type:"number",placeholder:s("placeholders.yearsOfExperience")},{name:"level",label:s("fields.level"),type:"select",options:[{value:"Beginner",label:s("levels.beginner")},{value:"Intermediate",label:s("levels.intermediate")},{value:"Advanced",label:s("levels.advanced")},{value:"Expert",label:s("levels.expert")}]}]})},Ne=({role:t,profileId:r})=>{const{t:s}=S("music"),{fetchSinger:o,addSinger:x,updateSinger:i,deleteSinger:g}=de(),{data:c,refetch:d}=o(String(t.id)),n=a=>{var m,_;return{...a,voice_type:((m=a.voice_type)==null?void 0:m.trim())||null,music_genre:((_=a.music_genre)==null?void 0:_.trim())||null}};return e.jsx($,{role:t,profileId:r,details:Array.isArray(c)?c:[],refetch:d,addDetails:a=>x({details:{...n(a),role_id:String(t.id),profile_id:String(r),level:a.level??"Beginner"}}),updateDetails:(a,m)=>i({id:String(a),details:n(m)}),deleteDetails:a=>g({id:String(a),role_id:String(t.id)}),title:s("roles.detailsTitle",{role:s("roles.singer").toLowerCase()}),fields:[{name:"voice_type",label:s("fields.voiceType"),placeholder:s("placeholders.voiceType"),required:!0},{name:"music_genre",label:s("fields.musicGenre"),placeholder:s("placeholders.musicGenre")},{name:"level",label:s("fields.level"),type:"select",options:[{value:"Beginner",label:s("levels.beginner")},{value:"Intermediate",label:s("levels.intermediate")},{value:"Advanced",label:s("levels.advanced")},{value:"Expert",label:s("levels.expert")}]}]})},_e=({role:t,profileId:r})=>{const{t:s}=S("music"),{fetchDj:o,addDj:x,updateDj:i,deleteDj:g}=me(),{data:c,refetch:d}=o(t.id),n=a=>{var m;return{...a,events_played:((m=a.events_played)==null?void 0:m.trim())||null}};return e.jsx($,{role:t,profileId:r,details:Array.isArray(c)?c:[],refetch:d,addDetails:a=>x({details:n(a)}),updateDetails:(a,m)=>i({id:String(a),details:n(m)}),deleteDetails:a=>g({id:String(a)}),title:s("roles.detailsTitle",{role:s("roles.dj").toLowerCase()}),fields:[{name:"events_played",label:s("fields.eventsPlayed"),placeholder:s("placeholders.eventsPlayed"),required:!0},{name:"preferred_genres",label:s("fields.preferredGenres"),placeholder:s("placeholders.preferredGenres")},{name:"level",label:s("fields.level"),type:"select",options:[{value:"Beginner",label:s("levels.beginner")},{value:"Intermediate",label:s("levels.intermediate")},{value:"Advanced",label:s("levels.advanced")},{value:"Expert",label:s("levels.expert")}]}]})},Pe=({role:t,profileId:r})=>{const{t:s}=S("music"),{fetchProducers:o,addProducer:x,updateProducer:i,deleteProducer:g}=ue(),{data:c,refetch:d}=o(t.id),n=a=>({...a,years_of_experience:a.years_of_experience?parseInt(a.years_of_experience,10):null});return e.jsx($,{role:t,profileId:r,details:Array.isArray(c)?c:[],refetch:d,addDetails:a=>x({details:n(a)}),updateDetails:(a,m)=>i({id:String(a),details:n(m)}),deleteDetails:a=>g({id:String(a),roleId:t.id}),title:s("roles.detailsTitle",{role:s("roles.producer").toLowerCase()}),fields:[{name:"production_type",label:s("fields.productionType"),placeholder:s("placeholders.productionType"),required:!0},{name:"years_of_experience",label:s("fields.yearsOfExperience"),type:"number",placeholder:s("placeholders.yearsOfExperience")},{name:"level",label:s("fields.level"),type:"select",options:[{value:"Beginner",label:s("levels.beginner")},{value:"Intermediate",label:s("levels.intermediate")},{value:"Advanced",label:s("levels.advanced")},{value:"Expert",label:s("levels.expert")}]}]})},Ce=({role:t,profileId:r})=>{const{t:s}=S("music"),{fetchComposer:o,addComposer:x,updateComposer:i,deleteComposer:g}=ge(),{data:c,refetch:d}=o(t.id),n=a=>{var m;return{...a,years_of_experience:a.years_of_experience?parseInt(a.years_of_experience,10):null,composition_style:((m=a.composition_style)==null?void 0:m.trim())||null}};return e.jsx($,{role:t,profileId:r,details:Array.isArray(c)?c:[],refetch:d,addDetails:a=>x({details:n(a)}),updateDetails:(a,m)=>i({id:String(a),details:n(m)}),deleteDetails:a=>g({id:String(a)}),title:s("roles.detailsTitle",{role:s("roles.composer").toLowerCase()}),fields:[{name:"composition_style",label:s("fields.compositionStyle"),placeholder:s("placeholders.compositionStyle"),required:!0},{name:"years_of_experience",label:s("fields.yearsOfExperience"),type:"number",placeholder:s("placeholders.yearsOfExperience")},{name:"level",label:s("fields.level"),type:"select",options:[{value:"Beginner",label:s("levels.beginner")},{value:"Intermediate",label:s("levels.intermediate")},{value:"Advanced",label:s("levels.advanced")},{value:"Expert",label:s("levels.expert")}]}]})},De=({role:t,profileId:r})=>e.jsxs("div",{className:"mt-4",children:[t.role==="Instrumentalist"&&e.jsx(Se,{role:t,profileId:String(r)}),t.role==="Singer"&&e.jsx(Ne,{role:t,profileId:String(r)}),t.role==="DJ"&&e.jsx(_e,{role:t,profileId:String(r)}),t.role==="Producer"&&e.jsx(Pe,{role:t,profileId:String(r)}),t.role==="Composer"&&e.jsx(Ce,{role:t,profileId:String(r)})]}),Ee=({profileId:t})=>{const{t:r}=S("music"),{fetchRoles:s,addRole:o,deleteRole:x}=xe(),{data:i=[],isLoading:g,isError:c,error:d}=s(t),[n,a]=f.useState(null),{control:m,handleSubmit:_,watch:j,reset:R,setError:N,formState:{errors:F}}=B({defaultValues:{selectedRole:""}}),k=j("selectedRole"),P=b=>{const w=b.selectedRole;if(i.length>=6){N("selectedRole",{message:r("edit.errors.maxRoles")});return}if(!w){N("selectedRole",{message:r("edit.errors.empty")});return}if(i.some(q=>q.role.toLowerCase()===w.toLowerCase())){N("selectedRole",{message:r("edit.errors.duplicate")});return}o({profileId:t,roleName:w}).then(()=>{R()}).catch(()=>{N("selectedRole",{message:r("edit.errors.addError")})})},T=f.useCallback(b=>{a(w=>w===b?null:b)},[]);return g?e.jsx(pe,{}):c?e.jsx(he,{error:(d==null?void 0:d.message)??"Unknown error"}):e.jsxs("div",{className:"p-6 bg-gradient-to-r from-gray-900 text-white rounded-b-2xl shadow-lg max-w-4xl mx-auto",children:[e.jsxs("form",{onSubmit:_(P),className:"mb-6 space-y-4",children:[e.jsx("h2",{className:"text-2xl text-yellow-600 font-semibold text-center mb-4",children:r("edit.addRoleTitle")}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 items-center",children:[e.jsx(M,{id:"selectedRole",options:[{value:"Composer",label:r("roles.composer")},{value:"DJ",label:r("roles.dj")},{value:"Instrumentalist",label:r("roles.instrumentalist")},{value:"Producer",label:r("roles.producer")},{value:"Singer",label:r("roles.singer")}],defaultOption:r("edit.selectLabel"),control:m}),e.jsx("div",{className:`${k==="Other"?"md:col-span-2":""}`,children:e.jsx(I,{type:"submit",className:"w-full md:w-auto md:mt-3 !bg-emerald-600 hover:!bg-emerald-700",children:r("edit.addButton")})})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:r("edit.yourRoles")}),i.length===0?e.jsx("p",{className:"text-gray-300",children:r("edit.noRoles")}):e.jsx("div",{className:"space-y-4",children:i.map(b=>e.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 shadow-sm transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 cursor-pointer hover:bg-gray-700 rounded-t-lg",onClick:()=>T(b.id),children:[e.jsx("span",{className:"text-lg font-semibold text-white",children:r(`roles.${b.role.toLowerCase()}`)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{className:`w-5 h-5 text-gray-400 transition-transform ${n===b.id?"rotate-90":""}`}),e.jsx("button",{onClick:w=>{w.stopPropagation(),x({id:b.id,profileId:t})},className:"text-xs bg-red-500 text-white px-2 py-1 rounded-full hover:bg-red-600","aria-label":r("music.edit.deleteRoleAria",{role:b.role}),children:"✕"})]})]}),n===b.id&&e.jsx("div",{className:"bg-gray-900 border-t border-gray-700 px-4 py-4 rounded-b-lg",children:e.jsx(De,{role:b,profileId:t})})]},b.id))})]})]})},Le=[{value:"en",label:"English"},{value:"es",label:"Español"}],Re=[{value:"dark",label:"Dark"},{value:"light",label:"Light"}],ke=()=>{const{t}=S("settings",{keyPrefix:"account"}),{deleteProfile:r}=Q(),{user:s,updatePassword:o,deleteMyAccount:x,signOut:i}=W(),{prefs:g,saveUiPreferences:c}=G(),{control:d,handleSubmit:n,formState:{isDirty:a,isSubmitting:m}}=B({defaultValues:{language:(g==null?void 0:g.lang)??"en",theme:(g==null?void 0:g.theme)??"dark"}}),[_,j]=f.useState(!1),[R,N]=f.useState(!1),F=async({language:C,theme:l})=>{await c({lang:C,theme:l}),N(!0),setTimeout(()=>N(!1),2500)},{register:k,handleSubmit:P,watch:T,reset:b,formState:{errors:w,isSubmitting:E}}=B(),q=async({newPassword:C})=>{await o(C),b()},V=async()=>{try{if(!s)return;await r(s.id),await x(),await i()}catch(C){console.error(C)}finally{j(!1)}};return e.jsxs("div",{className:"flex flex-col gap-10 bg-gradient-to-l to-gray-900 light:bg-gradient-to-l light:to-gray-200 p-6 rounded-b-lg shadow-lg max-w-4xl mx-auto",children:[e.jsxs("section",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl text-yellow-600 font-semibold mb-4",children:t("title")}),e.jsxs("p",{className:"text-gray-200 light:text-gray-900 font-bold",children:["Email: ",e.jsx("span",{className:"text-gray-400 light:text-gray-600",children:(s==null?void 0:s.email)??""})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-semibold text-center mb-4",children:t("preferences.title")}),e.jsxs("form",{onSubmit:n(F),className:"max-w-lg mx-auto space-y-6",children:[e.jsx(M,{id:"language",label:t("labels.language"),control:d,options:Le,search:!1}),e.jsx(M,{id:"theme",label:t("labels.theme"),control:d,options:Re,search:!1}),e.jsx("div",{className:"sm:col-span-2 flex justify-center gap-4",children:e.jsx(I,{type:"submit",disabled:m,className:"!bg-emerald-600 hover:!bg-emerald-700",children:t(m?"buttons.saving":R?"buttons.saved":"buttons.save")})})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg text-center font-semibold mb-4",children:t("password.title")}),e.jsxs("form",{onSubmit:P(q),className:"max-w-lg mx-auto space-y-6",children:[e.jsx(z,{id:"newPassword",type:"password",label:t("labels.new"),placeholder:t("placeholders.new"),register:k,validation:{required:t("validations.required"),minLength:{value:6,message:t("validations.min")}},error:w.newPassword}),e.jsx(z,{id:"confirmPassword",type:"password",label:t("labels.confirm"),placeholder:t("placeholders.confirm"),register:k,validation:{validate:C=>C===T("newPassword")||t("validations.mismatch")},error:w.confirmPassword}),e.jsx("div",{className:"sm:col-span-2 flex justify-center gap-4",children:e.jsx(I,{type:"submit",disabled:E,className:"!bg-emerald-600 hover:!bg-emerald-700",children:t(E?"buttons.saving":"buttons.change")})})]})]}),e.jsxs("section",{className:"border-t sm:w-lg mx-auto text-center border-gray-700 pt-10",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-400 mb-4",children:t("danger.title")}),e.jsx(I,{className:"!bg-red-700 hover:!bg-red-800",onClick:()=>j(!0),type:"button",disabled:!1,children:t("buttons.delete")})]}),e.jsx(be,{isOpen:_,title:t("danger.title"),message:t("danger.confirm"),onConfirm:V,onCancel:()=>j(!1),confirmLabel:t("danger.yesDelete"),cancelLabel:t("danger.cancel"),color:"error"})]})},L=({id:t,label:r,register:s,validation:o={},error:x,className:i="",classForLabel:g="",...c})=>{const d=s?s(t,o):c;return e.jsxs("div",{className:`mb-4 flex bg-gray-900 p-4 rounded-lg items-center justify-between ${i}`,children:[r&&e.jsx("label",{htmlFor:t,className:`text-sm font-bold text-gray-200 select-none ${g}`,children:r}),e.jsxs("label",{htmlFor:t,className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{id:t,type:"checkbox",className:"sr-only peer",...d}),e.jsx("span",{className:`w-10 h-6 rounded-full bg-gray-500
                     transition-colors duration-200
                     peer-checked:bg-emerald-600
                     peer-focus:ring-2 peer-focus:ring-emerald-400/50`}),e.jsx("span",{className:`absolute left-0.5 top-0.5 w-5 h-5 rounded-full bg-white
                     transition-transform duration-200
                     peer-checked:translate-x-4`})]}),x&&e.jsx("p",{className:"text-red-500 text-sm mt-1 w-full",children:x.message||x})]})},Ae=()=>{const{t}=S("settings",{keyPrefix:"privacy"}),{privacyPrefs:r,savePrivacySettings:s}=G(),{register:o,handleSubmit:x,reset:i,formState:{isDirty:g,isSubmitting:c}}=B({defaultValues:{show_email:!1,show_last_seen:!1,allow_messages:"all"}}),[d,n]=f.useState(!1);f.useEffect(()=>{r&&i(r)},[r,i]);const a=async m=>{await s(m),n(!0),setTimeout(()=>n(!1),2500)};return e.jsxs("section",{className:"flex flex-col gap-10 bg-gradient-to-l to-gray-900 p-6 rounded-b-lg shadow-lg max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-2xl text-yellow-600 font-semibold mb-6 text-center",children:t("title")}),e.jsx(L,{id:"show_email",label:t("toggles.showEmail"),register:o,error:void 0}),e.jsx(L,{id:"show_last_seen",label:t("toggles.showLastSeen"),register:o,error:void 0}),e.jsx(M,{id:"allow_messages",label:t("allowMessages.label"),options:[{value:"all",label:t("allowMessages.options.all")},{value:"connections_only",label:t("allowMessages.options.connections")},{value:"none",label:t("allowMessages.options.none")}],register:o,search:!1}),e.jsx("div",{className:"pt-4 flex justify-center",children:e.jsx(I,{onClick:x(a),disabled:!g||c,className:"!bg-emerald-600 hover:!bg-emerald-700",children:t(c?"buttons.saving":d?"buttons.saved":"buttons.save")})})]})},Ie=()=>{const{t}=S("settings",{keyPrefix:"notifications"}),{notifPrefs:r,saveNotificationPrefs:s}=G(),{register:o,handleSubmit:x,reset:i,formState:{isDirty:g,isSubmitting:c}}=B({defaultValues:{likes:!0,comments:!0,connections:!0,groups:!0,matches:!0}}),[d,n]=f.useState(!1);f.useEffect(()=>{r&&i(r)},[r,i]);const a=async m=>{await s(m),n(!0),setTimeout(()=>n(!1),2500)};return e.jsxs("form",{onSubmit:x(a),className:"flex flex-col gap-10 bg-gradient-to-l to-gray-900 p-6 rounded-b-lg shadow-lg max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-2xl text-yellow-600 font-semibold mb-6 text-center",children:t("title")}),e.jsx(L,{id:"likes",label:t("toggles.likes"),register:o,error:void 0}),e.jsx(L,{id:"comments",label:t("toggles.comments"),register:o,error:void 0}),e.jsx(L,{id:"connections",label:t("toggles.connections"),register:o,error:void 0}),e.jsx(L,{id:"groups",label:t("toggles.groups"),register:o,error:void 0}),e.jsx(L,{id:"matches",label:t("toggles.matches"),register:o,error:void 0}),e.jsx("div",{className:"pt-4 flex justify-center",children:e.jsx(I,{type:"submit",disabled:!g||c,className:"!bg-emerald-600 hover:!bg-emerald-700",children:t(c?"buttons.saving":d?"buttons.saved":"buttons.save")})})]})},ze=()=>{const{user:t}=W();if(!t)return null;const{fetchProfile:r}=Q(),{data:s}=r(t.id);K("(min-width:760px)");const{t:o}=S("ui",{keyPrefix:"sidebar"}),x=[{to:"/settings/profile",label:o("profileSettings"),icon:i=>i?e.jsx(U,{avatar_url:(s==null?void 0:s.avatar_url)??void 0,alt:"Avatar",className:"!w-6 !h-6 !ring-2 !ring-yellow-600",gender:s==null?void 0:s.gender}):e.jsx(U,{avatar_url:(s==null?void 0:s.avatar_url)??void 0,alt:"Avatar",className:"!w-6 !h-6",gender:s==null?void 0:s.gender})},{to:"/settings/account",label:o("accountSettings"),icon:i=>i?e.jsx(X,{}):e.jsx(Y,{})},{to:"/settings/privacy",label:o("privacySettings"),icon:i=>i?e.jsx(Z,{}):e.jsx(ee,{})},{to:"/settings/notifications",label:o("notificationsSettings"),icon:i=>i?e.jsx(se,{}):e.jsx(te,{})},{to:"/settings/music",label:o("musicSettings"),icon:i=>i?e.jsx(ae,{}):e.jsx(re,{})}];return e.jsxs("div",{className:"settings-layout flex min-h-screen bg-gray-950 text-white",children:[e.jsx(ve,{avatarUrl:(s==null?void 0:s.avatar_url)??void 0,options:x}),e.jsx("div",{className:"settings-content flex-grow p-6 overflow-auto max-w-4xl ml-auto md:!mx-auto",children:e.jsxs(fe,{children:[e.jsx(A,{path:"profile",element:e.jsx(le,{profile:s})}),e.jsx(A,{path:"music",element:e.jsx(Ee,{profileId:t.id})}),e.jsx(A,{path:"account",element:e.jsx(ke,{})}),e.jsx(A,{path:"privacy",element:e.jsx(Ae,{})}),e.jsx(A,{path:"notifications",element:e.jsx(Ie,{})}),e.jsx(A,{index:!0,element:e.jsx(ye,{to:"profile",replace:!0})})]})})]})};export{ze as default};
