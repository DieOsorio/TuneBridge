import{j as e}from"./mui-DntPDMdt.js";import{r as b}from"./calendar-DXWKnWXk.js";import{L as w,a as U,M as H,u as P,O as A,k as B,E as j}from"./index-CXxZbzPL.js";import{S as G}from"./ShinyText-CNYmsWG2.js";import{P as M}from"./PlusButton-Df8mswDs.js";import{i as v,j as N,k,l as _,m as F,n as C,o as z,p as L,q as R,r as E,s as I,t as O}from"./icons-Cf_ygVw3.js";import{R as u}from"./reactPlayer-CBmCIXQE.js";import{g as y}from"./mediaValidation-PPsI62XD.js";import"./lottie-FCmafNqs.js";import"./gsap-CH_iu5NA.js";import"./filepond-DvarZm2e.js";const q=({audioMediaLinks:t,isOwnProfile:o,handleCopyLink:a,copiedId:n,setExpandedMedia:d,user:c,t:s,getSpotifyEmbedUrl:m,deleteMediaLink:l})=>t.length===0?null:e.jsxs("div",{className:"mb-10",children:[e.jsx("h2",{className:"text-xl font-bold text-[#1db954] mb-4 text-center uppercase",children:s("media.types.audio")}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:t.map(r=>e.jsxs("div",{className:"shadow-sm p-4 rounded-lg bg-gradient-to-l to-gray-800 flex flex-col items-center",children:[e.jsxs("div",{className:"mb-2 mt-2 flex flex-col items-center w-full",children:[e.jsx("p",{className:"font-medium text-lg mb-2",children:r.title}),e.jsxs("div",{className:"relative w-full flex justify-center",children:[e.jsx("button",{className:"absolute cursor-pointer top-2 right-2 z-10 bg-black/60 text-white rounded-lg p-1 hover:bg-black/80",title:s("media.titles.expand"),onClick:()=>d(r),children:e.jsx(v,{size:20})}),r.media_type==="spotify"&&r.url?e.jsxs("div",{className:"rounded-lg bg-[#1db954] p-1 w-full flex flex-col items-center",children:[e.jsx(N,{size:32,className:"mb-2 text-white"}),e.jsx("iframe",{src:m(r.url??"")||void 0,width:"100%",height:"80",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy"})]}):e.jsxs("div",{className:"w-full bg-gray-900 p-4 rounded-lg flex flex-col items-center",style:{minHeight:120},children:[e.jsx(k,{size:32,className:"mb-2 text-blue-400"}),e.jsx("audio",{controls:!0,src:r.url??"",className:"w-full"})]})]})]}),e.jsxs("div",{className:"flex gap-2 justify-center my-4",children:[e.jsx("button",{className:"px-2 py-1 cursor-pointer rounded-lg bg-sky-700 hover:bg-sky-800 text-white flex items-center gap-1",onClick:()=>a(r.url??"",r.id),title:n===r.id?s("media.titles.copied"):s("media.titles.copyLink"),children:n===r.id?e.jsx(_,{className:"text-emerald-500"}):e.jsx(F,{})}),e.jsx("a",{href:`https://twitter.com/intent/tweet?url=${encodeURIComponent(r.url??"")}`,target:"_blank",rel:"noopener noreferrer",className:"px-2 py-1 rounded-lg bg-black hover:bg-gray-900 text-white flex items-center gap-1",title:s("media.titles.twitter"),children:e.jsx(C,{})}),e.jsx("a",{href:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(r.url??"")}`,target:"_blank",rel:"noopener noreferrer",className:"px-2 py-1 rounded-lg bg-blue-800 hover:bg-blue-900 text-white flex items-center gap-1",title:s("media.titles.facebook"),children:e.jsx(z,{})}),e.jsx("a",{href:`https://www.instagram.com/?url=${encodeURIComponent(r.url??"")}`,target:"_blank",rel:"noopener noreferrer",className:"px-1.5 py-1 rounded-lg bg-gradient-to-tr from-pink-500 via-red-500 to-yellow-500 hover:from-pink-400 hover:via-red-400 hover:to-yellow-400 text-white flex items-center gap-1",title:s("media.titles.instagram"),children:e.jsx(L,{})})]}),o&&e.jsxs("div",{className:"flex gap-4 justify-center mt-auto",children:[e.jsxs(w,{to:`/media/edit/${r.id}`,className:"px-2 py-1 min-w-20 rounded-lg justify-center bg-yellow-600 hover:bg-yellow-700 flex items-center gap-1",children:[e.jsx(R,{}),s("media.actions.edit")]}),e.jsxs("button",{onClick:()=>c&&l({profile_id:c.id,id:r.id}),className:"px-2 py-1 min-w-20 rounded-lg justify-center cursor-pointer !bg-red-600 hover:!bg-red-700 flex items-center gap-1",children:[e.jsx(E,{}),s("media.actions.delete")]})]})]},r.id))})]}),V=({videoMediaLinks:t,isOwnProfile:o,handleCopyLink:a,copiedId:n,setExpandedMedia:d,user:c,t:s,deleteMediaLink:m})=>t.length===0?null:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-[#FF0000] mb-4 text-center uppercase",children:s("media.types.video")}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 gap-8",children:t.map(l=>e.jsxs("div",{className:"shadow-sm p-4 rounded-lg bg-gradient-to-l to-gray-800 flex flex-col items-center",children:[e.jsxs("div",{className:"mb-2 mt-2 flex flex-col items-center w-full",children:[e.jsx("p",{className:"font-medium text-lg mb-2",children:l.title}),e.jsxs("div",{className:"relative w-full flex justify-center",children:[e.jsx("button",{className:"absolute cursor-pointer top-2 right-2 z-10 bg-black/60 text-white rounded-lg p-1 hover:bg-black/80",title:s("media.titles.expand"),onClick:()=>d(l),children:e.jsx(v,{size:24})}),l.media_type==="youtube"&&l.url?e.jsxs("div",{className:"aspect-video w-full bg-gray-900 p-1 rounded-lg flex flex-col items-center",style:{minHeight:320},children:[e.jsx(I,{size:40,className:"mb-2 text-[#FF0000] bg-gray-200 rounded-lg w-11.5"}),e.jsx(u,{url:l.url??"",controls:!0,width:"100%",height:"100%"})]}):e.jsx("div",{className:"aspect-video w-full bg-gray-900 p-1 rounded-lg flex flex-col items-center",style:{minHeight:320},children:e.jsx(u,{url:l.url??"",controls:!0,width:"100%",height:"100%"})})]})]}),e.jsxs("div",{className:"flex gap-2 justify-center my-4",children:[e.jsx("button",{className:"px-2 py-1 cursor-pointer rounded-lg bg-sky-700 hover:bg-sky-700/50 text-white flex items-center gap-1 transition-all",onClick:()=>a(l.url??"",l.id),title:n===l.id?s("media.titles.copied"):s("media.titles.copyLink"),children:n===l.id?e.jsx(_,{className:"text-emerald-500"}):e.jsx(F,{})}),e.jsx("a",{href:`https://twitter.com/intent/tweet?url=${encodeURIComponent(l.url??"")}`,target:"_blank",rel:"noopener noreferrer",className:"px-2 py-1 rounded-lg bg-black hover:bg-black/50 text-white flex items-center gap-1 transition-all",title:s("media.titles.twitter"),children:e.jsx(C,{})}),e.jsx("a",{href:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(l.url??"")}`,target:"_blank",rel:"noopener noreferrer",className:"px-2 py-1 rounded-lg bg-blue-800 hover:bg-blue-800/50 text-white flex items-center gap-1 transition-all",title:s("media.titles.facebook"),children:e.jsx(z,{})}),e.jsx("a",{href:`https://www.instagram.com/?url=${encodeURIComponent(l.url??"")}`,target:"_blank",rel:"noopener noreferrer",className:"px-1.5 py-1 rounded-lg bg-gradient-to-tr from-pink-500 via-red-500 to-yellow-500 hover:from-pink-400 hover:via-red-400 hover:to-yellow-400 text-white flex items-center gap-1 transition-all",title:s("media.titles.instagram"),children:e.jsx(L,{})})]}),o&&e.jsxs("div",{className:"flex gap-4 justify-center mt-auto",children:[e.jsxs(w,{to:`/media/edit/${l.id}`,className:"px-2 py-1 min-w-20 rounded-lg justify-center bg-yellow-600 hover:bg-yellow-700 flex items-center gap-1 transition-all",children:[e.jsx(R,{}),s("media.actions.edit")]}),e.jsxs("button",{onClick:()=>c&&m({profile_id:c.id,id:l.id}),className:"px-2 py-1 min-w-20 rounded-lg justify-center cursor-pointer !bg-red-600 hover:!bg-red-700 flex items-center gap-1 transition-all",children:[e.jsx(E,{}),s("media.actions.delete")]})]})]},l.id))})]}),X=({expandedMedia:t,setExpandedMedia:o,t:a,getSpotifyEmbedUrl:n})=>t?e.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 max-w-3xl w-full relative",children:[e.jsx("button",{className:"absolute top-1 right-2 cursor-pointer bg-black/60 text-white rounded-full p-2 hover:bg-black/80",onClick:()=>o(null),title:a("media.titles.close"),children:e.jsx(O,{size:20})}),e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"font-bold text-xl mb-2",children:t.title})}),t.media_type==="spotify"&&t.url?e.jsxs("div",{className:"rounded-lg bg-[#1db954] p-1 flex flex-col items-center",children:[e.jsx(N,{size:32,className:"mb-2 text-white"}),e.jsx("iframe",{src:n(t.url)||void 0,width:"100%",height:"80",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy"})]}):t.media_type==="audio"&&t.url?e.jsxs("div",{className:"w-full bg-gray-900 p-4 rounded-lg flex flex-col items-center",style:{minHeight:120},children:[e.jsx(k,{size:32,className:"mb-2 text-blue-400"}),e.jsx("audio",{controls:!0,src:t.url,className:"w-full"})]}):t.media_type==="youtube"&&t.url?e.jsxs("div",{className:"aspect-video w-full bg-gray-900 p-1 rounded-lg flex flex-col items-center",style:{minHeight:320},children:[e.jsx(I,{size:40,className:"mb-2 text-[#FF0000] bg-gray-200 rounded-lg w-11.5"}),e.jsx(u,{url:t.url,controls:!0,width:"100%",height:"100%"})]}):t.url?e.jsx("div",{className:"aspect-video w-full bg-gray-900 p-1 rounded-lg flex flex-col items-center",style:{minHeight:320},children:e.jsx(u,{url:t.url,controls:!0,width:"100%",height:"100%"})}):null]})}):null,re=()=>{const{user:t}=U(),{id:o}=H(),{t:a}=P("music"),{userMediaLinks:n,deleteMediaLink:d}=A(),[c,s]=b.useState(null),[m,l]=b.useState(null);let r=[],g=!1,x=null;if(o){const i=n(o);r=i.data??[],g=i.isLoading,x=i.error}const p=t&&t.id===o;if(g||!o)return e.jsx(B,{});if(x)return e.jsx(j,{error:x.message});if(!Array.isArray(r))return e.jsx(j,{error:"Invalid media data received"});const h=[...r.filter(i=>i.media_type==="spotify"),...r.filter(i=>i.media_type!=="spotify")],$=h.filter(i=>i.media_type==="audio"||i.media_type==="spotify"),S=h.filter(i=>i.media_type==="youtube"||i.media_type!=="audio"&&i.media_type!=="spotify"),f=(i,T)=>{navigator.clipboard.writeText(i),l(T),setTimeout(()=>l(null),1500)};return e.jsxs("section",{className:"max-w-260 mx-auto",children:[e.jsx("div",{className:"text-center font-semibold",children:e.jsx(G,{text:a("media.title"),className:"text-3xl font-semibold tracking-wide mb-12"})}),p&&e.jsx(M,{label:a("media.actions.add"),to:"/media/create"}),e.jsx(q,{audioMediaLinks:$,isOwnProfile:p,handleCopyLink:f,copiedId:m,setExpandedMedia:s,user:t,t:a,getSpotifyEmbedUrl:y,deleteMediaLink:d}),e.jsx(V,{videoMediaLinks:S,isOwnProfile:p,handleCopyLink:f,copiedId:m,setExpandedMedia:s,user:t,t:a,deleteMediaLink:d}),e.jsx(X,{expandedMedia:c,setExpandedMedia:s,t:a,getSpotifyEmbedUrl:y})]})};export{re as default};
